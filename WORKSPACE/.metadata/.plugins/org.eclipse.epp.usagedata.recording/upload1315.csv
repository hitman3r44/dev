what,kind,bundleId,bundleVersion,description,time
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1413494638368
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.delete",1413494696744
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413494705930
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413494707835
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.text.contentAssist.proposals",1413494791846
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1413494843288
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1413494843418
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413494846762
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413494846994
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413494880224
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413494887522
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413494889399
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1413494896598
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1413494896805
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413494905153
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413494907103
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.text.contentAssist.proposals",1413494922944
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413494952018
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413494954408
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413494960357
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413494961580
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.text.contentAssist.proposals",1413494968727
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413494975213
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413494986947
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413495008011
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413495010081
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.text.contentAssist.proposals",1413495020230
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1413495044170
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1413495044379
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413495050473
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413495052322
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1413495073634
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1413495234080
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.file.save",1413495242957
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1413495244903
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.file.save",1413495254573
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1413495258281
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413495281602
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413495286759
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.text.contentAssist.proposals",1413495292814
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.delete",1413495295868
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.delete",1413495296292
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.delete",1413495296962
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1413495299382
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1413495312199
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.file.saveAll",1413495320037
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1413495321151
error,log,,,"Exception occurred during problem detection:\n----------------------------------- SOURCE BEGIN -------------------------------------\npackage com.loyauty.web.struts.action.orders;\n\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport org.apache.commons.io.FileUtils;\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport lombok.Getter;\nimport lombok.Setter;\n\nimport com.loyauty.exception.ServiceLocatorException;\nimport com.loyauty.model.User;\nimport com.loyauty.service.core.dto.BasicUserDTO;\nimport com.loyauty.service.core.dto.OrdersDTO;\nimport com.loyauty.service.core.dto.UserSessionDTO;\nimport com.loyauty.service.orders.OrdersService;\nimport com.loyauty.service.user.UserService;\nimport com.loyauty.web.struts.action.LoyautyAction;\nimport javax.servlet.http.HttpSession;\n\npublic class UploadAdminXLS extends LoyautyAction {\n\n\tprivate static final long serialVersionUID = 6649940042042023814L;\n\tprivate OrdersService orderService;\n\tprivate UserService userService;\n\t@Getter @Setter\n\tprivate File fileXLS;\n\t@Getter @Setter\n\tprivate String myFileContentType;\n\t@Getter @Setter\n\tprivate String myFileFileName;\n\t@Getter @Setter\n\tprivate String destPath;\n\t@Getter @Setter\n\tprivate String message="""";\n\t@Getter @Setter\n\tprivate String showNotificationPop;\n\t@Getter @Setter\n\tprivate String showWaitPop;\n\t@Getter @Setter\n\tprivate Long okNotificationPop;\n\t@Getter @Setter\n\tprivate int init;\n\t@Getter @Setter\n\tprivate List<User> usersList;\n\t@Getter @Setter\n\tprivate String userLogo;\n\t@Getter @Setter\n\tStringBuffer rapportError;\n\t@Getter @Setter\n\tprivate String userLogin;\n\tprivate User user;\n\tprivate String userAdminLogin;\n\tprivate static int USER_TYPE = 2;\n\tprivate List<OrdersDTO>listOrdersFormXLS;\n\tpublic UploadAdminXLS()throws ServiceLocatorException{\n\t\tsuper();\n\t\torderService = getServiceLocator().getOrderService();\n\t\tuserService = getServiceLocator().getUserService();\n\t}\n\n\t@SuppressWarnings({ ""unchecked"" })\n\t@Override\n\tpublic String execute() throws Exception {\n\t\trapportError=new StringBuffer();\n\t\tshowNotificationPop=""visibility:hidden;display:none;"";\n\t\tshowWaitPop=""visibility:hidden;display:none;"";\n\t\tHttpSession session = request.getSession(true);\n\t\tUser userAdmin=(User)session.getAttribute(""userAdmin"");\n\t\tinit=(Integer)session.getAttribute(""init"");\n\t\tuserLogo=(String)session.getAttribute(""userLogo"");\n\t\tlistOrdersFormXLS=(List<OrdersDTO>)session.getAttribute(""listOrdersFormXLS"");\n\t\tif(listOrdersFormXLS==null)listOrdersFormXLS=new ArrayList<OrdersDTO>();\n\t\t// -------------------------- recovery users if not exit --------------------\n\t\tBasicUserDTO basicUserDTO = new BasicUserDTO();\n\t\tbasicUserDTO.setTypeId(USER_TYPE);\n\t\tList<User> usersListSession=(List<User>)session.getAttribute(""usersListSession"");\n\t\tif(usersListSession==null){\n\t\t\tList<UserSessionDTO> listAllUsers= userService.getAllUsers(basicUserDTO);\n\t\t\tusersList=new ArrayList<User>();\n\t\t\tfor(UserSessionDTO userDTO:listAllUsers){\n\t\t\t\tUser user=new User();\n\t\t\t\tuser.setId(userDTO.getId());\n\t\t\t\tuser.setLogin(userDTO.getLogin());\n\t\t\t\tusersList.add(user);\n\t\t\t}\n\t\t\tsession.setAttribute(""usersListSession"",usersList);\n\t\t}else usersList=usersListSession;\n\n\t\t// ----------------- quit immediately if admin not sign in correctly -----------\n\t\tif(userAdmin==null){\n\t\t\tuserAdminLogin="""";\n\t\t\treturn SUCCESS;\t\n\t\t}else{\n\t\t\tuserAdminLogin=userAdmin.getLogin();\n\t\t}\n\n\t\t// --------------- quit immediately if just notification response(OK) ----------\n\t\tif(okNotificationPop!=null && okNotificationPop!=0L){\n\t\t\trapportError=(StringBuffer)session.getAttribute(""rapportError"");\n\t\t\treturn SUCCESS;\t\n\t\t}\n\n\t\t// ------------------------ check the file name destination --------------------\n\t\tString fileNameToSave=""error.xls"";\n\t\tif(fileXLS!=null){\n\t\t\tswitch (init) {\n\t\t\tcase 1:fileNameToSave=""ordersAdminImport.xls"";\n\t\t\tbreak;\n\t\t\tcase 2:fileNameToSave=""stock.xls"";\n\t\t\tbreak;\n\t\t\tcase 3:fileNameToSave=""specialShipping.xls"";\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\trapportError=null;\n\t\t\t\tsession.setAttribute(""rapportError"",null);\n\t\t\t\treturn SUCCESS;\t\n\t\t\t}\n\n\t\t\t/*---------------- retrieve file info customer order -------------------------*/\n\t\t\tuser=userService.getUserByLogin(userLogin);\n\t\t\tsession.setAttribute(""userLogin"",userLogin);\n\t\t\tif(user==null && init==3){\n\t\t\t\tuserLogo=null;\n\t\t\t\tsession.setAttribute(""userLogo"",null);\n\t\t\t\trapportError=null;\n\t\t\t\tsession.setAttribute(""rapportError"",null);\n\t\t\t\taddActionError(getText(""loyauty.error.common.userNotFound""));\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t//show user logo\n\t\t\tuserLogo=""./images/orders/usersLogos/""+userLogin+"".png"";\n\t\t\tsession.setAttribute(""userLogo"",userLogo);\n\t\t\tString filePath = session.getServletContext().getRealPath(""/"");\n\t\t\tString filePathData = filePath + ""WEB-INF/jsp/orders/data/"";\n\n\t\t\t//if userLogo dosn't exist give him a blank logo\n\t\t\tcreateUserLogo(filePath +""images/orders/usersLogos/BLANK.png"", filePath +""images/orders/usersLogos/""+userLogin+"".png"");\n\n\t\t\t// ------------------ Upload file xls -----------------------\n\t\t\tFile destFileXLS = new File(filePathData+fileNameToSave);\n\t\t\tif(destFileXLS.exists())destFileXLS.delete();\n\n\t\t\ttry {\n\t\t\t\tdestFileXLS = new File(filePathData, fileNameToSave);\n\t\t\t\tFileUtils.copyFile(fileXLS, destFileXLS);\n\n\t\t\t} catch (IOException e) {\n\t\t\t\te.printStackTrace();\n\t\t\t\tshowNotificationPop=""display:block;visibility:visible;"";\n\t\t\t\tmessage=""The system to a problem.\\nCheck that the file is in XLS format"";\n\t\t\t\trapportError=null;\n\t\t\t\tsession.setAttribute(""rapportError"",null);\n\t\t\t\tuserLogo=null;\n\t\t\t\tsession.setAttribute(""userLogo"",null);\n\t\t\t\treturn ""input"";\n\t\t\t}\n\n\t\t\ttry {\n\n\t\t\t\tswitch (init) {\n\t\t\t\tcase 1:\n\t\t\t\t\torderService.updateOrdersRowsFromAdminXLS(userAdminLogin,filePathData);\n\t\t\t\t\tmessage=""Update of Orders status is successfully completed"";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tif(doUpdateStock!=null && doUpdateStock!=0){\n\t\t\t\t\t\tlistOrdersFormXLS=orderService.listStockFromXLS(filePath, filePathData);\n\t\t\t\t\t}\n\t\t\t\t\torderService.updateStockFromStockXLS(listOrdersFormXLS);\n\t\t\t\t\tmessage=""Update of Stock is successfully completed"";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\torderService.updateSpecialShippingFromXLS(rapportError,userAdminLogin,user.getId(),filePathData);\n\t\t\t\t\tmessage=""Saving Shipping Rate is successfully completed"";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\treturn SUCCESS;\t\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""rapportError"",rapportError);\n\t\t\t\tshowNotificationPop=""display:block;visibility:visible;"";\n\t\t\t} catch (Exception e) {\n\t\t\t\trapportError=null;\n\t\t\t\tsession.setAttribute(""rapportError"",null);\n\t\t\t\tuserLogo=null;\n\t\t\t\tsession.setAttribute(""userLogo"",null);\n\t\t\t\taddActionError(getText(""loyauty.error.common.fileMustBeXLS""));\n\t\t\t}\n\t\t\treturn SUCCESS;\n\t\t}else{\n\t\t\tshowNotificationPop=""display:block;visibility:visible;"";\n\t\t\tmessage=""The file is empty !"";\n\t\t\trapportError=null;\n\t\t\tsession.setAttribute(""rapportError"",null);\n\t\t\tuserLogo=null;\n\t\t\tsession.setAttribute(""userLogo"",null);\n\t\t\taddActionError(getText(""loyauty.error.common.fileUpload""));\n\t\t\treturn ""input"";\n\t\t}\n\n\t}\n\n\t/*=========================  createUserLogo ===========================\n\t \t\t\t\tCreate  Blank User Logo if not Exist\n\t  =================================================================*/\n\tpublic void createUserLogo(String source, String destination) throws IOException{\n\t\tFile fileLogo=new File(destination);\n\t\tif(!fileLogo.exists()){\n\t\t\tInputStream in = new FileInputStream(source);\n\t\t\tOutputStream out = new FileOutputStream(destination);\n\t\t\tbyte[] buf = new byte[1024];\n\t\t\tint len;\n\t\t\twhile ((len = in.read(buf)) > 0) {\n\t\t\t\tout.write(buf, 0, len);\n\t\t\t}\n\t\t\tin.close();\n\t\t\tout.close();\t\n\t\t}\n\t}\n\n}\n\n----------------------------------- SOURCE END -------------------------------------",1413495322799
error,log,,,"Problems occurred when invoking code from plug-in: ""org.eclipse.jdt.ui"".",1413495322801
error,log,,,"Error in JDT Core during reconcile",1413495322801
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1413495324472
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.file.save",1413495333595
opened,view,org.eclipse.ui.ide,3.6.2.M20101201-0800,"org.eclipse.ui.views.ProblemView",1413495339020
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1413495353334
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1413495375228
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1413495382098
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.file.save",1413495397726
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1413495399018
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.text.contentAssist.proposals",1413495456210
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.text.contentAssist.proposals",1413495462084
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.text.contentAssist.proposals",1413495464798
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.text.contentAssist.proposals",1413495485726
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1413495496059
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1413495496270
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413495502138
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413495503754
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413495508730
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413495511571
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1413495515101
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1413495515232
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.file.save",1413495518573
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1413495536965
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.findReplace",1413495536979
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1413495540324
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1413495586894
activated,view,org.eclipse.ui.ide,3.6.2.M20101201-0800,"org.eclipse.ui.views.ResourceNavigator",1413495636670
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1413495657019
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413495660018
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.delete",1413495667561
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.text.contentAssist.proposals",1413495674649
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413495685762
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1413495696130
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1413495696329
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413495701291
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413495704481
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413495712066
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413495712306
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413495725103
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.file.save",1413495745239
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.cut",1413495764669
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413495766265
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.cut",1413495773436
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413495777148
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413495837622
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413495870115
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413495883076
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.file.save",1413495893133
started,bundle,org.eclipse.debug.ui,3.6.3.v20101201_r362,"org.eclipse.debug.ui",1413495896382
started,bundle,org.eclipse.jdt.debug,3.6.1.v20100715_r361,"org.eclipse.jdt.debug",1413495896416
started,bundle,org.eclipse.jdt.debug.ui,3.5.2.v20100928a_r362,"org.eclipse.jdt.debug.ui",1413495896473
executed,command,,,"AUTOGEN:::org.eclipse.jdt.debug.CompilationUnitEditor.BreakpointRulerActions/org.eclipse.jdt.debug.ui.actions.ManageBreakpointRulerAction",1413495896499
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413495919666
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413495921747
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413495962786
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413495966690
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413495968430
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413495992754
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413495992994
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413496008066
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413496011659
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413496016650
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413496016883
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413496018739
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413496023128
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413496051835
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413496060187
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413496068762
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413496072366
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.text.contentAssist.proposals",1413496116457
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413496124989
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413496130844
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413496136644
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413496141141
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413496145418
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413496145626
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413496153295
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413496158180
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413496160072
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413496169483
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413496169723
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1413496169939
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413496173584
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1413496176808
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.file.save",1413496180101
activated,view,org.eclipse.wst.server.ui,1.1.207.v20110119,"org.eclipse.wst.server.ui.ServersView",1413496195672
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1413496206304
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1413496207224
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1413496207561
started,bundle,org.eclipse.jst.server.tomcat.ui,1.1.200.v20100418,"org.eclipse.jst.server.tomcat.ui",1413496213329
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1413496213442
opened,view,org.eclipse.ui.console,3.5.0.v20100526,"org.eclipse.ui.console.ConsoleView",1413496217105
activated,view,org.eclipse.ui.console,3.5.0.v20100526,"org.eclipse.ui.console.ConsoleView",1413496217114
activated,view,org.eclipse.wst.server.ui,1.1.207.v20110119,"org.eclipse.wst.server.ui.ServersView",1413496218895
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1413496222965
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1413496230772
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1413496232420
executed,command,org.eclipse.ui.ide,3.6.2.M20101201-0800,"org.eclipse.ui.project.cleanAction",1413496232426
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1413496232710
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1413496233075
error,log,,,"Exception occurred during problem detection:\n----------------------------------- SOURCE BEGIN -------------------------------------\npackage com.loyauty.web.struts.action.orders;\n\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport org.apache.commons.io.FileUtils;\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport lombok.Getter;\nimport lombok.Setter;\n\nimport com.loyauty.exception.ServiceLocatorException;\nimport com.loyauty.model.User;\nimport com.loyauty.service.core.dto.BasicUserDTO;\nimport com.loyauty.service.core.dto.OrdersDTO;\nimport com.loyauty.service.core.dto.UserSessionDTO;\nimport com.loyauty.service.orders.OrdersService;\nimport com.loyauty.service.user.UserService;\nimport com.loyauty.web.struts.action.LoyautyAction;\nimport javax.servlet.http.HttpSession;\n\npublic class UploadAdminXLS extends LoyautyAction {\n\n\tprivate static final long serialVersionUID = 6649940042042023814L;\n\tprivate OrdersService orderService;\n\tprivate UserService userService;\n\t@Getter @Setter\n\tprivate File fileXLS;\n\t@Getter @Setter\n\tprivate String myFileContentType;\n\t@Getter @Setter\n\tprivate String myFileFileName;\n\t@Getter @Setter\n\tprivate String destPath;\n\t@Getter @Setter\n\tprivate String message="""";\n\t@Getter @Setter\n\tprivate String showNotificationPop;\n\t@Getter @Setter\n\tprivate String showWaitPop;\n\t@Getter @Setter\n\tprivate Long okNotificationPop;\n\t@Getter @Setter\n\tprivate int init;\n\t@Getter @Setter\n\tprivate List<User> usersList;\n\t@Getter @Setter\n\tprivate String userLogo;\n\t@Getter @Setter\n\tStringBuffer rapportError;\n\t@Getter @Setter\n\tprivate String userLogin;\n\tprivate User user;\n\tprivate String userAdminLogin;\n\tprivate static int USER_TYPE = 2;\n\tprivate List<OrdersDTO>listOrdersFormXLS;\n\t@Getter @Setter\n\tprivate Integer doUpdateStock;\n\t@Getter @Setter\n\tprivate Integer doCleanListOrders;\n\tpublic UploadAdminXLS()throws ServiceLocatorException{\n\t\tsuper();\n\t\torderService = getServiceLocator().getOrderService();\n\t\tuserService = getServiceLocator().getUserService();\n\t}\n\n\t@SuppressWarnings({ ""unchecked"" })\n\t@Override\n\tpublic String execute() throws Exception {\n\t\trapportError=new StringBuffer();\n\t\tshowNotificationPop=""visibility:hidden;display:none;"";\n\t\tshowWaitPop=""visibility:hidden;display:none;"";\n\t\tHttpSession session = request.getSession(true);\n\t\tUser userAdmin=(User)session.getAttribute(""userAdmin"");\n\t\tinit=(Integer)session.getAttribute(""init"");\n\t\tuserLogo=(String)session.getAttribute(""userLogo"");\n\t\tlistOrdersFormXLS=(List<OrdersDTO>)session.getAttribute(""listOrdersFormXLS"");\n\t\tif(listOrdersFormXLS==null)listOrdersFormXLS=new ArrayList<OrdersDTO>();\n\t\t// -------------------------- recovery users if not exit --------------------\n\t\tBasicUserDTO basicUserDTO = new BasicUserDTO();\n\t\tbasicUserDTO.setTypeId(USER_TYPE);\n\t\tList<User> usersListSession=(List<User>)session.getAttribute(""usersListSession"");\n\t\tif(usersListSession==null){\n\t\t\tList<UserSessionDTO> listAllUsers= userService.getAllUsers(basicUserDTO);\n\t\t\tusersList=new ArrayList<User>();\n\t\t\tfor(UserSessionDTO userDTO:listAllUsers){\n\t\t\t\tUser user=new User();\n\t\t\t\tuser.setId(userDTO.getId());\n\t\t\t\tuser.setLogin(userDTO.getLogin());\n\t\t\t\tusersList.add(user);\n\t\t\t}\n\t\t\tsession.setAttribute(""usersListSession"",usersList);\n\t\t}else usersList=usersListSession;\n\n\t\t// ----------------- quit immediately if admin not sign in correctly -----------\n\t\tif(userAdmin==null){\n\t\t\tuserAdminLogin="""";\n\t\t\treturn SUCCESS;\t\n\t\t}else{\n\t\t\tuserAdminLogin=userAdmin.getLogin();\n\t\t}\n\n\t\t// --------------- quit immediately if just notification response(OK) ----------\n\t\tif(okNotificationPop!=null && okNotificationPop!=0L){\n\t\t\trapportError=(StringBuffer)session.getAttribute(""rapportError"");\n\t\t\treturn SUCCESS;\t\n\t\t}\n\n\t\t// ------------------------ check the file name destination --------------------\n\t\tString fileNameToSave=""error.xls"";\n\t\tif(fileXLS!=null){\n\t\t\tswitch (init) {\n\t\t\tcase 1:fileNameToSave=""ordersAdminImport.xls"";\n\t\t\tbreak;\n\t\t\tcase 2:fileNameToSave=""stock.xls"";\n\t\t\tbreak;\n\t\t\tcase 3:fileNameToSave=""specialShipping.xls"";\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\trapportError=null;\n\t\t\t\tsession.setAttribute(""rapportError"",null);\n\t\t\t\treturn SUCCESS;\t\n\t\t\t}\n\n\t\t\t/*---------------- retrieve file info customer order -------------------------*/\n\t\t\tuser=userService.getUserByLogin(userLogin);\n\t\t\tsession.setAttribute(""userLogin"",userLogin);\n\t\t\tif(user==null && init==3){\n\t\t\t\tuserLogo=null;\n\t\t\t\tsession.setAttribute(""userLogo"",null);\n\t\t\t\trapportError=null;\n\t\t\t\tsession.setAttribute(""rapportError"",null);\n\t\t\t\taddActionError(getText(""loyauty.error.common.userNotFound""));\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t//show user logo\n\t\t\tuserLogo=""./images/orders/usersLogos/""+userLogin+"".png"";\n\t\t\tsession.setAttribute(""userLogo"",userLogo);\n\t\t\tString filePath = session.getServletContext().getRealPath(""/"");\n\t\t\tString filePathData = filePath + ""WEB-INF/jsp/orders/data/"";\n\n\t\t\t//if userLogo dosn't exist give him a blank logo\n\t\t\tcreateUserLogo(filePath +""images/orders/usersLogos/BLANK.png"", filePath +""images/orders/usersLogos/""+userLogin+"".png"");\n\n\t\t\t// ------------------ Upload file xls -----------------------\n\t\t\tFile destFileXLS = new File(filePathData+fileNameToSave);\n\t\t\tif(destFileXLS.exists())destFileXLS.delete();\n\n\t\t\ttry {\n\t\t\t\tdestFileXLS = new File(filePathData, fileNameToSave);\n\t\t\t\tFileUtils.copyFile(fileXLS, destFileXLS);\n\n\t\t\t} catch (IOException e) {\n\t\t\t\te.printStackTrace();\n\t\t\t\tshowNotificationPop=""display:block;visibility:visible;"";\n\t\t\t\tmessage=""The system to a problem.\\nCheck that the file is in XLS format"";\n\t\t\t\trapportError=null;\n\t\t\t\tsession.setAttribute(""rapportError"",null);\n\t\t\t\tuserLogo=null;\n\t\t\t\tsession.setAttribute(""userLogo"",null);\n\t\t\t\treturn ""input"";\n\t\t\t}\n\n\t\t\ttry {\n\n\t\t\t\tswitch (init) {\n\t\t\t\tcase 1:\n\t\t\t\t\torderService.updateOrdersRowsFromAdminXLS(userAdminLogin,filePathData);\n\t\t\t\t\tmessage=""Update of Orders status is successfully completed"";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tif(doCleanListOrders!=null && doCleanListOrders!=0){\n\t\t\t\t\t\tlistOrdersFormXLS=new ArrayList<OrdersDTO>();\n\t\t\t\t\t\tsession.setAttribute(""listOrdersFormXLS"", listOrdersFormXLS);\n\t\t\t\t\t}\n\t\t\t\t\tif(doUpdateStock!=null && doUpdateStock!=0){\n\t\t\t\t\t\tList<OrdersDTO> listOrders=orderService.listStockFromXLS(filePath, filePathData);\n\t\t\t\t\t\tlistOrdersFormXLS.addAll(listOrders);\n\t\t\t\t\t\tsession.setAttribute(""listOrdersFormXLS"", listOrdersFormXLS);\n\t\t\t\t\t\tshowNotificationPop=""visibility:hidden;display:none;"";\n\t\t\t\t\t}else{\n\t\t\t\t\t\torderService.updateStockFromStockXLS(listOrdersFormXLS);\n\t\t\t\t\t\tlistOrdersFormXLS=new ArrayList<OrdersDTO>();\n\t\t\t\t\t\tsession.setAttribute(""listOrdersFormXLS"", listOrdersFormXLS);\n\t\t\t\t\t\tmessage=""Update of Stock is successfully completed"";\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\torderService.updateSpecialShippingFromXLS(rapportError,userAdminLogin,user.getId(),filePathData);\n\t\t\t\t\tmessage=""Saving Shipping Rate is successfully completed"";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\treturn SUCCESS;\t\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""rapportError"",rapportError);\n\t\t\t\tshowNotificationPop=""display:block;visibility:visible;"";\n\t\t\t} catch (Exception e) {\n\t\t\t\trapportError=null;\n\t\t\t\tsession.setAttribute(""rapportError"",null);\n\t\t\t\tuserLogo=null;\n\t\t\t\tsession.setAttribute(""userLogo"",null);\n\t\t\t\taddActionError(getText(""loyauty.error.common.fileMustBeXLS""));\n\t\t\t}\n\t\t\treturn SUCCESS;\n\t\t}else{\n\t\t\tshowNotificationPop=""display:block;visibility:visible;"";\n\t\t\tmessage=""The file is empty !"";\n\t\t\trapportError=null;\n\t\t\tsession.setAttribute(""rapportError"",null);\n\t\t\tuserLogo=null;\n\t\t\tsession.setAttribute(""userLogo"",null);\n\t\t\taddActionError(getText(""loyauty.error.common.fileUpload""));\n\t\t\treturn ""input"";\n\t\t}\n\n\t}\n\n\t/*=========================  createUserLogo ===========================\n\t \t\t\t\tCreate  Blank User Logo if not Exist\n\t  =================================================================*/\n\tpublic void createUserLogo(String source, String destination) throws IOException{\n\t\tFile fileLogo=new File(destination);\n\t\tif(!fileLogo.exists()){\n\t\t\tInputStream in = new FileInputStream(source);\n\t\t\tOutputStream out = new FileOutputStream(destination);\n\t\t\tbyte[] buf = new byte[1024];\n\t\t\tint len;\n\t\t\twhile ((len = in.read(buf)) > 0) {\n\t\t\t\tout.write(buf, 0, len);\n\t\t\t}\n\t\t\tin.close();\n\t\t\tout.close();\t\n\t\t}\n\t}\n\n}\n\n----------------------------------- SOURCE END -------------------------------------",1413496233614
