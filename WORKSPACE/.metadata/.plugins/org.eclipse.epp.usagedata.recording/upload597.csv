what,kind,bundleId,bundleVersion,description,time
error,log,,,"Problems occurred when invoking code from plug-in: ""org.eclipse.jdt.ui"".",1392751026061
error,log,,,"Error in JDT Core during reconcile",1392751026061
error,log,,,"Exception occurred during problem detection:\n----------------------------------- SOURCE BEGIN -------------------------------------\n/**\n * \n */\npackage com.loyauty.web.struts.action.user;\n\n//import lombok.Getter;\nimport javax.servlet.http.HttpSession;\nimport lombok.Getter;\nimport lombok.Setter;\n\nimport com.loyauty.exception.InvalidUserException;\nimport com.loyauty.exception.ServiceException;\nimport com.loyauty.exception.ServiceLocatorException;\nimport com.loyauty.model.User;\nimport com.loyauty.service.core.dto.UserDTO;\nimport com.loyauty.service.core.dto.UserFileRecoveryDTO;\nimport com.loyauty.service.core.dto.UserSessionDTO;\nimport com.loyauty.service.core.dto.UsersPrivilegesDTO;\nimport com.loyauty.service.orders.OrdersService;\nimport com.loyauty.service.user.UserService;\nimport com.loyauty.service.usersprivileges.UsersPrivilegesService;\nimport com.loyauty.web.WebConstants;\nimport com.loyauty.web.struts.action.LoyautyAction;\n\nimport com.opensymphony.xwork2.validator.annotations.RequiredStringValidator;\nimport com.opensymphony.xwork2.validator.annotations.Validations;\nimport com.opensymphony.xwork2.validator.annotations.ValidatorType;\n\n/**\n * @author Arnaud\n * This class is in charge of logging a User\n */\n@Validations(requiredStrings = {\n\t\t\t\t\t@RequiredStringValidator(fieldName = ""username"", type = ValidatorType.FIELD, message = ""Username is required""),\n\t\t\t\t\t@RequiredStringValidator(fieldName = ""password"", type = ValidatorType.FIELD, message = ""Password is required"")\n\t\t  \t\t }\n)\n\npublic class Login extends LoyautyAction {\n\t\n\tprivate static final long serialVersionUID = 7640068153357889448L;\n\n\tprivate UserService userService;\n\tprivate UsersPrivilegesService usersPrivilegesService;\n\tprivate UserSessionDTO userSession;\n\t/*\n\t * Form field\n\t */\n\t@Getter @Setter\n\tprivate String username;\n\t@Getter @Setter\n\tprivate String password;\n\t@Getter @Setter\n\tprivate Long redirect=0L;\n\tprivate User userAdmin;\n\t//private UserDTO superAdmin;\n\tpublic Login() throws ServiceLocatorException {\n\t\tuserService = getServiceLocator().getUserService();\n\t\tusersPrivilegesService = getServiceLocator().getUserPrivilegesService();\n\t}\t\n\t\n\t\n\t\n\t@Override\n\tpublic void validate() {\n\t\t// the authentication is done in a validate method cause if a error is raised from an execute method it won't be handle by Struts JSON validation. \n\t/*\ttry {\n\t\t\tlog.debug(""validate user"");\n\t\t\tuserSession = userService.adminAuthenticate(username, password);\n\t\t\tlog.debug(""user : "" + userSession.getLogin());\n\t\t\t\n\t\t} catch (InvalidUserException iue) {\n\t\t\taddActionError(""bad login / password. Try again."");\n\t\t} catch (ServiceException e) {\n\t\t\tlog.error(""an error occured while user authentification"",e);\n\t\t}*/\n\t}\n\t\n\t@Override\n\tpublic String execute() throws Exception {\n\t\t//boolean next = false;\n\t\t//log.debug(""logged in"");\n\t\tsuperAdmin=null;\n\t\tuserSession = userService.authenticateAdmin(username, password);\n\t\tHttpSession session = request.getSession(true);\n\t\tredirect=-1L;\n\t\tif (userSession != null) {\n\t\t\tredirect=1L;\n\t\t\tsession.setAttribute(WebConstants.USER, userSession);\n\t\t\tuserAdmin=userService.getUserByLogin(userSession.getLogin());\n\t\t\tsession.setAttribute(""userAdmin"", userAdmin);\n\t\t\t//recovery super Admin(type=1)\n\t\t\tsuperAdmin=userService.getSuperAdmin(username, password);\n\t\t\tsession.setAttribute(""superAdmin"", superAdmin);\n\t\t\t// the maximum time to timeout the session is 5 hours\n\t\t\tsession.setMaxInactiveInterval(5 * 60 * 60);\n\t\t\t// show login user in page Admin\n\t\t\tsession.setAttribute(""fullName"", userAdmin.getRealName());\n\t\t\t// show full name user in logoutPop.jsp\n\t\t\tsession.setAttribute(""login"", userAdmin.getLogin());\n\t\t\t// get action All\n\t\t\tUsersPrivilegesDTO userP=new UsersPrivilegesDTO();\n\t\t\tuserP.setActionCode(1L);\n\t\t\tuserP.setActive(true);\n\t\t\tuserP.setUserId(userSession.getId());\n\t\t\tUsersPrivilegesDTO userPrivileges=usersPrivilegesService.getPrivilegesByUser(userP);\n\t\t\tsession.setAttribute(""userPrivileges"", userPrivileges);\n\t\t\t//get UserPrivileges of shipped_To_Invoiced Action\n\t\t\tuserP.setActionCode(2L);\n\t\t\tuserP.setActive(true);\n\t\t\tuserP.setUserId(userSession.getId());\n\t\t\tUsersPrivilegesDTO  usersPrivShippedToInvoiced=usersPrivilegesService.getPrivilegesByUser(userP);\n\t\t\tsession.setAttribute(""usersPrivShippedToInvoiced"", usersPrivShippedToInvoiced);\n\t\t\t//get UserPrivileges of change_shipped_status Action\n\t\t\tuserP.setActionCode(3L);\n\t\t\tuserP.setActive(true);\n\t\t\tuserP.setUserId(userSession.getId());\n\t\t\tUsersPrivilegesDTO  usersPrivChangeShippedStatus=usersPrivilegesService.getPrivilegesByUser(userP);\n\t\t\tsession.setAttribute(""usersPrivChangeShippedStatus"", usersPrivChangeShippedStatus);\n\t\t}\n\t\tsession.setAttribute(""redirect"", redirect);\n\t    return ""none""; //getRedirectResult();//""none"";\n\t\t\n\t}\n\t\n}\n\n----------------------------------- SOURCE END -------------------------------------",1392751026607
error,log,,,"Problems occurred when invoking code from plug-in: ""org.eclipse.jdt.ui"".",1392751026607
error,log,,,"Error in JDT Core during reconcile",1392751026607
error,log,,,"Exception occurred during problem detection:\n----------------------------------- SOURCE BEGIN -------------------------------------\npackage com.loyauty.web.struts.action.orders;\n\nimport java.io.File;\nimport java.text.SimpleDateFormat;\nimport java.util.ArrayList;\nimport java.util.Date;\nimport java.util.Hashtable;\nimport java.util.List;\nimport javax.servlet.http.HttpSession;\nimport lombok.Getter;\nimport lombok.Setter;\nimport com.loyauty.exception.ServiceLocatorException;\nimport com.loyauty.model.OrdersRows;\nimport com.loyauty.model.User;\nimport com.loyauty.service.core.DTOFactory;\nimport com.loyauty.service.core.dto.BasicUserDTO;\nimport com.loyauty.service.core.dto.CityDTO;\nimport com.loyauty.service.core.dto.OrdersDTO;\nimport com.loyauty.service.core.dto.ProvinceDTO;\nimport com.loyauty.service.core.dto.UserDTO;\nimport com.loyauty.service.core.dto.UserProductPriceDTO;\nimport com.loyauty.service.core.dto.UserSessionDTO;\nimport com.loyauty.service.orders.OrdersService;\nimport com.loyauty.service.product.ProductService;\nimport com.loyauty.service.user.UserService;\nimport com.loyauty.web.struts.action.LoyautyAction;\n\n\npublic class CreateOrdersManual extends LoyautyAction {\n\tprivate static final long serialVersionUID = -1238269595572206024L;\n\n\tprivate UserService userService;\n\tprivate ProductService productService;\n\tprivate OrdersService orderService;\n\t@Getter @Setter\n\tprivate String userLogin;\n\t@Getter @Setter\n\tprivate Long userId;\n\t@Getter @Setter\n\tprivate List<User> usersList;\n\tprivate static int USER_TYPE = 2;\n\t@Getter @Setter\n\tprivate File orderFile;\n\t@Getter @Setter\n\tList<OrdersDTO>listOrdersDTO;\n\tHashtable<String, OrdersDTO>hashOrders;\n\t@Getter @Setter\n\tprivate String orderSelected;\n\t@Getter @Setter\n\tprivate Long saveOrdersSignal;\n\t@Getter @Setter\n\tprivate Long confirmSaveOrdersSignal;\n\t@Getter @Setter\n\tprivate String lsOrderId;\n\t@Getter @Setter\n\tprivate String message;\n\t@Getter @Setter\n\tInteger indexOrder;\n\t@Getter @Setter\n\tInteger indexRow;\n\t@Getter @Setter\n\tprivate Long checkBoxPrintSignal;\n\t@Getter @Setter\n\tprivate Boolean checkBoxPrintEtem;\n\t@Getter @Setter\n\tprivate Boolean checkBoxPrint;\n\t@Getter @Setter\n\tprivate Long pageTop=0L;\n\t@Getter @Setter\n\tprivate Long saved;\n\t@Getter @Setter\n\tprivate String showNotificationPop=""visibility:hidden;display:none;"";\n\t@Getter @Setter\n\tprivate Long addOrderSignal;\n\t@Getter @Setter\n\tprivate Long addSimilarOrderSignal;\n\t@Getter @Setter\n\tprivate Long deleteOrderSignal;\n\t@Getter @Setter\n\tprivate Long deleteRowSignal;\n\t@Getter @Setter\n\tprivate Long userLoginChangedSignal;\n\t@Getter @Setter\n\tprivate Long saveTemporarySignal;\n\t@Getter @Setter\n\tprivate Long addSimilarRowSignal;\n\t@Getter @Setter\n\tprivate Long saveTemporaryRowSignal;\n\t@Getter @Setter\n\tprivate Long checkProductPriceSignal;\n\t@Getter @Setter\n\tprivate Long userIdFindedSignal;\n\t@Getter @Setter\n\tprivate String userLogo;\n\t//recovery Data Order\n\t@Getter @Setter\n\tprivate String clientLastName;\n\t@Getter @Setter\n\tprivate String clientFirstName;\n\t@Getter @Setter\n\tprivate String clientOtherNames;\n\t@Getter @Setter\n\tprivate String clientStreet;\n\t@Getter @Setter\n\tprivate String  clientOtherStreet;\n\t@Getter @Setter\n\tprivate String  clientCity;\n\t@Getter @Setter\n\tprivate String  clientProvince;\n\t@Getter @Setter\n\tprivate String  clientPostalCode;\n\t@Getter @Setter\n\tprivate String  clientPhone;\n\t@Getter @Setter\n\tprivate String  clientEmail;\n\t@Getter @Setter\n\tprivate String productOrderNumber;\n\t@Getter @Setter\n\tprivate String strProductOrderDate;\n\t@Getter @Setter\n\tprivate String strRequiredDate;\n\t\n\t//recovery data row\n\t@Getter @Setter\n\tprivate Double quantity ;\n\t@Getter @Setter\n\tprivate String lsProductID;\n\t@Getter @Setter\n\tprivate Double stock;\n\t@Getter @Setter\n\tprivate String productDescription;\n\t@Getter @Setter\n\tprivate Double unitPrice;\n\t@Getter @Setter\n\tprivate Double shippingFee;\n\t@Getter @Setter\n\tprivate String shippingCompany;\n\t@Getter @Setter\n\tprivate String trackingNumber;\n\t@Getter @Setter\n\tprivate String strCreationOrderDate;\n\t@Getter @Setter\n\tprivate Date creationOrderDate; \n\t@Getter @Setter\n\tprivate String showSaveSuccessPop=""visibility:hidden;display:none;"";\n\t//showSaveSuccessPop=""display:block;visibility:visible;"";\n\t//showSaveSuccessPop=""visibility:hidden;display:none;"";\n\t@Getter @Setter\n\tprivate Long okSaveSuccessPopSignal;\n\t@Getter @Setter\n\tprivate Long requirdFieldError;\n\t@Getter @Setter\n\tprivate Long newLsOrderIdSignal;\n\t@Getter @Setter\n\tprivate List<ProvinceDTO>listProvinces;\n\t@Getter @Setter \n\tprivate String  code;\n\t//@Getter @Setter\n\t//private List<CityDTO>listCities;\n\tprivate Hashtable<String, ProvinceDTO>hashProvinces;\n\t//private Hashtable<String, CityDTO>hashCities;\n\t//@Getter @Setter\n\t//private Long provinceChangedSignal;\n\tprivate Date today ;\n\t\n\tpublic  CreateOrdersManual() throws ServiceLocatorException {\n\t\tsuper();\t\n\t\tproductService = getServiceLocator().getProductService();   \n\t\tuserService = getServiceLocator().getUserService();\n\t\torderService = getServiceLocator().getOrderService();\n\t\thashOrders=new Hashtable<String, OrdersDTO>();\n\t\t//listProvinces=new ArrayList<ProvinceDTO>();\n\t\ttoday=new Date();\n\t}\n\n\t/*=========================================================================================\n\t \t\t\t\t\t\t\t\t\t\t\tmethod execute\n\t  =========================================================================================*/\n\t@SuppressWarnings({ ""rawtypes"", ""unchecked"", ""unused"" })\n\t@Override\n\tpublic String execute() throws Exception {\n\t\tHttpSession session = request.getSession(true);\n\t\tOrdersDTO orderDTOToAdd;\n\t\tuserLogo=(String)session.getAttribute(""userLogo"");\n\t\trequirdFieldError=(Long)session.getAttribute(""requirdFieldError"");\n\t\tSimpleDateFormat frm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\tSimpleDateFormat frmForLsOrderId = new SimpleDateFormat(""yyyyMMdd"");\n\t\tOrdersDTO orderDTOToUpdate;\n\t\tString initalClient="""";\n\t\ttry {\n\t\t\t//recovery provinces\n\t\t\tlistProvinces=(List<ProvinceDTO>)session.getAttribute(""listProvinces"");\n\t\t\tif(listProvinces==null){\n\t\t\t\tlistProvinces=productService.getAllProvinces();\n\t\t\t\tsession.setAttribute(""listProvinces"",listProvinces);\n\t\t\t}\n\t\t\tif (((strCreationOrderDate)!=null)&&(!"""".equals(strCreationOrderDate))){\n\t\t\t\ttry {\n\t\t\t\t\tcreationOrderDate = frm.parse(strCreationOrderDate);\n\t\t\t\t}\n\t\t\t\tcatch (Exception pe) {\n\t\t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t\t\t\t}\n\t\t\t}\n\t\t\t/*-------------------- recovery users list -----------------------------------\n\t\t\t\t\t\t\tRecovery users list in session\n\t\t\t -----------------------------------------------------------------------------*/\n\t\t\tBasicUserDTO basicUserDTO = new BasicUserDTO();\n\t\t\tbasicUserDTO.setTypeId(USER_TYPE);\n\t\t\tList<User> usersListSession=(List<User>)session.getAttribute(""usersListSession"");\n\t\t\tif(usersListSession==null){\n\t\t\t\tList<UserSessionDTO> listAllUsers= userService.getAllUsers(basicUserDTO);\n\t\t\t\tusersList=new ArrayList<User>();\n\t\t\t\tfor(UserSessionDTO userDTO:listAllUsers){\n\t\t\t\t\tUser user=new User();\n\t\t\t\t\tuser.setId(userDTO.getId());\n\t\t\t\t\tuser.setLogin(userDTO.getLogin());\n\t\t\t\t\tusersList.add(user);\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""usersListSession"",usersList);\n\t\t\t}else usersList=usersListSession;\n\n\n\t\t\t/*-------------------- recovery orders list ------------------------------------\n\t\t\t\t\t\tdisplaying at least one item in the orders list if it is empty\n\t\t\t  -----------------------------------------------------------------------------*/\n\t\t\t\n\t\t\tif(userIdFindedSignal==null || userIdFindedSignal==0L){\n\t\t\t\tuserId=(Long)session.getAttribute(""userId"");\n\t\t\t\tif(userId!=null){\n\t\t\t\t\tUserDTO userFind=userService.getUserInformation(userId);\n\t\t\t\t\tuserLogin=userFind.getLogin();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tlistOrdersDTO=(List<OrdersDTO>)session.getAttribute(""listOrdersDTOMan"");\n\t\t\tif(listOrdersDTO==null)listOrdersDTO =new ArrayList<OrdersDTO>();\n\t\t\tif(listOrdersDTO.size()==0){\n\t\t\t\t//String lsOrderIdFirstPart=""Man""+frm.format(today);\n\t\t\t\tif(userLogin!=null && userLogin.length()>=2){\n\t\t\t\t\tinitalClient=userLogin.substring(0, 2);\n\t\t\t\t\tinitalClient=initalClient.toUpperCase();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tString lsOrderIdFirstPart=initalClient+""M""+frmForLsOrderId.format(today);\n\t\t\t\tString manLsOrderId=orderService.generateManLsOrderId(lsOrderIdFirstPart);\n\t\t\t\tOrdersDTO orderDTO=new OrdersDTO();\n\t\t\t\torderDTO.setLsOrderId(manLsOrderId);\n\t\t\t\torderDTO.setCssStyle(""background-color: color:white;border-right:1px solid #CCCCCC;border-left:1px solid #CCCCCC;border-top:1px solid #CCCCCC;"");\n\t\t\t\tOrdersRows orderRow=new OrdersRows();\n\t\t\t\torderRow.setIcon(""images/orders/itemNotValidated.png"");\n\t\t\t\torderDTO.getRowsList().add(orderRow);\n\t\t\t\tlistOrdersDTO.add(orderDTO);\n\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t}else{\n\t\t\t\tif(userLogin!=null && userLogin.length()>=2){\n\t\t\t\t\tinitalClient=userLogin.substring(0, 2);\n\t\t\t\t\tinitalClient=initalClient.toUpperCase();\n\t\t\t\t}\n\t\t\t\tString lsOrderIdFirstPart=initalClient+""M""+frmForLsOrderId.format(today);\n\t\t\t\tString manLsOrderId=orderService.generateManLsOrderId(lsOrderIdFirstPart);\n\t\t\t\tOrdersDTO ordDTO=listOrdersDTO.get(0);\n\t\t\t\tordDTO.setLsOrderId(manLsOrderId);\n\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\t\n\t\t\t}\n\n\t\t\t/*----------------- When Admin change province -----------------------------------------\n\t\t\t\t\t\t\t\tCheck a list off this province\n\t\t\t ---------------------------------------------------------------------------------------*/\n\t\t\t//if(provinceChangedSignal!=null && provinceChangedSignal!=0L){\n\t\t\t\thashProvinces=(Hashtable<String, ProvinceDTO>)session.getAttribute(""hashProvinces"");\n\t\t\t\tif(code!=null && !code.equals("""")){\n\t\t\t\t\tProvinceDTO provinceDTO=hashProvinces.get(code);\n\t\t\t\t\tif(provinceDTO!=null){\n\t\t\t\t\t\tclientProvince=provinceDTO.getCode();\n\t\t\t\t\t\t//listCities=provinceDTO.getListCities();\n\t\t\t\t\t}\n\t\t\t\t}//else listCities=new ArrayList<CityDTO>();\n\t\t\t\torderDTOToUpdate=listOrdersDTO.get(0);\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\torderDTOToUpdate.setClientCity(clientCity);\n\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\t//return SUCCESS;\n\t\t\t//}\n\n\t\t\t/*-------------------- When Admin Find User Login ---------------------------\n\t\t\t\t\t\tchange all value of userid list of orders\n\t\t\t -----------------------------------------------------------------------------*/\n\t\t\tif(userIdFindedSignal!=null && userIdFindedSignal!=0L){\n\t\t\t\tUser user=userService.getUserByLogin(userLogin);\n\t\t\t\tOrdersDTO orderDTO=listOrdersDTO.get(0);\n\t\t\t\torderDTO=fillDataOrderDTO(orderDTO);\n\t\t\t\tuserLogo=null;\n\t\t\t\tuserId=null;\n\t\t\t\tif(user!=null){\n\t\t\t\t\torderDTO.setUserId(user.getId());\n\t\t\t\t\tuserId=user.getId();\n\t\t\t\t\tfor(OrdersDTO ord:listOrdersDTO){\n\t\t\t\t\t\tord.setUserId(user.getId());\n\t\t\t\t\t\tord.setUserLogin(userLogin);\n\t\t\t\t\t}\n\t    \t\t\t//show user logo\n\t    \t\t\tuserLogo=""./images/orders/usersLogos/""+userLogin+"".png"";\n\t\t\t\t}else userLogin=null;\n\n\t\t\t\tString filePath = session.getServletContext().getRealPath(""/"");\n\t\t\t\tString LogoDestination = filePath + ""images/orders/usersLogos/""+userLogin+"".png"";\n\t\t\t\tFile f=new File(LogoDestination);\n\t\t\t\tif(!f.exists())userId=null;\n    \t\t\tsession.setAttribute(""userLogo"",userLogo);\n\t\t\t\tsession.setAttribute(""userId"",userId);\n\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\t\t\tif(userId==null)userLogin="""";\n\n\t\t\t/*----------------- When Admin change province -----------------------------------------\n\t\t\t\t\t\t\t\tCheck a list off this province\n\t\t\t ---------------------------------------------------------------------------------------*/\n\t\t\t/*if(provinceChangedSignal!=null && provinceChangedSignal!=0L){\n\t\t\t\thashProvinces=(Hashtable<String, ProvinceDTO>)session.getAttribute(""hashProvinces"");\n\t\t\t\tif(code!=null){\n\t\t\t\t\tlistCities=hashProvinces.get(code).getListCities();\n\t\t\t\t}else listCities=new ArrayList<CityDTO>();\n\t\t\t\torderDTOToUpdate=listOrdersDTO.get(0);\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\t//orderDTOToUpdate.setClientCity(clientCity)\n\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\t//return SUCCESS;\n\t\t\t//}*/\n\t\t\t\n\t\t\t/*----------------- When Admin check on Add Similar order Icon or save Temporary -------\n\t\t\t\t\t\t\t\t\tCreate a copy of order selected\n\t\t\t ---------------------------------------------------------------------------------------*/\n\t\t\tif(((addSimilarOrderSignal!=null && addSimilarOrderSignal!=0L)||(saveTemporarySignal!=null && saveTemporarySignal!=0L)) && indexOrder>=0){\n\t\t\t\torderDTOToAdd=listOrdersDTO.get(indexOrder);\n\t\t\t\tif(orderDTOToAdd==null)orderDTOToAdd=new OrdersDTO();\n\t\t\t\tif((saveTemporarySignal!=null && saveTemporarySignal!=0L))orderDTOToAdd.setLsOrderId(lsOrderId);\n\t\t\t\torderDTOToAdd.setCreationDate(creationOrderDate); \n\t\t\t\torderDTOToAdd.setClientLastName(clientLastName);\n\t\t\t\torderDTOToAdd.setClientFirstName(clientFirstName);\n\t\t\t\torderDTOToAdd.setClientOtherNames(clientOtherNames); \n\t\t\t\torderDTOToAdd.setClientStreet(clientStreet);\n\t\t\t\torderDTOToAdd.setClientOtherStreet(clientOtherStreet);\n\t\t\t\torderDTOToAdd.setClientCity(clientCity);\n\t\t\t\torderDTOToAdd.setClientProvince(clientProvince);\n\t\t\t\torderDTOToAdd.setClientProvince(clientProvince);\n\t\t\t\torderDTOToAdd.setClientPostalCode(clientPostalCode);\n\t\t\t\torderDTOToAdd.setClientPhone(clientPhone);\n\t\t\t\torderDTOToAdd.setClientEmail(clientEmail);\t\t\t\n\t\t\t\torderDTOToAdd.setProductOrderNumber(productOrderNumber);\n\t\t\t\tif (((strProductOrderDate)!=null)&&(!"""".equals(strProductOrderDate))){\n\t    \t\t\tSimpleDateFormat sdf = new SimpleDateFormat(""dd/MM/yyyy"");\n\t    \t\t\ttry {\n\t    \t\t\t\tDate date = sdf.parse(strProductOrderDate);\n\t    \t\t\t\torderDTOToAdd.setProductOrderDate(date);\n\t    \t\t\t}\n\t    \t\t\tcatch (Exception pe) {\n\t    \t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t    \t\t\t}\n\t    \t\t}\n\t\t\t\tif (((strRequiredDate)!=null)&&(!"""".equals(strRequiredDate))){\n\t    \t\t\tSimpleDateFormat sdf = new SimpleDateFormat(""dd/MM/yyyy"");\n\t    \t\t\ttry {\n\t    \t\t\t\tDate date = sdf.parse(strRequiredDate);\n\t    \t\t\t\torderDTOToAdd.setRequiredDate(date);\n\t    \t\t\t}\n\t    \t\t\tcatch (Exception pe) {\n\t    \t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t    \t\t\t}\n\t    \t\t}\n\t\t\t\tUser user=userService.getUserByLogin(userLogin);\n\t\t\t\tif(user!=null){\n\t\t\t\t\tUserDTO userDTO=userService.getUserInformation(user.getId());\n\t\t\t\t\torderDTOToAdd.setUserLogin(userLogin);\n\t\t\t\t\torderDTOToAdd.setUserId(userDTO.getId());\n\t\t\t\t}\n\t\t\t\tif(addSimilarOrderSignal!=null && addSimilarOrderSignal!=0L){ \n\t\t\t\t\tOrdersDTO orderDTOClone = DTOFactory.getOrderDTOClone(orderDTOToAdd);\n\t\t\t\t\torderDTOClone.setCssStyle(""background-color:white;border-right: 1px solid #CCCCCC;border-left:1px solid #CCCCCC;border-top:  1px solid #CCCCCC;"");\n\t\t\t\t\tlistOrdersDTO.add(orderDTOClone);\n\t\t\t\t}\n\t\t\t\tint indexOrder=0;\n\t\t\t\tfor(OrdersDTO orderDTO:listOrdersDTO){\n\t\t\t\t\torderDTO.setIndex(indexOrder);\n\t\t\t\t\tindexOrder++;\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\t\t\t\n\t\t\t/*----------------- When Admin click on saveTemporaryRow Icon --------------------------\n\t\t\t\t\twe must first obtained the object that contains the list of rows,\n\t\t\t\t\tafter we accede to the row by index recovered by web view and change it\n\t\t\t ---------------------------------------------------------------------------------------*/\n\t\t\tif(saveTemporaryRowSignal!=null && saveTemporaryRowSignal!=0L){\n\t\t\t\t\n\t\t\t\torderDTOToUpdate=listOrdersDTO.get(0);\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\t/*\n\t\t\t\torderDTOToUpdate.setProductOrderNumber(productOrderNumber);\n\t\t\t\torderDTOToUpdate.setCreationDate(creationOrderDate);\n\t\t\t\torderDTOToUpdate.setClientLastName(clientLastName);\n\t\t\t\torderDTOToUpdate.setClientFirstName(clientFirstName);\n\t\t\t\torderDTOToUpdate.setClientOtherNames(clientOtherNames); \n\t\t\t\torderDTOToUpdate.setClientStreet(clientStreet);\n\t\t\t\torderDTOToUpdate.setClientOtherStreet(clientOtherStreet);\n\t\t\t\torderDTOToUpdate.setClientCity(clientCity);\n\t\t\t\torderDTOToUpdate.setClientProvince(clientProvince);\n\t\t\t\torderDTOToUpdate.setClientProvince(clientProvince);\n\t\t\t\torderDTOToUpdate.setClientPostalCode(clientPostalCode);\n\t\t\t\torderDTOToUpdate.setClientPhone(clientPhone);\n\t\t\t\torderDTOToUpdate.setClientEmail(clientEmail);\t\t\t\n\t\t\t\torderDTOToUpdate.setProductOrderNumber(productOrderNumber);\n\n\t\t\t\tif (((strProductOrderDate)!=null)&&(!"""".equals(strProductOrderDate))){\n\t    \t\t\tSimpleDateFormat sdf = new SimpleDateFormat(""dd/MM/yyyy"");\n\t    \t\t\ttry {\n\t    \t\t\t\tDate date = sdf.parse(strProductOrderDate);\n\t    \t\t\t\torderDTOToUpdate.setProductOrderDate(date);\n\t    \t\t\t}\n\t    \t\t\tcatch (Exception pe) {\n\t    \t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t    \t\t\t}\n\t    \t\t}\n\t\t\t\tif (((strRequiredDate)!=null)&&(!"""".equals(strRequiredDate))){\n\t    \t\t\tSimpleDateFormat sdf = new SimpleDateFormat(""dd/MM/yyyy"");\n\t    \t\t\ttry {\n\t    \t\t\t\tDate date = sdf.parse(strRequiredDate);\n\t    \t\t\t\torderDTOToUpdate.setRequiredDate(date);\n\t    \t\t\t}\n\t    \t\t\tcatch (Exception pe) {\n\t    \t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t    \t\t\t}\n\t    \t\t}\n\t\t\t\t*/\n\t\t\t\tOrdersRows orderRowToSaveMemory=orderDTOToUpdate.getRowsList().get(indexRow);\n\t\t\t\torderRowToSaveMemory.setIcon(""images/orders/itemValidated.png"");\n\t\t\t\tif(orderRowToSaveMemory!=null){\n\t\t\t\t\torderRowToSaveMemory.setQuantity(quantity); \n\t\t\t\t\torderRowToSaveMemory.setLsProductID(lsProductID);\n\t\t\t\t\torderRowToSaveMemory.setProductDescription(productDescription);\n\t\t\t\t\torderRowToSaveMemory.setUnitPrice(unitPrice);\n\t\t\t\t\torderRowToSaveMemory.setCssPrice(""background-color:red;"");\n\t\t\t\t\tif(unitPrice!=null && orderRowToSaveMemory.getLsPrice()!=null\n\t\t\t\t\t  && unitPrice>=orderRowToSaveMemory.getLsPrice())\n\t\t\t\t\t  orderRowToSaveMemory.setCssPrice("""");\n\t\t\t\t\torderRowToSaveMemory.setShippingFee(shippingFee);\n\t\t\t\t\torderRowToSaveMemory.setShippingPrice(shippingFee);\n\t\t\t\t\torderRowToSaveMemory.setShippingCompany(shippingCompany);\n\t\t\t\t\torderRowToSaveMemory.setTrackingNumber(trackingNumber);\t\n\t\t\t\t\tint indexOrder=0;\n\t\t\t\t\tint indexRow=0;\n\t\t\t\t\tfor(OrdersDTO orderDTO:listOrdersDTO){\n\t\t\t\t\t\torderDTO.setIndex(indexOrder);\n\t\t\t\t\t\tindexOrder++;\n\t\t\t\t\t\tindexRow=0;\n\t\t\t\t\t\tfor(OrdersRows orderRows:orderDTO.getRowsList()){\n\t\t\t\t\t\t\torderRows.setIndex(indexRow);\n\t\t\t\t\t\t\tindexRow++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\t\tlistOrdersDTO=(List<OrdersDTO>)session.getAttribute(""listOrdersDTOMan"");\n\t\t\t\t}\n\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\t\t\t\n\t\t\t/*-------------------- When Admin click on addSimilarRow Icon -----------------\n\t\t\t\t\t\t\t\t\t\tAdd one Row Similar at the previews\n\t\t\t  -----------------------------------------------------------------------------*/\n\t\t\tif(addSimilarRowSignal!=null && addSimilarRowSignal!=0L){\n\t\t\t\torderDTOToUpdate=listOrdersDTO.get(indexOrder);\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\tOrdersRows orderRowToClone=orderDTOToUpdate.getRowsList().get(indexRow);\n\t\t\t\tif(orderRowToClone!=null){\n\t\t\t\t\tif(!orderRowToClone.getIcon().equals(""images/orders/itemValidated.png"")){\n\t\t\t\t\t\torderRowToClone.setQuantity(quantity); \n\t\t\t\t\t\torderRowToClone.setLsProductID(lsProductID);\n\t\t\t\t\t\torderRowToClone.setStock(stock);\n\t\t\t\t\t\torderRowToClone.setProductDescription(productDescription);\n\t\t\t\t\t\torderRowToClone.setUnitPrice(unitPrice);\n\t\t\t\t\t\torderRowToClone.setShippingFee(shippingFee);\n\t\t\t\t\t\torderRowToClone.setShippingPrice(shippingFee);\n\t\t\t\t\t\torderRowToClone.setShippingCompany(shippingCompany);\n\t\t\t\t\t\torderRowToClone.setTrackingNumber(trackingNumber);\n\t\t\t\t\t}\n\t\t\t\t\torderRowToClone.setIcon(""images/orders/itemValidated.png"");\n\t\t\t\t\tOrdersRows orderRowToAdd=DTOFactory.getOrderRowClone(orderRowToClone);\n\t\t\t\t\torderDTOToUpdate.getRowsList().add(indexRow+1,orderRowToAdd);\n\t\t\t\t\tint indexOrder=0;\n\t\t\t\t\tint indexRow=0;\n\t\t\t\t\tfor(OrdersDTO orderDTO:listOrdersDTO){\n\t\t\t\t\t\torderDTO.setIndex(indexOrder);\n\t\t\t\t\t\tindexOrder++;\n\t\t\t\t\t\tindexRow=0;\n\t\t\t\t\t\tfor(OrdersRows orderRows:orderDTO.getRowsList()){\n\t\t\t\t\t\t\torderRows.setIndex(indexRow);\n\t\t\t\t\t\t\tindexRow++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\t\tlistOrdersDTO=(List<OrdersDTO>)session.getAttribute(""listOrdersDTOMan"");\n\t\t\t\t}\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*-------------------- When Admin click on Delete order Icon -------------\n\t\t\t\t\t\t\t\t\tDelete this order using index\n\t\t\t -----------------------------------------------------------------------------*/\n\t\t\t\n\t\t\tif(deleteOrderSignal!=null && deleteOrderSignal!=0L){\n\t\t\t\torderDTOToUpdate=listOrdersDTO.get(indexOrder);\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\tList<OrdersDTO> listOrdersDTOAfterDelete=new ArrayList<OrdersDTO>();\n\t\t\t\tfor(int i=0 ;i<listOrdersDTO.size();i++){\n\t\t\t\t\tif(i!=indexOrder || indexOrder==0)listOrdersDTOAfterDelete.add(listOrdersDTO.get(i));\n\t\t\t\t}\n\t\t\t\tint index=0;\n\t\t\t\tfor(int i=0 ;i<listOrdersDTOAfterDelete.size();i++){\n\t\t\t\t\tlistOrdersDTOAfterDelete.get(i).setIndex(index);\n\t\t\t\t\tindex++;\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTOAfterDelete);\n\t\t\t\tlistOrdersDTO=listOrdersDTOAfterDelete;\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*-------------------- When Admin check on Delete Row Icon -------------------\n\t\t\t\t\t\t\t\t\tDelete this row using index\n\t\t\t -----------------------------------------------------------------------------*/\n\t\t\tif(deleteRowSignal!=null && deleteRowSignal!=0L){\n\t\t\t\tArrayList<OrdersRows>listRowsAfterDelete=new ArrayList<OrdersRows>();\n\t\t\t\tOrdersDTO orderDTO=listOrdersDTO.get(indexOrder);\n\t\t\t\torderDTO=fillDataOrderDTO(orderDTO);\n\t\t\t\tif(orderDTO!=null && orderDTO.getRowsList().size()>1){\n\t\t\t\t\tfor(int i=0 ;i<orderDTO.getRowsList().size();i++){\n\t\t\t\t\t\tif(i!=indexRow)listRowsAfterDelete.add(orderDTO.getRowsList().get(i));\n\t\t\t\t\t}\n\t\t\t\t\tint index=0;\n\t\t\t\t\tfor(int i=0 ;i<listRowsAfterDelete.size();i++){\n\t\t\t\t\t\tlistRowsAfterDelete.get(i).setIndex(index);\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t}\n\t\t\t\t\torderDTO.setRowsList(listRowsAfterDelete);\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\t\t\t\n\n\t\t\t/*-------------------- When Admin check left lsProduct TextField -------------\n\t\t\t\t\t\t\t\tcheck userPrice in DB, and write it in web view\n\t\t\t -----------------------------------------------------------------------------*/\n\t\t\tif(checkProductPriceSignal!=null && checkProductPriceSignal!=0L){\n\t\t\t\torderDTOToUpdate=listOrdersDTO.get(indexOrder);\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\t/*\n\t\t\t\torderDTOToUpdate.setClientLastName(clientLastName);\n\t\t\t\torderDTOToUpdate.setClientFirstName(clientFirstName);\n\t\t\t\torderDTOToUpdate.setClientOtherNames(clientOtherNames); \n\t\t\t\torderDTOToUpdate.setClientStreet(clientStreet);\n\t\t\t\torderDTOToUpdate.setClientOtherStreet(clientOtherStreet);\n\t\t\t\torderDTOToUpdate.setClientCity(clientCity);\n\t\t\t\torderDTOToUpdate.setClientProvince(clientProvince);\n\t\t\t\torderDTOToUpdate.setClientProvince(clientProvince);\n\t\t\t\torderDTOToUpdate.setClientPostalCode(clientPostalCode);\n\t\t\t\torderDTOToUpdate.setClientPhone(clientPhone);\n\t\t\t\torderDTOToUpdate.setClientEmail(clientEmail);\t\t\t\n\t\t\t\torderDTOToUpdate.setProductOrderNumber(productOrderNumber);\n\t\t\t\tif (((strProductOrderDate)!=null)&&(!"""".equals(strProductOrderDate))){\n\t    \t\t\tSimpleDateFormat sdf = new SimpleDateFormat(""dd/MM/yyyy"");\n\t    \t\t\ttry {\n\t    \t\t\t\tDate date = sdf.parse(strProductOrderDate);\n\t    \t\t\t\torderDTOToUpdate.setProductOrderDate(date);\n\t    \t\t\t}\n\t    \t\t\tcatch (Exception pe) {\n\t    \t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t    \t\t\t}\n\t    \t\t}\n\t\t\t\tif (((strRequiredDate)!=null)&&(!"""".equals(strRequiredDate))){\n\t    \t\t\tSimpleDateFormat sdf = new SimpleDateFormat(""dd/MM/yyyy"");\n\t    \t\t\ttry {\n\t    \t\t\t\tDate date = sdf.parse(strRequiredDate);\n\t    \t\t\t\torderDTOToUpdate.setRequiredDate(date);\n\t    \t\t\t}\n\t    \t\t\tcatch (Exception pe) {\n\t    \t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t    \t\t\t}\n\t    \t\t}\n\t\t\t\t*/\n\t\t\t\tOrdersRows orderRowToUpadate=orderDTOToUpdate.getRowsList().get(indexRow);\n\t\t\t\tUserProductPriceDTO userProductPrice=productService.getUsrPPriceByLsproductId(userId, lsProductID);\n\t\t\t\torderRowToUpadate.setCss("""");\n\t\t\t\torderRowToUpadate.setCssPrice("""");\n\t\t\t\tif(userProductPrice==null){\n\t\t\t\t\tlsProductID=null;\n\t\t\t\t\torderRowToUpadate.setCss(""background-color:red;"");\n\t\t\t\t\taddActionError(getText(""loyauty.error.common.requiredLsProductOrder""));\n\t\t\t\t\torderRowToUpadate.setProductDescription(""""); \n\t\t\t\t\torderRowToUpadate.setStock(null);\n\t\t\t\t\torderRowToUpadate.setProductId(null);\n\t\t\t\t\torderRowToUpadate.setLsProductID(lsProductID);\n\t\t\t\t\torderRowToUpadate.setLsPrice(null);\n\t\t\t\t}else{\n\t\t\t\t\tDouble usrPrice=orderRowToUpadate.getUnitPrice();\n\t\t\t\t\tif(usrPrice==null)usrPrice=0D;\n\t\t\t\t\tif(usrPrice < userProductPrice.getPriceNum()){\n\t\t\t\t\t\torderRowToUpadate.setCssPrice(""background-color:red;"");\t\n\t\t\t\t\t}\n\t\t\t\t\torderRowToUpadate.setProductDescription(userProductPrice.getProductTitle());\n\t\t\t\t\torderRowToUpadate.setStock(userProductPrice.getStock());\n\t\t\t\t\torderRowToUpadate.setProductId(userProductPrice.getProductId());\n\t\t\t\t\torderRowToUpadate.setLsProductID(userProductPrice.getLsProductId());\n\t\t\t\t\torderRowToUpadate.setLsPrice(userProductPrice.getPriceNum());\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\tlistOrdersDTO=(List<OrdersDTO>)session.getAttribute(""listOrdersDTOMan"");\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\t\t\t\n\t\t\t/*-------------------------------- SAVE ORDERS -------------------------------\n\t\t\t\t\t\tsave in data bases just orders witch has print checked \n\t \t\t -----------------------------------------------------------------------------*/\n\t\t\tif(saveOrdersSignal!=null && saveOrdersSignal!=0L){\n\t\t\t\tlistOrdersDTO=\t(ArrayList<OrdersDTO>) session.getAttribute(""listOrdersDTOMan"");\n\t\t\t\tUser user=userService.getUserByLogin(userLogin);\n\t\t\t\tOrdersDTO order=listOrdersDTO.get(0);\n\t\t\t\torder.setManOrder(true);\n\t\t\t\torder=fillDataOrderDTO(order);\n\t\t\t\tif(user!=null)order.setUserId(user.getId());\n\t\t\t\tboolean productNotFond=false;\n\t\t\t\tfor(OrdersRows row:order.getRowsList()){\n\t\t\t\t\tif(row.getLsProductID()==null || row.getLsProductID().equals("""")){\n\t\t\t\t\t\tproductNotFond=true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\trequirdFieldError=null;\n\t\t\t\tsession.setAttribute(""requirdFieldError"",null);\n\t\t\t\tproductOrderNumber=order.getProductOrderNumber().replaceAll(""^ +| +$|( )+"", ""$1"");\n\t\t\t\tclientFirstName=order.getClientFirstName().replaceAll(""^ +| +$|( )+"", ""$1"");\n\t\t\t\tclientLastName=order.getClientLastName().replaceAll(""^ +| +$|( )+"", ""$1"");\n\t\t\t\tclientStreet=order.getClientStreet().replaceAll(""^ +| +$|( )+"", ""$1"");\n\t\t\t\tclientCity=order.getClientCity().replaceAll(""^ +| +$|( )+"", ""$1"");\n\t\t\t\tclientProvince=order.getClientProvince().replaceAll(""^ +| +$|( )+"", ""$1"");\n\t\t\t\tclientPostalCode=order.getClientPostalCode().replaceAll(""^ +| +$|( )+"", ""$1"");\n\t\t\t\t\n\t\t\t\torder.setProductOrderNumber(productOrderNumber);\n\t\t\t\torder.setClientFirstName(clientFirstName);\n\t\t\t\torder.setClientLastName(clientLastName);\n\t\t\t\torder.setClientStreet(clientStreet);\n\t\t\t\torder.setClientCity(clientCity);\n\t\t\t\torder.setClientProvince(clientProvince);\n\t\t\t\torder.setClientPostalCode(clientPostalCode);\n\t\t\t\t\n\t\t\t\tif(order.getProductOrderNumber()==null || order.getProductOrderNumber().equals("""")||\n\t\t\t\t\t\t   order.getLsOrderId()==null || order.getLsOrderId().equals("""") ||\n\t\t\t\t\t\t   order.getCreationDate()==null || productNotFond ||\n\t\t\t\t\t\t   order.getClientFirstName()==null || order.getClientFirstName().equals("""")||\n\t\t\t\t\t\t   order.getClientLastName()==null || order.getClientLastName().equals("""") ||\n\t\t\t\t\t\t   order.getClientStreet()==null || order.getClientStreet().equals("""") ||\n\t\t\t\t\t\t   order.getClientCity()==null || order.getClientCity().equals("""") || \n\t\t\t\t\t\t   order.getClientProvince()==null || order.getClientProvince().equals("""") ||\n\t\t\t\t\t\t   order.getClientPostalCode()==null || order.getClientPostalCode().equals("""")){\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\t\taddActionError(getText(""loyauty.error.common.requiredFieldOrders""));\n\t\t\t\t\trequirdFieldError=1L;\n\t\t\t\t\tsession.setAttribute(""requirdFieldError"",1L);\n\t\t\t\t\treturn SUCCESS;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfor(OrdersRows row:order.getRowsList()){\n\t\t\t\t\tif(row.getLsProductID()==null || row.getLsProductID().equals("""")||\n\t\t\t\t\t   row.getQuantity()==null || row.getQuantity()==0D){\n\t\t\t\t\t\trequirdFieldError=1L;\n\t\t\t\t\t   session.setAttribute(""requirdFieldError"",1L);\n\t\t\t\t\t   addActionError(getText(""loyauty.error.common.requiredFieldOrders""));\n\t\t\t\t\t   return SUCCESS;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlistOrdersDTO=orderService.insertListOrders(listOrdersDTO);\n\t\t\t\tlistOrdersDTO=new ArrayList<OrdersDTO>();\n\t\t\t\tif(listOrdersDTO.size()==0){\n\t\t\t\t\tfrm = new SimpleDateFormat(""yyyyMMdd"");\n\t\t\t\t\tif(userLogin!=null && userLogin.length()>=2){\n\t\t\t\t\t\tinitalClient=userLogin.substring(0, 2);\n\t\t\t\t\t\tinitalClient=initalClient.toUpperCase();\n\t\t\t\t\t}\n\t\t\t\t\t//String lsOrderIdFirstPart=""Man""+frm.format(today);\n\t\t\t\t\tString lsOrderIdFirstPart=initalClient+""M""+frmForLsOrderId.format(today);\n\t\t\t\t\tString manLsOrderId=orderService.generateManLsOrderId(lsOrderIdFirstPart);\n\t\t\t\t\tOrdersDTO orderDTO=new OrdersDTO();\n\t\t\t\t\t//recovery userId\n\t\t\t\t\tif(user!=null)orderDTO.setUserId(user.getId());\n\t\t\t\t\torderDTO.setLsOrderId(manLsOrderId);\n\t\t\t\t\torderDTO.setCssStyle(""background-color: color:white;border-right:1px solid #CCCCCC;border-left:1px solid #CCCCCC;border-top:1px solid #CCCCCC;"");\n\t\t\t\t\tOrdersRows orderRow=new OrdersRows();\n\t\t\t\t\torderRow.setIcon(""images/orders/itemNotValidated.png"");\n\t\t\t\t\torderDTO.getRowsList().add(orderRow);\n\t\t\t\t\tlistOrdersDTO.add(orderDTO);\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\t}\n\t\t\t\tmessage=""Saving has completed successfuly"";\n\t\t\t\tshowSaveSuccessPop=""display:block;visibility:visible;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*-------------------- When user check print item -----------------------------\n\t\t\t\t\tAdd or remove this element from the orders to print\n\t \t\t -----------------------------------------------------------------------------*/\n\t\t\tif(checkBoxPrintSignal!=null && checkBoxPrintSignal!=0L){\n\t\t\t\tlistOrdersDTO=\t(ArrayList<OrdersDTO>) session.getAttribute(""listOrdersDTOMan"");\n\t\t\t\tOrdersDTO orderDTOInList=listOrdersDTO.get(indexOrder);\n\t\t\t\torderDTOInList=fillDataOrderDTO(orderDTOInList);\n\t\t\t\torderDTOInList.setPrint(checkBoxPrint);\n\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\n\t\t\t/*-------------- When user click on the button OK of showSaveSuccessPop -------\n\t\t\t\t\t\tjust hide dialogue popup: showSaveSuccessPop\n\t \t\t ------------------------------------------------------------------------------*/\n\t\t\tif(okSaveSuccessPopSignal!=null && okSaveSuccessPopSignal!=0L){\n\t\t\t\tlistOrdersDTO=\t(ArrayList<OrdersDTO>) session.getAttribute(""listOrdersDTOMan"");\n\t\t\t\tshowSaveSuccessPop=""visibility:hidden;display:none;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\n\n\t\t\t/*-------------- When user click on the image imgNewLsOrderId -----------------\n\t\t\t\t\t\t\t\tgenerate other LsOrderId\n\t \t\t ------------------------------------------------------------------------------*/\n\t\t\tif(newLsOrderIdSignal!=null && newLsOrderIdSignal!=0L){\n\t\t\t\tlistOrdersDTO=\t(ArrayList<OrdersDTO>) session.getAttribute(""listOrdersDTOMan"");\n\t\t\t\tOrdersDTO orderDTO=listOrdersDTO.get(0);\n\t\t\t\tfrm = new SimpleDateFormat(""yyyyMMdd"");\n\t\t\t\tif(userLogin!=null && userLogin.length()>=2){\n\t\t\t\t\tinitalClient=userLogin.substring(0, 2);\n\t\t\t\t\tinitalClient=initalClient.toUpperCase();\n\t\t\t\t}\n\t\t\t\t//String lsOrderIdFirstPart=""Man""+frm.format(today);\n\t\t\t\tString lsOrderIdFirstPart=initalClient+""M""+frmForLsOrderId.format(today);\n\t\t\t\tString manLsOrderId=orderService.generateManLsOrderId(lsOrderIdFirstPart);\n\t\t\t\torderDTO.setLsOrderId(manLsOrderId);\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t} catch (Exception e) {\n\t\t\taddActionError(getText(""loyauty.error.common.userNotSelected""));\n\t\t\te.printStackTrace();\n\t\t\treturn ""input"";\n\t\t}\n\treturn SUCCESS;\n\t}\n\t\n\n\t   /*=========================================================================================\n\t\t\t\t\t\t\t\tfill all fields of order without rows\n\t\t =========================================================================================*/\n\t\tpublic OrdersDTO fillDataOrderDTO(OrdersDTO orderDTO){\n\t\t\tSimpleDateFormat frm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\t//orderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\torderDTO.setClientLastName(clientLastName);\n\t\t\torderDTO.setClientFirstName(clientFirstName);\n\t\t\torderDTO.setClientOtherNames(clientOtherNames); \n\t\t\torderDTO.setClientStreet(clientStreet);\n\t\t\torderDTO.setClientOtherStreet(clientOtherStreet);\n\t\t\torderDTO.setClientCity(clientCity);\n\t\t\torderDTO.setClientProvince(clientProvince);\n\t\t\torderDTO.setClientProvince(clientProvince);\n\t\t\torderDTO.setClientPostalCode(clientPostalCode);\n\t\t\torderDTO.setClientPhone(clientPhone);\n\t\t\torderDTO.setClientEmail(clientEmail);\t\t\t\n\t\t\torderDTO.setProductOrderNumber(productOrderNumber);\n\t\t\t\n\t\t\t\n\t\t\tif (((strProductOrderDate)!=null)&&(!"""".equals(strProductOrderDate))){\n\t\t\t\tfrm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\t\ttry {\n\t\t\t\t\tDate date = frm.parse(strProductOrderDate);\n\t\t\t\t\torderDTO.setProductOrderDate(date);\n\t\t\t\t}\n\t\t\t\tcatch (Exception pe) {\n\t\t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (((strCreationOrderDate)!=null)&&(!"""".equals(strCreationOrderDate))){\n\t\t\t\tfrm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\t\ttry {\n\t\t\t\t\tDate date = frm.parse(strCreationOrderDate);\n\t\t\t\t\torderDTO.setCreationDate(date);\n\t\t\t\t}\n\t\t\t\tcatch (Exception pe) {\n\t\t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (((strRequiredDate)!=null)&&(!"""".equals(strRequiredDate))){\n\t\t\t\tfrm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\t\ttry {\n\t\t\t\t\tDate date = frm.parse(strRequiredDate);\n\t\t\t\t\torderDTO.setRequiredDate(date);\n\t\t\t\t}\n\t\t\t\tcatch (Exception pe) {\n\t\t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn orderDTO;\n\t\t}\n\n\t\n}\n\n----------------------------------- SOURCE END -------------------------------------",1392751026622
error,log,,,"Problems occurred when invoking code from plug-in: ""org.eclipse.jdt.ui"".",1392751026622
error,log,,,"Error in JDT Core during reconcile",1392751026622
error,log,,,"Exception occurred during problem detection:\n----------------------------------- SOURCE BEGIN -------------------------------------\npackage com.loyauty.web.struts.action.orders;\n\nimport java.io.File;\nimport java.text.SimpleDateFormat;\nimport java.util.ArrayList;\nimport java.util.Date;\nimport java.util.Hashtable;\nimport java.util.List;\nimport javax.servlet.http.HttpSession;\nimport lombok.Getter;\nimport lombok.Setter;\nimport com.loyauty.exception.ServiceLocatorException;\nimport com.loyauty.model.OrdersRows;\nimport com.loyauty.model.User;\nimport com.loyauty.service.core.DTOFactory;\nimport com.loyauty.service.core.dto.BasicUserDTO;\nimport com.loyauty.service.core.dto.CityDTO;\nimport com.loyauty.service.core.dto.OrdersDTO;\nimport com.loyauty.service.core.dto.ProvinceDTO;\nimport com.loyauty.service.core.dto.UserDTO;\nimport com.loyauty.service.core.dto.UserProductPriceDTO;\nimport com.loyauty.service.core.dto.UserSessionDTO;\nimport com.loyauty.service.orders.OrdersService;\nimport com.loyauty.service.product.ProductService;\nimport com.loyauty.service.user.UserService;\nimport com.loyauty.web.struts.action.LoyautyAction;\n\n\npublic class CreateOrdersManual extends LoyautyAction {\n\tprivate static final long serialVersionUID = -1238269595572206024L;\n\n\tprivate UserService userService;\n\tprivate ProductService productService;\n\tprivate OrdersService orderService;\n\t@Getter @Setter\n\tprivate String userLogin;\n\t@Getter @Setter\n\tprivate Long userId;\n\t@Getter @Setter\n\tprivate List<User> usersList;\n\tprivate static int USER_TYPE = 2;\n\t@Getter @Setter\n\tprivate File orderFile;\n\t@Getter @Setter\n\tList<OrdersDTO>listOrdersDTO;\n\tHashtable<String, OrdersDTO>hashOrders;\n\t@Getter @Setter\n\tprivate String orderSelected;\n\t@Getter @Setter\n\tprivate Long saveOrdersSignal;\n\t@Getter @Setter\n\tprivate Long confirmSaveOrdersSignal;\n\t@Getter @Setter\n\tprivate String lsOrderId;\n\t@Getter @Setter\n\tprivate String message;\n\t@Getter @Setter\n\tInteger indexOrder;\n\t@Getter @Setter\n\tInteger indexRow;\n\t@Getter @Setter\n\tprivate Long checkBoxPrintSignal;\n\t@Getter @Setter\n\tprivate Boolean checkBoxPrintEtem;\n\t@Getter @Setter\n\tprivate Boolean checkBoxPrint;\n\t@Getter @Setter\n\tprivate Long pageTop=0L;\n\t@Getter @Setter\n\tprivate Long saved;\n\t@Getter @Setter\n\tprivate String showNotificationPop=""visibility:hidden;display:none;"";\n\t@Getter @Setter\n\tprivate Long addOrderSignal;\n\t@Getter @Setter\n\tprivate Long addSimilarOrderSignal;\n\t@Getter @Setter\n\tprivate Long deleteOrderSignal;\n\t@Getter @Setter\n\tprivate Long deleteRowSignal;\n\t@Getter @Setter\n\tprivate Long userLoginChangedSignal;\n\t@Getter @Setter\n\tprivate Long saveTemporarySignal;\n\t@Getter @Setter\n\tprivate Long addSimilarRowSignal;\n\t@Getter @Setter\n\tprivate Long saveTemporaryRowSignal;\n\t@Getter @Setter\n\tprivate Long checkProductPriceSignal;\n\t@Getter @Setter\n\tprivate Long userIdFindedSignal;\n\t@Getter @Setter\n\tprivate String userLogo;\n\t//recovery Data Order\n\t@Getter @Setter\n\tprivate String clientLastName;\n\t@Getter @Setter\n\tprivate String clientFirstName;\n\t@Getter @Setter\n\tprivate String clientOtherNames;\n\t@Getter @Setter\n\tprivate String clientStreet;\n\t@Getter @Setter\n\tprivate String  clientOtherStreet;\n\t@Getter @Setter\n\tprivate String  clientCity;\n\t@Getter @Setter\n\tprivate String  clientProvince;\n\t@Getter @Setter\n\tprivate String  clientPostalCode;\n\t@Getter @Setter\n\tprivate String  clientPhone;\n\t@Getter @Setter\n\tprivate String  clientEmail;\n\t@Getter @Setter\n\tprivate String productOrderNumber;\n\t@Getter @Setter\n\tprivate String strProductOrderDate;\n\t@Getter @Setter\n\tprivate String strRequiredDate;\n\t\n\t//recovery data row\n\t@Getter @Setter\n\tprivate Double quantity ;\n\t@Getter @Setter\n\tprivate String lsProductID;\n\t@Getter @Setter\n\tprivate Double stock;\n\t@Getter @Setter\n\tprivate String productDescription;\n\t@Getter @Setter\n\tprivate Double unitPrice;\n\t@Getter @Setter\n\tprivate Double shippingFee;\n\t@Getter @Setter\n\tprivate String shippingCompany;\n\t@Getter @Setter\n\tprivate String trackingNumber;\n\t@Getter @Setter\n\tprivate String strCreationOrderDate;\n\t@Getter @Setter\n\tprivate Date creationOrderDate; \n\t@Getter @Setter\n\tprivate String showSaveSuccessPop=""visibility:hidden;display:none;"";\n\t//showSaveSuccessPop=""display:block;visibility:visible;"";\n\t//showSaveSuccessPop=""visibility:hidden;display:none;"";\n\t@Getter @Setter\n\tprivate Long okSaveSuccessPopSignal;\n\t@Getter @Setter\n\tprivate Long requirdFieldError;\n\t@Getter @Setter\n\tprivate Long newLsOrderIdSignal;\n\t@Getter @Setter\n\tprivate List<ProvinceDTO>listProvinces;\n\t@Getter @Setter \n\tprivate String  code;\n\t//@Getter @Setter\n\t//private List<CityDTO>listCities;\n\tprivate Hashtable<String, ProvinceDTO>hashProvinces;\n\t//private Hashtable<String, CityDTO>hashCities;\n\t//@Getter @Setter\n\t//private Long provinceChangedSignal;\n\tprivate Date today ;\n\t\n\tpublic  CreateOrdersManual() throws ServiceLocatorException {\n\t\tsuper();\t\n\t\tproductService = getServiceLocator().getProductService();   \n\t\tuserService = getServiceLocator().getUserService();\n\t\torderService = getServiceLocator().getOrderService();\n\t\thashOrders=new Hashtable<String, OrdersDTO>();\n\t\t//listProvinces=new ArrayList<ProvinceDTO>();\n\t\ttoday=new Date();\n\t}\n\n\t/*=========================================================================================\n\t \t\t\t\t\t\t\t\t\t\t\tmethod execute\n\t  =========================================================================================*/\n\t@SuppressWarnings({ ""rawtypes"", ""unchecked"", ""unused"" })\n\t@Override\n\tpublic String execute() throws Exception {\n\t\tHttpSession session = request.getSession(true);\n\t\tOrdersDTO orderDTOToAdd;\n\t\tuserLogo=(String)session.getAttribute(""userLogo"");\n\t\trequirdFieldError=(Long)session.getAttribute(""requirdFieldError"");\n\t\tSimpleDateFormat frm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\tSimpleDateFormat frmForLsOrderId = new SimpleDateFormat(""yyyyMMdd"");\n\t\tOrdersDTO orderDTOToUpdate;\n\t\tString initalClient="""";\n\t\ttry {\n\t\t\t//recovery provinces\n\t\t\tlistProvinces=(List<ProvinceDTO>)session.getAttribute(""listProvinces"");\n\t\t\tif(listProvinces==null){\n\t\t\t\tlistProvinces=productService.getAllProvinces();\n\t\t\t\tsession.setAttribute(""listProvinces"",listProvinces);\n\t\t\t}\n\t\t\tif (((strCreationOrderDate)!=null)&&(!"""".equals(strCreationOrderDate))){\n\t\t\t\ttry {\n\t\t\t\t\tcreationOrderDate = frm.parse(strCreationOrderDate);\n\t\t\t\t}\n\t\t\t\tcatch (Exception pe) {\n\t\t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t\t\t\t}\n\t\t\t}\n\t\t\t/*-------------------- recovery users list -----------------------------------\n\t\t\t\t\t\t\tRecovery users list in session\n\t\t\t -----------------------------------------------------------------------------*/\n\t\t\tBasicUserDTO basicUserDTO = new BasicUserDTO();\n\t\t\tbasicUserDTO.setTypeId(USER_TYPE);\n\t\t\tList<User> usersListSession=(List<User>)session.getAttribute(""usersListSession"");\n\t\t\tif(usersListSession==null){\n\t\t\t\tList<UserSessionDTO> listAllUsers= userService.getAllUsers(basicUserDTO);\n\t\t\t\tusersList=new ArrayList<User>();\n\t\t\t\tfor(UserSessionDTO userDTO:listAllUsers){\n\t\t\t\t\tUser user=new User();\n\t\t\t\t\tuser.setId(userDTO.getId());\n\t\t\t\t\tuser.setLogin(userDTO.getLogin());\n\t\t\t\t\tusersList.add(user);\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""usersListSession"",usersList);\n\t\t\t}else usersList=usersListSession;\n\n\n\t\t\t/*-------------------- recovery orders list ------------------------------------\n\t\t\t\t\t\tdisplaying at least one item in the orders list if it is empty\n\t\t\t  -----------------------------------------------------------------------------*/\n\t\t\t\n\t\t\tif(userIdFindedSignal==null || userIdFindedSignal==0L){\n\t\t\t\tuserId=(Long)session.getAttribute(""userId"");\n\t\t\t\tif(userId!=null){\n\t\t\t\t\tUserDTO userFind=userService.getUserInformation(userId);\n\t\t\t\t\tuserLogin=userFind.getLogin();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tlistOrdersDTO=(List<OrdersDTO>)session.getAttribute(""listOrdersDTOMan"");\n\t\t\tif(listOrdersDTO==null)listOrdersDTO =new ArrayList<OrdersDTO>();\n\t\t\tif(listOrdersDTO.size()==0){\n\t\t\t\t//String lsOrderIdFirstPart=""Man""+frm.format(today);\n\t\t\t\tif(userLogin!=null && userLogin.length()>=2){\n\t\t\t\t\tinitalClient=userLogin.substring(0, 2);\n\t\t\t\t\tinitalClient=initalClient.toUpperCase();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tString lsOrderIdFirstPart=initalClient+""M""+frmForLsOrderId.format(today);\n\t\t\t\tString manLsOrderId=orderService.generateManLsOrderId(lsOrderIdFirstPart);\n\t\t\t\tOrdersDTO orderDTO=new OrdersDTO();\n\t\t\t\torderDTO.setLsOrderId(manLsOrderId);\n\t\t\t\torderDTO.setCssStyle(""background-color: color:white;border-right:1px solid #CCCCCC;border-left:1px solid #CCCCCC;border-top:1px solid #CCCCCC;"");\n\t\t\t\tOrdersRows orderRow=new OrdersRows();\n\t\t\t\torderRow.setIcon(""images/orders/itemNotValidated.png"");\n\t\t\t\torderDTO.getRowsList().add(orderRow);\n\t\t\t\tlistOrdersDTO.add(orderDTO);\n\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t}else{\n\t\t\t\tif(userLogin!=null && userLogin.length()>=2){\n\t\t\t\t\tinitalClient=userLogin.substring(0, 2);\n\t\t\t\t\tinitalClient=initalClient.toUpperCase();\n\t\t\t\t}\n\t\t\t\tString lsOrderIdFirstPart=initalClient+""M""+frmForLsOrderId.format(today);\n\t\t\t\tString manLsOrderId=orderService.generateManLsOrderId(lsOrderIdFirstPart);\n\t\t\t\tOrdersDTO ordDTO=listOrdersDTO.get(0);\n\t\t\t\tordDTO.setLsOrderId(manLsOrderId);\n\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\t\n\t\t\t}\n\n\t\t\t/*----------------- When Admin change province -----------------------------------------\n\t\t\t\t\t\t\t\tCheck a list off this province\n\t\t\t ---------------------------------------------------------------------------------------*/\n\t\t\t//if(provinceChangedSignal!=null && provinceChangedSignal!=0L){\n\t\t\t\thashProvinces=(Hashtable<String, ProvinceDTO>)session.getAttribute(""hashProvinces"");\n\t\t\t\tif(code!=null && !code.equals("""")){\n\t\t\t\t\tProvinceDTO provinceDTO=hashProvinces.get(code);\n\t\t\t\t\tif(provinceDTO!=null){\n\t\t\t\t\t\tclientProvince=provinceDTO.getCode();\n\t\t\t\t\t\t//listCities=provinceDTO.getListCities();\n\t\t\t\t\t}\n\t\t\t\t}//else listCities=new ArrayList<CityDTO>();\n\t\t\t\torderDTOToUpdate=listOrdersDTO.get(0);\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\torderDTOToUpdate.setClientCity(clientCity);\n\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\t//return SUCCESS;\n\t\t\t//}\n\n\t\t\t/*-------------------- When Admin Find User Login ---------------------------\n\t\t\t\t\t\tchange all value of userid list of orders\n\t\t\t -----------------------------------------------------------------------------*/\n\t\t\tif(userIdFindedSignal!=null && userIdFindedSignal!=0L){\n\t\t\t\tUser user=userService.getUserByLogin(userLogin);\n\t\t\t\tOrdersDTO orderDTO=listOrdersDTO.get(0);\n\t\t\t\torderDTO=fillDataOrderDTO(orderDTO);\n\t\t\t\tuserLogo=null;\n\t\t\t\tuserId=null;\n\t\t\t\tif(user!=null){\n\t\t\t\t\torderDTO.setUserId(user.getId());\n\t\t\t\t\tuserId=user.getId();\n\t\t\t\t\tfor(OrdersDTO ord:listOrdersDTO){\n\t\t\t\t\t\tord.setUserId(user.getId());\n\t\t\t\t\t\tord.setUserLogin(userLogin);\n\t\t\t\t\t}\n\t    \t\t\t//show user logo\n\t    \t\t\tuserLogo=""./images/orders/usersLogos/""+userLogin+"".png"";\n\t\t\t\t}else userLogin=null;\n\n\t\t\t\tString filePath = session.getServletContext().getRealPath(""/"");\n\t\t\t\tString LogoDestination = filePath + ""images/orders/usersLogos/""+userLogin+"".png"";\n\t\t\t\tFile f=new File(LogoDestination);\n\t\t\t\tif(!f.exists())userId=null;\n    \t\t\tsession.setAttribute(""userLogo"",userLogo);\n\t\t\t\tsession.setAttribute(""userId"",userId);\n\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\t\t\tif(userId==null)userLogin="""";\n\n\t\t\t/*----------------- When Admin change province -----------------------------------------\n\t\t\t\t\t\t\t\tCheck a list off this province\n\t\t\t ---------------------------------------------------------------------------------------*/\n\t\t\t/*if(provinceChangedSignal!=null && provinceChangedSignal!=0L){\n\t\t\t\thashProvinces=(Hashtable<String, ProvinceDTO>)session.getAttribute(""hashProvinces"");\n\t\t\t\tif(code!=null){\n\t\t\t\t\tlistCities=hashProvinces.get(code).getListCities();\n\t\t\t\t}else listCities=new ArrayList<CityDTO>();\n\t\t\t\torderDTOToUpdate=listOrdersDTO.get(0);\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\t//orderDTOToUpdate.setClientCity(clientCity)\n\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\t//return SUCCESS;\n\t\t\t//}*/\n\t\t\t\n\t\t\t/*----------------- When Admin check on Add Similar order Icon or save Temporary -------\n\t\t\t\t\t\t\t\t\tCreate a copy of order selected\n\t\t\t ---------------------------------------------------------------------------------------*/\n\t\t\tif(((addSimilarOrderSignal!=null && addSimilarOrderSignal!=0L)||(saveTemporarySignal!=null && saveTemporarySignal!=0L)) && indexOrder>=0){\n\t\t\t\torderDTOToAdd=listOrdersDTO.get(indexOrder);\n\t\t\t\tif(orderDTOToAdd==null)orderDTOToAdd=new OrdersDTO();\n\t\t\t\tif((saveTemporarySignal!=null && saveTemporarySignal!=0L))orderDTOToAdd.setLsOrderId(lsOrderId);\n\t\t\t\torderDTOToAdd.setCreationDate(creationOrderDate); \n\t\t\t\torderDTOToAdd.setClientLastName(clientLastName);\n\t\t\t\torderDTOToAdd.setClientFirstName(clientFirstName);\n\t\t\t\torderDTOToAdd.setClientOtherNames(clientOtherNames); \n\t\t\t\torderDTOToAdd.setClientStreet(clientStreet);\n\t\t\t\torderDTOToAdd.setClientOtherStreet(clientOtherStreet);\n\t\t\t\torderDTOToAdd.setClientCity(clientCity);\n\t\t\t\torderDTOToAdd.setClientProvince(clientProvince);\n\t\t\t\torderDTOToAdd.setClientProvince(clientProvince);\n\t\t\t\torderDTOToAdd.setClientPostalCode(clientPostalCode);\n\t\t\t\torderDTOToAdd.setClientPhone(clientPhone);\n\t\t\t\torderDTOToAdd.setClientEmail(clientEmail);\t\t\t\n\t\t\t\torderDTOToAdd.setProductOrderNumber(productOrderNumber);\n\t\t\t\tif (((strProductOrderDate)!=null)&&(!"""".equals(strProductOrderDate))){\n\t    \t\t\tSimpleDateFormat sdf = new SimpleDateFormat(""dd/MM/yyyy"");\n\t    \t\t\ttry {\n\t    \t\t\t\tDate date = sdf.parse(strProductOrderDate);\n\t    \t\t\t\torderDTOToAdd.setProductOrderDate(date);\n\t    \t\t\t}\n\t    \t\t\tcatch (Exception pe) {\n\t    \t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t    \t\t\t}\n\t    \t\t}\n\t\t\t\tif (((strRequiredDate)!=null)&&(!"""".equals(strRequiredDate))){\n\t    \t\t\tSimpleDateFormat sdf = new SimpleDateFormat(""dd/MM/yyyy"");\n\t    \t\t\ttry {\n\t    \t\t\t\tDate date = sdf.parse(strRequiredDate);\n\t    \t\t\t\torderDTOToAdd.setRequiredDate(date);\n\t    \t\t\t}\n\t    \t\t\tcatch (Exception pe) {\n\t    \t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t    \t\t\t}\n\t    \t\t}\n\t\t\t\tUser user=userService.getUserByLogin(userLogin);\n\t\t\t\tif(user!=null){\n\t\t\t\t\tUserDTO userDTO=userService.getUserInformation(user.getId());\n\t\t\t\t\torderDTOToAdd.setUserLogin(userLogin);\n\t\t\t\t\torderDTOToAdd.setUserId(userDTO.getId());\n\t\t\t\t}\n\t\t\t\tif(addSimilarOrderSignal!=null && addSimilarOrderSignal!=0L){ \n\t\t\t\t\tOrdersDTO orderDTOClone = DTOFactory.getOrderDTOClone(orderDTOToAdd);\n\t\t\t\t\torderDTOClone.setCssStyle(""background-color:white;border-right: 1px solid #CCCCCC;border-left:1px solid #CCCCCC;border-top:  1px solid #CCCCCC;"");\n\t\t\t\t\tlistOrdersDTO.add(orderDTOClone);\n\t\t\t\t}\n\t\t\t\tint indexOrder=0;\n\t\t\t\tfor(OrdersDTO orderDTO:listOrdersDTO){\n\t\t\t\t\torderDTO.setIndex(indexOrder);\n\t\t\t\t\tindexOrder++;\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\t\t\t\n\t\t\t/*----------------- When Admin click on saveTemporaryRow Icon --------------------------\n\t\t\t\t\twe must first obtained the object that contains the list of rows,\n\t\t\t\t\tafter we accede to the row by index recovered by web view and change it\n\t\t\t ---------------------------------------------------------------------------------------*/\n\t\t\tif(saveTemporaryRowSignal!=null && saveTemporaryRowSignal!=0L){\n\t\t\t\t\n\t\t\t\torderDTOToUpdate=listOrdersDTO.get(0);\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\t/*\n\t\t\t\torderDTOToUpdate.setProductOrderNumber(productOrderNumber);\n\t\t\t\torderDTOToUpdate.setCreationDate(creationOrderDate);\n\t\t\t\torderDTOToUpdate.setClientLastName(clientLastName);\n\t\t\t\torderDTOToUpdate.setClientFirstName(clientFirstName);\n\t\t\t\torderDTOToUpdate.setClientOtherNames(clientOtherNames); \n\t\t\t\torderDTOToUpdate.setClientStreet(clientStreet);\n\t\t\t\torderDTOToUpdate.setClientOtherStreet(clientOtherStreet);\n\t\t\t\torderDTOToUpdate.setClientCity(clientCity);\n\t\t\t\torderDTOToUpdate.setClientProvince(clientProvince);\n\t\t\t\torderDTOToUpdate.setClientProvince(clientProvince);\n\t\t\t\torderDTOToUpdate.setClientPostalCode(clientPostalCode);\n\t\t\t\torderDTOToUpdate.setClientPhone(clientPhone);\n\t\t\t\torderDTOToUpdate.setClientEmail(clientEmail);\t\t\t\n\t\t\t\torderDTOToUpdate.setProductOrderNumber(productOrderNumber);\n\n\t\t\t\tif (((strProductOrderDate)!=null)&&(!"""".equals(strProductOrderDate))){\n\t    \t\t\tSimpleDateFormat sdf = new SimpleDateFormat(""dd/MM/yyyy"");\n\t    \t\t\ttry {\n\t    \t\t\t\tDate date = sdf.parse(strProductOrderDate);\n\t    \t\t\t\torderDTOToUpdate.setProductOrderDate(date);\n\t    \t\t\t}\n\t    \t\t\tcatch (Exception pe) {\n\t    \t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t    \t\t\t}\n\t    \t\t}\n\t\t\t\tif (((strRequiredDate)!=null)&&(!"""".equals(strRequiredDate))){\n\t    \t\t\tSimpleDateFormat sdf = new SimpleDateFormat(""dd/MM/yyyy"");\n\t    \t\t\ttry {\n\t    \t\t\t\tDate date = sdf.parse(strRequiredDate);\n\t    \t\t\t\torderDTOToUpdate.setRequiredDate(date);\n\t    \t\t\t}\n\t    \t\t\tcatch (Exception pe) {\n\t    \t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t    \t\t\t}\n\t    \t\t}\n\t\t\t\t*/\n\t\t\t\tOrdersRows orderRowToSaveMemory=orderDTOToUpdate.getRowsList().get(indexRow);\n\t\t\t\torderRowToSaveMemory.setIcon(""images/orders/itemValidated.png"");\n\t\t\t\tif(orderRowToSaveMemory!=null){\n\t\t\t\t\torderRowToSaveMemory.setQuantity(quantity); \n\t\t\t\t\torderRowToSaveMemory.setLsProductID(lsProductID);\n\t\t\t\t\torderRowToSaveMemory.setProductDescription(productDescription);\n\t\t\t\t\torderRowToSaveMemory.setUnitPrice(unitPrice);\n\t\t\t\t\torderRowToSaveMemory.setCssPrice(""background-color:red;"");\n\t\t\t\t\tif(unitPrice!=null && orderRowToSaveMemory.getLsPrice()!=null\n\t\t\t\t\t  && unitPrice>=orderRowToSaveMemory.getLsPrice())\n\t\t\t\t\t  orderRowToSaveMemory.setCssPrice("""");\n\t\t\t\t\torderRowToSaveMemory.setShippingFee(shippingFee);\n\t\t\t\t\torderRowToSaveMemory.setShippingPrice(shippingFee);\n\t\t\t\t\torderRowToSaveMemory.setShippingCompany(shippingCompany);\n\t\t\t\t\torderRowToSaveMemory.setTrackingNumber(trackingNumber);\t\n\t\t\t\t\tint indexOrder=0;\n\t\t\t\t\tint indexRow=0;\n\t\t\t\t\tfor(OrdersDTO orderDTO:listOrdersDTO){\n\t\t\t\t\t\torderDTO.setIndex(indexOrder);\n\t\t\t\t\t\tindexOrder++;\n\t\t\t\t\t\tindexRow=0;\n\t\t\t\t\t\tfor(OrdersRows orderRows:orderDTO.getRowsList()){\n\t\t\t\t\t\t\torderRows.setIndex(indexRow);\n\t\t\t\t\t\t\tindexRow++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\t\tlistOrdersDTO=(List<OrdersDTO>)session.getAttribute(""listOrdersDTOMan"");\n\t\t\t\t}\n\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\t\t\t\n\t\t\t/*-------------------- When Admin click on addSimilarRow Icon -----------------\n\t\t\t\t\t\t\t\t\t\tAdd one Row Similar at the previews\n\t\t\t  -----------------------------------------------------------------------------*/\n\t\t\tif(addSimilarRowSignal!=null && addSimilarRowSignal!=0L){\n\t\t\t\torderDTOToUpdate=listOrdersDTO.get(indexOrder);\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\tOrdersRows orderRowToClone=orderDTOToUpdate.getRowsList().get(indexRow);\n\t\t\t\tif(orderRowToClone!=null){\n\t\t\t\t\tif(!orderRowToClone.getIcon().equals(""images/orders/itemValidated.png"")){\n\t\t\t\t\t\torderRowToClone.setQuantity(quantity); \n\t\t\t\t\t\torderRowToClone.setLsProductID(lsProductID);\n\t\t\t\t\t\torderRowToClone.setStock(stock);\n\t\t\t\t\t\torderRowToClone.setProductDescription(productDescription);\n\t\t\t\t\t\torderRowToClone.setUnitPrice(unitPrice);\n\t\t\t\t\t\torderRowToClone.setShippingFee(shippingFee);\n\t\t\t\t\t\torderRowToClone.setShippingPrice(shippingFee);\n\t\t\t\t\t\torderRowToClone.setShippingCompany(shippingCompany);\n\t\t\t\t\t\torderRowToClone.setTrackingNumber(trackingNumber);\n\t\t\t\t\t}\n\t\t\t\t\torderRowToClone.setIcon(""images/orders/itemValidated.png"");\n\t\t\t\t\tOrdersRows orderRowToAdd=DTOFactory.getOrderRowClone(orderRowToClone);\n\t\t\t\t\torderDTOToUpdate.getRowsList().add(indexRow+1,orderRowToAdd);\n\t\t\t\t\tint indexOrder=0;\n\t\t\t\t\tint indexRow=0;\n\t\t\t\t\tfor(OrdersDTO orderDTO:listOrdersDTO){\n\t\t\t\t\t\torderDTO.setIndex(indexOrder);\n\t\t\t\t\t\tindexOrder++;\n\t\t\t\t\t\tindexRow=0;\n\t\t\t\t\t\tfor(OrdersRows orderRows:orderDTO.getRowsList()){\n\t\t\t\t\t\t\torderRows.setIndex(indexRow);\n\t\t\t\t\t\t\tindexRow++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\t\tlistOrdersDTO=(List<OrdersDTO>)session.getAttribute(""listOrdersDTOMan"");\n\t\t\t\t}\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*-------------------- When Admin click on Delete order Icon -------------\n\t\t\t\t\t\t\t\t\tDelete this order using index\n\t\t\t -----------------------------------------------------------------------------*/\n\t\t\t\n\t\t\tif(deleteOrderSignal!=null && deleteOrderSignal!=0L){\n\t\t\t\torderDTOToUpdate=listOrdersDTO.get(indexOrder);\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\tList<OrdersDTO> listOrdersDTOAfterDelete=new ArrayList<OrdersDTO>();\n\t\t\t\tfor(int i=0 ;i<listOrdersDTO.size();i++){\n\t\t\t\t\tif(i!=indexOrder || indexOrder==0)listOrdersDTOAfterDelete.add(listOrdersDTO.get(i));\n\t\t\t\t}\n\t\t\t\tint index=0;\n\t\t\t\tfor(int i=0 ;i<listOrdersDTOAfterDelete.size();i++){\n\t\t\t\t\tlistOrdersDTOAfterDelete.get(i).setIndex(index);\n\t\t\t\t\tindex++;\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTOAfterDelete);\n\t\t\t\tlistOrdersDTO=listOrdersDTOAfterDelete;\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*-------------------- When Admin check on Delete Row Icon -------------------\n\t\t\t\t\t\t\t\t\tDelete this row using index\n\t\t\t -----------------------------------------------------------------------------*/\n\t\t\tif(deleteRowSignal!=null && deleteRowSignal!=0L){\n\t\t\t\tArrayList<OrdersRows>listRowsAfterDelete=new ArrayList<OrdersRows>();\n\t\t\t\tOrdersDTO orderDTO=listOrdersDTO.get(indexOrder);\n\t\t\t\torderDTO=fillDataOrderDTO(orderDTO);\n\t\t\t\tif(orderDTO!=null && orderDTO.getRowsList().size()>1){\n\t\t\t\t\tfor(int i=0 ;i<orderDTO.getRowsList().size();i++){\n\t\t\t\t\t\tif(i!=indexRow)listRowsAfterDelete.add(orderDTO.getRowsList().get(i));\n\t\t\t\t\t}\n\t\t\t\t\tint index=0;\n\t\t\t\t\tfor(int i=0 ;i<listRowsAfterDelete.size();i++){\n\t\t\t\t\t\tlistRowsAfterDelete.get(i).setIndex(index);\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t}\n\t\t\t\t\torderDTO.setRowsList(listRowsAfterDelete);\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\t\t\t\n\n\t\t\t/*-------------------- When Admin check left lsProduct TextField -------------\n\t\t\t\t\t\t\t\tcheck userPrice in DB, and write it in web view\n\t\t\t -----------------------------------------------------------------------------*/\n\t\t\tif(checkProductPriceSignal!=null && checkProductPriceSignal!=0L){\n\t\t\t\torderDTOToUpdate=listOrdersDTO.get(indexOrder);\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\t/*\n\t\t\t\torderDTOToUpdate.setClientLastName(clientLastName);\n\t\t\t\torderDTOToUpdate.setClientFirstName(clientFirstName);\n\t\t\t\torderDTOToUpdate.setClientOtherNames(clientOtherNames); \n\t\t\t\torderDTOToUpdate.setClientStreet(clientStreet);\n\t\t\t\torderDTOToUpdate.setClientOtherStreet(clientOtherStreet);\n\t\t\t\torderDTOToUpdate.setClientCity(clientCity);\n\t\t\t\torderDTOToUpdate.setClientProvince(clientProvince);\n\t\t\t\torderDTOToUpdate.setClientProvince(clientProvince);\n\t\t\t\torderDTOToUpdate.setClientPostalCode(clientPostalCode);\n\t\t\t\torderDTOToUpdate.setClientPhone(clientPhone);\n\t\t\t\torderDTOToUpdate.setClientEmail(clientEmail);\t\t\t\n\t\t\t\torderDTOToUpdate.setProductOrderNumber(productOrderNumber);\n\t\t\t\tif (((strProductOrderDate)!=null)&&(!"""".equals(strProductOrderDate))){\n\t    \t\t\tSimpleDateFormat sdf = new SimpleDateFormat(""dd/MM/yyyy"");\n\t    \t\t\ttry {\n\t    \t\t\t\tDate date = sdf.parse(strProductOrderDate);\n\t    \t\t\t\torderDTOToUpdate.setProductOrderDate(date);\n\t    \t\t\t}\n\t    \t\t\tcatch (Exception pe) {\n\t    \t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t    \t\t\t}\n\t    \t\t}\n\t\t\t\tif (((strRequiredDate)!=null)&&(!"""".equals(strRequiredDate))){\n\t    \t\t\tSimpleDateFormat sdf = new SimpleDateFormat(""dd/MM/yyyy"");\n\t    \t\t\ttry {\n\t    \t\t\t\tDate date = sdf.parse(strRequiredDate);\n\t    \t\t\t\torderDTOToUpdate.setRequiredDate(date);\n\t    \t\t\t}\n\t    \t\t\tcatch (Exception pe) {\n\t    \t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t    \t\t\t}\n\t    \t\t}\n\t\t\t\t*/\n\t\t\t\tOrdersRows orderRowToUpadate=orderDTOToUpdate.getRowsList().get(indexRow);\n\t\t\t\tUserProductPriceDTO userProductPrice=productService.getUsrPPriceByLsproductId(userId, lsProductID);\n\t\t\t\torderRowToUpadate.setCss("""");\n\t\t\t\torderRowToUpadate.setCssPrice("""");\n\t\t\t\tif(userProductPrice==null){\n\t\t\t\t\tlsProductID=null;\n\t\t\t\t\torderRowToUpadate.setCss(""background-color:red;"");\n\t\t\t\t\taddActionError(getText(""loyauty.error.common.requiredLsProductOrder""));\n\t\t\t\t\torderRowToUpadate.setProductDescription(""""); \n\t\t\t\t\torderRowToUpadate.setStock(null);\n\t\t\t\t\torderRowToUpadate.setProductId(null);\n\t\t\t\t\torderRowToUpadate.setLsProductID(lsProductID);\n\t\t\t\t\torderRowToUpadate.setLsPrice(null);\n\t\t\t\t}else{\n\t\t\t\t\tDouble usrPrice=orderRowToUpadate.getUnitPrice();\n\t\t\t\t\tif(usrPrice==null)usrPrice=0D;\n\t\t\t\t\tif(usrPrice < userProductPrice.getPriceNum()){\n\t\t\t\t\t\torderRowToUpadate.setCssPrice(""background-color:red;"");\t\n\t\t\t\t\t}\n\t\t\t\t\torderRowToUpadate.setProductDescription(userProductPrice.getProductTitle());\n\t\t\t\t\torderRowToUpadate.setStock(userProductPrice.getStock());\n\t\t\t\t\torderRowToUpadate.setProductId(userProductPrice.getProductId());\n\t\t\t\t\torderRowToUpadate.setLsProductID(userProductPrice.getLsProductId());\n\t\t\t\t\torderRowToUpadate.setLsPrice(userProductPrice.getPriceNum());\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\tlistOrdersDTO=(List<OrdersDTO>)session.getAttribute(""listOrdersDTOMan"");\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\t\t\t\n\t\t\t/*-------------------------------- SAVE ORDERS -------------------------------\n\t\t\t\t\t\tsave in data bases just orders witch has print checked \n\t \t\t -----------------------------------------------------------------------------*/\n\t\t\tif(saveOrdersSignal!=null && saveOrdersSignal!=0L){\n\t\t\t\tlistOrdersDTO=\t(ArrayList<OrdersDTO>) session.getAttribute(""listOrdersDTOMan"");\n\t\t\t\tUser user=userService.getUserByLogin(userLogin);\n\t\t\t\tOrdersDTO order=listOrdersDTO.get(0);\n\t\t\t\torder.setManOrder(true);\n\t\t\t\torder=fillDataOrderDTO(order);\n\t\t\t\tif(user!=null)order.setUserId(user.getId());\n\t\t\t\tboolean productNotFond=false;\n\t\t\t\tfor(OrdersRows row:order.getRowsList()){\n\t\t\t\t\tif(row.getLsProductID()==null || row.getLsProductID().equals("""")){\n\t\t\t\t\t\tproductNotFond=true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\trequirdFieldError=null;\n\t\t\t\tsession.setAttribute(""requirdFieldError"",null);\n\t\t\t\tproductOrderNumber=order.getProductOrderNumber().replaceAll(""^ +| +$|( )+"", ""$1"");\n\t\t\t\tclientFirstName=order.getClientFirstName().replaceAll(""^ +| +$|( )+"", ""$1"");\n\t\t\t\tclientLastName=order.getClientLastName().replaceAll(""^ +| +$|( )+"", ""$1"");\n\t\t\t\tclientStreet=order.getClientStreet().replaceAll(""^ +| +$|( )+"", ""$1"");\n\t\t\t\tclientCity=order.getClientCity().replaceAll(""^ +| +$|( )+"", ""$1"");\n\t\t\t\tclientProvince=order.getClientProvince().replaceAll(""^ +| +$|( )+"", ""$1"");\n\t\t\t\tclientPostalCode=order.getClientPostalCode().replaceAll(""^ +| +$|( )+"", ""$1"");\n\t\t\t\t\n\t\t\t\torder.setProductOrderNumber(productOrderNumber);\n\t\t\t\torder.setClientFirstName(clientFirstName);\n\t\t\t\torder.setClientLastName(clientLastName);\n\t\t\t\torder.setClientStreet(clientStreet);\n\t\t\t\torder.setClientCity(clientCity);\n\t\t\t\torder.setClientProvince(clientProvince);\n\t\t\t\torder.setClientPostalCode(clientPostalCode);\n\t\t\t\t\n\t\t\t\tif(order.getProductOrderNumber()==null || order.getProductOrderNumber().equals("""")||\n\t\t\t\t\t\t   order.getLsOrderId()==null || order.getLsOrderId().equals("""") ||\n\t\t\t\t\t\t   order.getCreationDate()==null || productNotFond ||\n\t\t\t\t\t\t   order.getClientFirstName()==null || order.getClientFirstName().equals("""")||\n\t\t\t\t\t\t   order.getClientLastName()==null || order.getClientLastName().equals("""") ||\n\t\t\t\t\t\t   order.getClientStreet()==null || order.getClientStreet().equals("""") ||\n\t\t\t\t\t\t   order.getClientCity()==null || order.getClientCity().equals("""") || \n\t\t\t\t\t\t   order.getClientProvince()==null || order.getClientProvince().equals("""") ||\n\t\t\t\t\t\t   order.getClientPostalCode()==null || order.getClientPostalCode().equals("""")){\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\t\taddActionError(getText(""loyauty.error.common.requiredFieldOrders""));\n\t\t\t\t\trequirdFieldError=1L;\n\t\t\t\t\tsession.setAttribute(""requirdFieldError"",1L);\n\t\t\t\t\treturn SUCCESS;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfor(OrdersRows row:order.getRowsList()){\n\t\t\t\t\tif(row.getLsProductID()==null || row.getLsProductID().equals("""")||\n\t\t\t\t\t   row.getQuantity()==null || row.getQuantity()==0D){\n\t\t\t\t\t\trequirdFieldError=1L;\n\t\t\t\t\t   session.setAttribute(""requirdFieldError"",1L);\n\t\t\t\t\t   addActionError(getText(""loyauty.error.common.requiredFieldOrders""));\n\t\t\t\t\t   return SUCCESS;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlistOrdersDTO=orderService.insertListOrders(listOrdersDTO);\n\t\t\t\tlistOrdersDTO=new ArrayList<OrdersDTO>();\n\t\t\t\tif(listOrdersDTO.size()==0){\n\t\t\t\t\tfrm = new SimpleDateFormat(""yyyyMMdd"");\n\t\t\t\t\tif(userLogin!=null && userLogin.length()>=2){\n\t\t\t\t\t\tinitalClient=userLogin.substring(0, 2);\n\t\t\t\t\t\tinitalClient=initalClient.toUpperCase();\n\t\t\t\t\t}\n\t\t\t\t\t//String lsOrderIdFirstPart=""Man""+frm.format(today);\n\t\t\t\t\tString lsOrderIdFirstPart=initalClient+""M""+frmForLsOrderId.format(today);\n\t\t\t\t\tString manLsOrderId=orderService.generateManLsOrderId(lsOrderIdFirstPart);\n\t\t\t\t\tOrdersDTO orderDTO=new OrdersDTO();\n\t\t\t\t\t//recovery userId\n\t\t\t\t\tif(user!=null)orderDTO.setUserId(user.getId());\n\t\t\t\t\torderDTO.setLsOrderId(manLsOrderId);\n\t\t\t\t\torderDTO.setCssStyle(""background-color: color:white;border-right:1px solid #CCCCCC;border-left:1px solid #CCCCCC;border-top:1px solid #CCCCCC;"");\n\t\t\t\t\tOrdersRows orderRow=new OrdersRows();\n\t\t\t\t\torderRow.setIcon(""images/orders/itemNotValidated.png"");\n\t\t\t\t\torderDTO.getRowsList().add(orderRow);\n\t\t\t\t\tlistOrdersDTO.add(orderDTO);\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\t}\n\t\t\t\tmessage=""Saving has completed successfuly"";\n\t\t\t\tshowSaveSuccessPop=""display:block;visibility:visible;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*-------------------- When user check print item -----------------------------\n\t\t\t\t\tAdd or remove this element from the orders to print\n\t \t\t -----------------------------------------------------------------------------*/\n\t\t\tif(checkBoxPrintSignal!=null && checkBoxPrintSignal!=0L){\n\t\t\t\tlistOrdersDTO=\t(ArrayList<OrdersDTO>) session.getAttribute(""listOrdersDTOMan"");\n\t\t\t\tOrdersDTO orderDTOInList=listOrdersDTO.get(indexOrder);\n\t\t\t\torderDTOInList=fillDataOrderDTO(orderDTOInList);\n\t\t\t\torderDTOInList.setPrint(checkBoxPrint);\n\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\n\t\t\t/*-------------- When user click on the button OK of showSaveSuccessPop -------\n\t\t\t\t\t\tjust hide dialogue popup: showSaveSuccessPop\n\t \t\t ------------------------------------------------------------------------------*/\n\t\t\tif(okSaveSuccessPopSignal!=null && okSaveSuccessPopSignal!=0L){\n\t\t\t\tlistOrdersDTO=\t(ArrayList<OrdersDTO>) session.getAttribute(""listOrdersDTOMan"");\n\t\t\t\tshowSaveSuccessPop=""visibility:hidden;display:none;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\n\n\t\t\t/*-------------- When user click on the image imgNewLsOrderId -----------------\n\t\t\t\t\t\t\t\tgenerate other LsOrderId\n\t \t\t ------------------------------------------------------------------------------*/\n\t\t\tif(newLsOrderIdSignal!=null && newLsOrderIdSignal!=0L){\n\t\t\t\tlistOrdersDTO=\t(ArrayList<OrdersDTO>) session.getAttribute(""listOrdersDTOMan"");\n\t\t\t\tOrdersDTO orderDTO=listOrdersDTO.get(0);\n\t\t\t\tfrm = new SimpleDateFormat(""yyyyMMdd"");\n\t\t\t\tif(userLogin!=null && userLogin.length()>=2){\n\t\t\t\t\tinitalClient=userLogin.substring(0, 2);\n\t\t\t\t\tinitalClient=initalClient.toUpperCase();\n\t\t\t\t}\n\t\t\t\t//String lsOrderIdFirstPart=""Man""+frm.format(today);\n\t\t\t\tString lsOrderIdFirstPart=initalClient+""M""+frmForLsOrderId.format(today);\n\t\t\t\tString manLsOrderId=orderService.generateManLsOrderId(lsOrderIdFirstPart);\n\t\t\t\torderDTO.setLsOrderId(manLsOrderId);\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t} catch (Exception e) {\n\t\t\taddActionError(getText(""loyauty.error.common.userNotSelected""));\n\t\t\te.printStackTrace();\n\t\t\treturn ""input"";\n\t\t}\n\treturn SUCCESS;\n\t}\n\t\n\n\t   /*=========================================================================================\n\t\t\t\t\t\t\t\tfill all fields of order without rows\n\t\t =========================================================================================*/\n\t\tpublic OrdersDTO fillDataOrderDTO(OrdersDTO orderDTO){\n\t\t\tSimpleDateFormat frm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\t//orderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\torderDTO.setClientLastName(clientLastName);\n\t\t\torderDTO.setClientFirstName(clientFirstName);\n\t\t\torderDTO.setClientOtherNames(clientOtherNames); \n\t\t\torderDTO.setClientStreet(clientStreet);\n\t\t\torderDTO.setClientOtherStreet(clientOtherStreet);\n\t\t\torderDTO.setClientCity(clientCity);\n\t\t\torderDTO.setClientProvince(clientProvince);\n\t\t\torderDTO.setClientProvince(clientProvince);\n\t\t\torderDTO.setClientPostalCode(clientPostalCode);\n\t\t\torderDTO.setClientPhone(clientPhone);\n\t\t\torderDTO.setClientEmail(clientEmail);\t\t\t\n\t\t\torderDTO.setProductOrderNumber(productOrderNumber);\n\t\t\t\n\t\t\t\n\t\t\tif (((strProductOrderDate)!=null)&&(!"""".equals(strProductOrderDate))){\n\t\t\t\tfrm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\t\ttry {\n\t\t\t\t\tDate date = frm.parse(strProductOrderDate);\n\t\t\t\t\torderDTO.setProductOrderDate(date);\n\t\t\t\t}\n\t\t\t\tcatch (Exception pe) {\n\t\t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (((strCreationOrderDate)!=null)&&(!"""".equals(strCreationOrderDate))){\n\t\t\t\tfrm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\t\ttry {\n\t\t\t\t\tDate date = frm.parse(strCreationOrderDate);\n\t\t\t\t\torderDTO.setCreationDate(date);\n\t\t\t\t}\n\t\t\t\tcatch (Exception pe) {\n\t\t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (((strRequiredDate)!=null)&&(!"""".equals(strRequiredDate))){\n\t\t\t\tfrm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\t\ttry {\n\t\t\t\t\tDate date = frm.parse(strRequiredDate);\n\t\t\t\t\torderDTO.setRequiredDate(date);\n\t\t\t\t}\n\t\t\t\tcatch (Exception pe) {\n\t\t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn orderDTO;\n\t\t}\n\n\t\n}\n\n----------------------------------- SOURCE END -------------------------------------",1392751029228
error,log,,,"Problems occurred when invoking code from plug-in: ""org.eclipse.jdt.ui"".",1392751029228
error,log,,,"Error in JDT Core during reconcile",1392751029243
error,log,,,"Exception occurred during problem detection:\n----------------------------------- SOURCE BEGIN -------------------------------------\npackage com.loyauty.web.struts.action;\n\nimport javax.servlet.http.HttpServletRequest;\n\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.Setter;\n\nimport org.apache.log4j.Logger;\nimport org.apache.struts2.ServletActionContext;\nimport org.apache.struts2.interceptor.ServletRequestAware;\n\nimport com.loyauty.service.ServiceLocator;\nimport com.loyauty.service.core.dto.UserFileRecoveryDTO;\nimport com.loyauty.web.MessageKeyConstants;\nimport com.loyauty.web.util.LocaleUtils;\nimport com.opensymphony.xwork2.ActionSupport;\nimport com.opensymphony.xwork2.Preparable;\n\n/**\n * This is the basic Loyalty action where common properties and methods should go.\n *  \n * @author Muthanna\n *\n */\n\npublic class LoyautyAction extends ActionSupport implements ServletRequestAware, Preparable {\n\n\tprivate static final String NAMESPACES_SEPARATOR = ""/"";\n\n\tprotected Logger log = Logger.getLogger(this.getClass());\n\t\n\tprotected HttpServletRequest request;\t\n\t@Getter\t@Setter\n\tprotected UserFileRecoveryDTO ufrDTO;\n\t@Getter\t@Setter\n\tprivate boolean ajax = false;\n\t@Getter\t@Setter\n\tprivate String currentLanguage;\n\t@Getter\t@Setter\n\tprivate String pageTitleKey;\n\t@Getter\t@Setter\n\tprivate String pageKeywordsKey;\n\t@Getter\t@Setter\n\tprivate String pageDescriptionKey;\n\t\n\t@Getter(AccessLevel.PROTECTED)\n\t@Setter(AccessLevel.PRIVATE)\n\tprivate ServiceLocator serviceLocator;\n\t\n\tpublic LoyautyAction() {\n\t\tsetServiceLocator(ServiceLocator.getInstance());\n\t}\n\t\n\t@Override\n\tpublic void prepare() throws Exception {\n\t\t/*\n\t\t * filling of message keys header information\n\t\t */\n\t\tString headerKey = null;\n\t\tString namesSpace = ServletActionContext.getActionMapping().getNamespace();\n\t\tString actionName = ServletActionContext.getActionMapping().getName();\n\t\tif (namesSpace != null && !namesSpace.equals(NAMESPACES_SEPARATOR)) {\n\t\t\theaderKey = namesSpace.replace(NAMESPACES_SEPARATOR, ""."");\n\t\t}\n\t\tif (actionName != null) {\n\t\t\theaderKey = (headerKey!=null?headerKey+""."":""."") + actionName;\n\t\t}\n\t\t\n\t\t\n\t\tsetPageTitleKey(MessageKeyConstants.PAGE_HEADER_TITLE_KEY+headerKey);\n\t\tsetPageKeywordsKey(MessageKeyConstants.PAGE_HEADER_KEYWORDS_KEY+headerKey);\n\t\tsetPageDescriptionKey(MessageKeyConstants.PAGE_HEADER_DESCRIPTION_KEY+headerKey);\n\t\tcurrentLanguage = LocaleUtils.getSessionLanguage(request);\n\t\t\n\t\t\n\t}\n\t\n\t/**\n\t * Use this method when if an Action can be use in a Ajax way.\n\t * If the action succeed, it chooses to return ""success"" in the classic way and ""none"" in a Ajax way.\n\t * method do the choice with an ""ajax=true"" parameter in the request \n\t * @return ""success"" in the classic way and ""none"" in a Ajax way.\n\t */\n\tpublic String getSuccessResult() {\n\t\tif (ajax) {\n\t\t\treturn NONE;\n\t\t} else {\n\t\t\treturn SUCCESS;\n\t\t}\n\t}\n\t\n\t/**\n\t * Use this method when if an Action can be use in a Ajax way.\n\t * If the action failed, it chooses to return ""input"" in the classic way and ""none"" in a Ajax way.\n\t * method do the choice with an ""ajax=true"" parameter in the request \n\t * @return ""success"" in the classic way and ""none"" in a Ajax way.\n\t */\n\tpublic String getInputResult() {\n\t\tif (ajax) {\n\t\t\treturn NONE;\n\t\t} else {\n\t\t\treturn INPUT;\n\t\t}\n\t}\n\t\n\t\n\tpublic String getRedirectResult() {\n\t\tif (ajax) {\n\t\t\treturn NONE;\n\t\t} else {\n\t\t\treturn ""next"";\n\t\t}\n\t}\n\t\n\t@Override\n\tpublic void setServletRequest(HttpServletRequest request) {\n\t\tthis.request = request;\n\t}\n}\n\n----------------------------------- SOURCE END -------------------------------------",1392751030772
error,log,,,"Problems occurred when invoking code from plug-in: ""org.eclipse.jdt.ui"".",1392751030772
error,log,,,"Error in JDT Core during reconcile",1392751030772
executed,command,org.eclipse.wst.server.ui,1.1.207.v20110119,"org.eclipse.wst.server.run",1392751037340
activated,view,org.eclipse.ui.console,3.5.0.v20100526,"org.eclipse.ui.console.ConsoleView",1392751040273
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1392751044704
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1392751044876
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1392751047856
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1392751048653
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1392751049043
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1392751078938
activated,view,org.eclipse.wst.server.ui,1.1.207.v20110119,"org.eclipse.wst.server.ui.ServersView",1392751078938
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1392751103635
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.cut",1392751116630
