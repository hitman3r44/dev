what,kind,bundleId,bundleVersion,description,time
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1398562613688
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1398562613847
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.file.save",1398562624643
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1398562626459
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1398562631487
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1398562631646
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.file.save",1398562635298
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1398562641442
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1398562641637
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.file.save",1398562646901
activated,view,org.eclipse.ui.ide,3.6.2.M20101201-0800,"org.eclipse.ui.views.ResourceNavigator",1398562651812
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1398562654180
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.undo",1398562656449
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.undo",1398562656785
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1398562660387
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.undo",1398562662511
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.file.save",1398562666517
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1398562668174
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.file.save",1398562670001
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1398562671633
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.cut",1398562705791
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.file.save",1398562707841
error,log,,,"Exception occurred during problem detection:\n----------------------------------- SOURCE BEGIN -------------------------------------\npackage com.loyauty.web.struts.action.product;\n\nimport java.text.DecimalFormat;\nimport java.text.NumberFormat;\nimport java.util.Locale;\nimport java.util.List;\n\nimport lombok.Getter;\nimport lombok.Setter;\n\nimport com.loyauty.enums.GroupCategoryEnum;\nimport com.loyauty.enums.ProductStatus;\nimport com.loyauty.enums.UserType;\nimport com.loyauty.exception.ServiceException;\nimport com.loyauty.exception.ServiceLocatorException;\nimport com.loyauty.model.UserProductPrice;\nimport com.loyauty.service.core.dto.ImageDTO;\nimport com.loyauty.service.core.dto.BrandDTO;\nimport com.loyauty.service.core.dto.ProductDTO;\nimport com.loyauty.service.core.dto.ProvinceDTO;\nimport com.loyauty.service.core.dto.ShippingTotalDTO;\nimport com.loyauty.service.core.dto.ProductModelDTO;\nimport com.loyauty.service.core.dto.SpecificationDTO;\nimport com.loyauty.service.core.dto.UserProductPriceDTO;\nimport com.loyauty.service.core.dto.UserSessionDTO;\nimport com.loyauty.service.product.ProductService;\nimport com.loyauty.service.specification.SpecificationService;\nimport com.loyauty.web.RequestAtributeConstants;\nimport com.loyauty.web.WebConstants;\nimport com.loyauty.web.struts.action.LoyautyAction;\nimport com.loyauty.web.util.SeoUrlsMaker;\n\npublic class Product extends LoyautyAction {\n\t\n\tprivate static final long serialVersionUID = 1L;\n\t\n\tprivate static final String UNION = ""_"";\n\tprivate static final char CHAR_PATTERN_THAT_REPEATS = '_';\n\t\n\tprivate ProductService productService;\n\tprivate SpecificationService specificationService;\n\t\n\t@Getter @Setter\n\tprivate ProductDTO productDTO;\n\t@Getter @Setter\n\tprivate BrandDTO brandDTO;\n\t@Getter @Setter\n\tprivate ImageDTO productImageDTO;\n\t@Getter @Setter\n\tprivate ImageDTO brandImageDTO;\n\t@Getter @Setter\n\tprivate String productImageName;\n\t@Getter @Setter\n\tprivate String brandImageName;\n\t@Getter @Setter\n\tprivate long productId;\n\t@Getter @Setter\n\tprivate String productName;\n\t@Getter @Setter\n\tprivate String desc;\t\n\t@Getter @Setter\n\tprivate String spec;\n\t@Getter @Setter\n\tprivate String other;\n\t@Getter @Setter\n\tprivate String loyaltyProductId;\n\t@Getter @Setter\n\tprivate String weight;\n\t@Getter @Setter\n\tprivate String w;\n\t@Getter @Setter\n\tprivate String l;\n\t@Getter @Setter\n\tprivate String h;\t\n\t@Getter @Setter\n\tprivate String modelNumber;\n\t@Getter @Setter\n\tprivate String price;\t\n\t@Getter @Setter\n\tprivate String msrp;\n\t@Getter @Setter\n\tprivate String discount;\n\t@Getter @Setter\n\tprivate String percentage;\t\n\t@Getter @Setter\n\tprivate String productBreadcrumb;\n\t@Getter @Setter\n\tprivate String groupName;\n\t@Getter @Setter\n\tprivate String groupHL;\n\t@Getter @Setter\n\tprivate String categoryName;\n\t@Getter @Setter\n\tprivate String categoryHL;\n\t@Getter @Setter\n\tprivate String specName;\n\t@Getter @Setter\n\tprivate String specHL;\t\n\t@Getter @Setter\n\tprivate String warranty;\t\n\t@Getter @Setter\n\tprivate String hrefName;\n\t@Getter @Setter\n\tprivate String link;\n\t@Getter @Setter\n\tprivate String warning;\n\t@Getter @Setter\n\tprivate String warning2;\t\n\t@Getter @Setter\n\tprivate String writeWarning;\n\t@Getter @Setter\n\tprivate String loyaltyProductIdSub;\n\t@Getter @Setter\n\tprivate String newLSProductIdSubHRef;\n\t\n\t@Getter @Setter\n\tprivate String sendRestricted;\n\t\n\t@Getter @Setter\n\tprivate int numberOfProductModelElements;\n\t\n\t@Getter @Setter\n\tprivate List<ShippingTotalDTO> provinceNameList;\n\t@Getter @Setter\n\tprivate String[] provinceName;\t\n\t@Getter @Setter\n\tString[] shippingCost;\n\t@Getter @Setter\n\tprivate String shippingTotalCanada;\n\t\n\tpublic Product() throws ServiceLocatorException {\n\t\tsuper();\n\t\tproductService = getServiceLocator().getProductService();\t\t\n\t\tspecificationService = getServiceLocator().getSpecificationService();\n\t}\t\n\t\n\t@Override  \n\tpublic String execute() throws Exception {\n\t\ttry {\n\t\t\tUserSessionDTO userSessionDTO = (UserSessionDTO)request.getSession().getAttribute(WebConstants.USER);\n\t\t\t\n\t\t\tif (userSessionDTO != null) {\n\t\t\t\tproductDTO = productService.getProductInformation(productId, userSessionDTO.getId());\n\t\t\t\tproductBreadcrumb = ""Our Products"";\t\t\t\t\n\t\t\t} else {\n\t\t\t\tproductDTO = productService.getProductInformation(productId, null);\n\t\t\t\tproductBreadcrumb = ""Products"";\n\t\t\t}\n\t\t\t\n\t\t\tproductImageDTO = productDTO.getImage();\n\t\t\tproductImageName = productImageDTO != null ? productImageDTO.getName() : """";\n\t\t\t\n\t\t\tif (productDTO.getBrand() != null) {\n\t\t\t\tbrandDTO = productDTO.getBrand();\n\t\t\t\t\n\t\t\t\tproductDTO.getBrand().setHrefName(SeoUrlsMaker.getBrandUrl(brandDTO.getName(), brandDTO.getId()));\n\t\t\t\t\n\t\t\t\tif (brandDTO.getImage() != null) {\n\t\t\t\t\tbrandImageDTO = brandDTO.getImage();\n\t\t\t\t\tif (brandImageDTO != null) {\n\t\t\t\t\t\tbrandImageName = brandImageDTO.getName();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbrandImageName = """";\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tbrandImageName = """";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tbrandImageName = """";\n\t\t\t}\n\t\t\t\n\t\t\tif (getCurrentLanguage().equals(WebConstants.ENGLISH_LANGUAGE)) {\n\t\t\t\tproductName = productDTO.getNameEng().getName();\n\t\t\t\tdesc = productDTO.getDescriptionEng().getName();\n\t\t\t\tspec = productDTO.getSpecificationEng().getName();\n\t\t\t\tother = productDTO.getOtherEng().getName();\n\t\t\t\twarranty = (productDTO.getWarrantyEng() != null) ? productDTO.getWarrantyEng().getName() : """";\n\t\t\t} else if (getCurrentLanguage().equals(WebConstants.FRENCH_LANGUAGE)) { \n\t\t\t\tproductName = productDTO.getNameFr().getName();\n\t\t\t\tdesc = productDTO.getDescriptionFr().getName();\n\t\t\t\tspec = productDTO.getSpecificationFr().getName();\n\t\t\t\tother = productDTO.getSpecificationFr().getName();\n\t\t\t\twarranty = (productDTO.getWarrantyFr() != null) ? productDTO.getWarrantyFr().getName() : """";\n\t\t\t}\n\t\t\t\n\t\t\t//Link url \n\t\t\tif(productDTO.getLinkList().size() > 0)\n\t\t\t\tlink = productDTO.getLinkList().get(0).getLink();\n\n\t\t\tif (desc.indexOf(""<p></p>"") != -1 && desc.length() == 7) desc = desc.replaceAll(""<p></p>"", """");\n\t\t\tif (spec.indexOf(""<p></p>"") != -1 && spec.length() == 7) spec = spec.replaceAll(""<p></p>"", """");\n\t\t\t\n\t\t\tInteger status = productDTO.getStatus().getValue();\n\t\t\tif (status == ProductStatus.UNAVAILABLE.getValue()) {\n\t\t\t\twriteWarning = ""y2"";\n\t\t\t\twarning = ""PRODUCT TEMPORARILY UNAVAILABLE"";\n\t\t\t} else if (status == ProductStatus.DISCONTINUED.getValue()) {\n\t\t\t\twriteWarning = ""y3"";\n\t\t\t\tloyaltyProductIdSub = productDTO.getLoyaltyProductIdSub();\n\t\t\t\twarning = ""THIS PRODUCT IS DISCONTINUED"";\n\t\t\t\t\n\t\t\t\tif (!loyaltyProductIdSub.matches(""^\\\\s*$"")) {\n\t\t\t\t\twarning2 = ""Please view our suggested replacement: "";\n\t\t\t\t\tProductDTO newProductDTO = productService.getProductIdFromLSProductId(loyaltyProductIdSub);\n\t\t\t\t\tif (newProductDTO != null) {\n\t\t\t\t\t\tlong newProductId = newProductDTO.getId();\n\t\t\t\t\t\tString newBrandName = newProductDTO.getBrand().getName();\n\t\t\t\t\t\tString newProductName = """";\n\t\t\t\t\t\tif(getCurrentLanguage().equals(WebConstants.ENGLISH_LANGUAGE)) {\t\t\t\t\t\n\t\t\t\t\t\t\tnewProductName = newProductDTO.getNameEng().getName();\t\t\t\t\t\n\t\t\t\t\t\t} else if(getCurrentLanguage().equals(WebConstants.FRENCH_LANGUAGE)) {\n\t\t\t\t\t\t\tnewProductName = newProductDTO.getNameFr().getName();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnewLSProductIdSubHRef = SeoUrlsMaker.getProductUrl(newBrandName, newProductName, newProductId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tweight = productDTO.getWeight();\t\t\n\t\t\tif (weight != null) {\n\t\t\t\tweight = (!weight.matches(""^\\\\s*$"")) ? String.valueOf(weight) : """";\t\n\t\t\t} else {\n\t\t\t\tweight = """";\n\t\t\t}\n\t\t\t\n\t\t\tString width = productDTO.getWidth();\tw = (!width.equalsIgnoreCase(""0"")) ? String.valueOf(width) : """";\n\t\t\tString large = productDTO.getLarge();\tl = (!large.equalsIgnoreCase(""0"")) ? String.valueOf(large) : """";\t\n\t\t\tString high = productDTO.getHigh();\t\th = (!high.equalsIgnoreCase(""0""))  ? String.valueOf(high)  : """";\n\t\t\t\n\t\t\tif(productDTO.getManufactureProductList().size() >= 1) {\n\t\t\t\tmodelNumber= ((ProductModelDTO)productDTO.getManufactureProductList().get(0)).getName();\n\t\t\t} else {\n\t\t\t\tmodelNumber = """";\n\t\t\t}\n\t\t\tmodelNumber = ((ProductModelDTO)productDTO.getManufactureProductList().get(0)).getName();\t\t\t\n\t\t\t\n\t\t\tif (userSessionDTO != null) {\n\t\t\t\tList<UserProductPriceDTO> userProductPriceDTOList = productService.getUserProductPriceList(productId);\n\t\t\t\tfor (UserProductPriceDTO userProductPriceDTO : userProductPriceDTOList) {\n\t\t\t\t\tif (userSessionDTO.getId() == userProductPriceDTO.getUserId() && userProductPriceDTO.getExcluded()) {\n\t\t\t\t\t\tsendRestricted = ""restricted"";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tnumberOfProductModelElements = (productDTO.getManufactureProductList() != null) \n\t\t\t\t\t\t\t\t\t\t\t? productDTO.getManufactureProductList().size()\n\t\t\t\t\t\t\t\t\t\t\t: 0;\n\t\t\t\n\t\t\tprice = productDTO.getPriceProduct();\n\t\t\tmsrp = productDTO.getMsrp();\n\t\t\tpercentage = """";\n\t\t\tdiscount = """";\n\t\t\t\n\t\t\tdouble priceVal = 0d;\n\t\t\tdouble msrpVal = 0d;\n\t\t\tdouble discountVal = 0d;\n\t\t\tdouble percentageVal = 0d;\n\t\t\t\n\t\t\tif (userSessionDTO != null) {\t// User logged in!!!\t\t\t\t\n\t\t\t\tif (price != null) {\n\t\t\t\t\tif (!price.matches(""^\\\\s*$"") && !price.equalsIgnoreCase("""")) {\t\t\t\t\t\n\t\t\t\t\t\tpriceVal = Double.parseDouble(price);\n\t\t\t\t\t\tprice = ""$"" + format(priceVal, ""#,###.00"", ""en"", ""US"");\t\t\t\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpriceVal = 0d;\n\t\t\t\t\t\tprice = """";\n\t\t\t\t\t}\n\t\t\t\t}\t\t\t\t\n\t\t\t\tif (msrp != null) {\t\t\t\t\t\n\t\t\t\t\tif (!msrp.matches(""^\\\\s*$"") && !msrp.equalsIgnoreCase("""")) {\t\n\t\t\t\t\t\tmsrpVal = Double.parseDouble(msrp);\n\t\t\t\t\t\tmsrp = ""$"" + format(msrpVal, ""#,###.00"", ""en"", ""US"");\t\n\t\t\t\t\t\tdiscountVal = msrpVal - priceVal;\n\t\t\t\t\t\tdiscount = (discountVal != 0d) ? (""$"" + format(discountVal, ""#,###.00"", ""en"", ""US"")) : """";\t\t\t\t\t\n\t\t\t\t\t\tpercentageVal = (msrpVal != 0d) ? (100d * discountVal / msrpVal) : 0d;\n\t\t\t\t\t\tpercentage = (percentageVal != 0d) \n\t\t\t\t\t\t\t\t\t\t? ""("" + format(percentageVal, ""0.00"", ""en"", ""CA"") + ""%)"" \n\t\t\t\t\t\t\t\t\t\t: """" ;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdiscount = """";\n\t\t\t\t\t\tpercentage = """";\n\t\t\t\t\t\tmsrp = """";\n\t\t\t\t\t}\t\t\t\n\t\t\t\t}\t\t\t\n\t\t\t\tloyaltyProductId = concatenate(userSessionDTO.getCode(), productDTO.getLoyaltyProductId());\t\t\t\t\n\t\t\t} else {\t// User Not Logged-in!!!!\n\t\t\t\tif (msrp != null || !msrp.matches(""^\\\\s*$"")) {\n\t\t\t\t\tmsrpVal = Double.parseDouble(msrp);\n\t\t\t\t\tmsrp = ""$"" + format(msrpVal, ""#,###.00"", ""en"", ""US"");\n\t\t\t\t} else {\n\t\t\t\t\tmsrp = """";\t\t\n\t\t\t\t}\n\t\t\t\tloyaltyProductId = productDTO.getLoyaltyProductId();\n\t\t\t}\n\t\t\t\n\t\t\tlong groupId = productDTO.getCategory().getCategoryGoupeId();\n\t\t\tgroupName = groupId >= 1L \n\t\t\t\t\t\t? GroupCategoryEnum.values()[((int) groupId) - 1].getCode() \n\t\t\t\t\t\t: """";\n\t\t\tgroupHL = SeoUrlsMaker.getCategoryGroupUrl(groupName);\n\t\t\tlong categoryID = productDTO.getCategory().getId();\n\t\t\tcategoryName = productDTO.getCategory().getName();\n\t\t\tcategoryHL = SeoUrlsMaker.getCategoryUrl(groupName, categoryName, categoryID);\n\t\t\tlong specId = productDTO.getMainFilterTypeId();\n\t\t\tSpecificationDTO specDTO = specificationService.getSpecification(specId);\t\t\t\n\t\t\t\n\t\t\tspecName = specDTO.getName();\n\t\t\tspecHL = SeoUrlsMaker.getSpecificationUrl(groupName, categoryName, specName, specId);\n\t\t\t\n\t\t\trequest.getSession(true).setAttribute(""queryID"", groupId);\t\t\t\n\t\t\trequest.getSession(true).setAttribute(""productBreadcrumb"", productBreadcrumb);\n\t\t\trequest.getSession(true).setAttribute(""groupName"", groupName);\n\t\t\trequest.getSession(true).setAttribute(""groupHL"", groupHL);\n\t\t\trequest.getSession(true).setAttribute(""categoryName"", categoryName);\n\t\t\trequest.getSession(true).setAttribute(""categoryHL"", categoryHL);\n\t\t\trequest.getSession(true).setAttribute(""specName"", specName);\n\t\t\trequest.getSession(true).setAttribute(""specHL"", specHL);\n\t\t\t\n\t\t\t//Set information title\n\t\t\trequest.setAttribute(RequestAtributeConstants.PAGE_TITLE_PARAM_1, productName);\n\t\t\trequest.setAttribute(RequestAtributeConstants.PAGE_TITLE_PARAM_2, brandDTO.getName());\n\t\t\t\n\t\t\t\n\t\t\tif (userSessionDTO != null) {\n\t\t\t\tlong userId = userSessionDTO.getId();\n\t\t\t\tprovinceNameList = productService.getShippingTotalList(productId, userId);\n\t\t\t\tfinal int SIZE = provinceNameList.size();\n\t\t\t\tprovinceName = new String[SIZE];\n\t\t\t\tshippingCost = new String[SIZE];\t\n\t\t\t\t\n\t\t\t\tProvinceDTO provinceDTO = new ProvinceDTO();\n\t\t\t\tlong provinceId = 0L;\n\t\t\t\tint count = 0;\n\t\t\t\tString $ = ""$"";\n\t\t\t\tfor (ShippingTotalDTO shippingTotalDTO : provinceNameList) {\n\t\t\t\t\tprovinceId = shippingTotalDTO.getProvinceId();\n\t\t\t\t\tprovinceDTO = productService.getProvince(provinceId);\n\t\t\t\t\tprovinceName[count] = provinceDTO.getCode();\n\t\t\t\t\tif (!shippingTotalDTO.getAverageShippingTotal().trim()\n\t\t\t\t\t\t\t.equalsIgnoreCase(""NOT AVAILABLE"")) {\n\t\t\t\t\t\tshippingCost[count] = $ + shippingTotalDTO.getAverageShippingTotal();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshippingCost[count] = ""N/A"";\n\t\t\t\t\t}\n\t\t\t\t\t++count;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tUserProductPriceDTO userProductPriceDTO = productService.getUserProductPriceInformation(productId, userId);\n\t\t\t\t\n\t\t\t\tshippingTotalCanada = userProductPriceDTO.getShippingTotalCanada();\n\t\t\t\tdouble shippingCanada = 0d;\n\t\t\t\tif (shippingTotalCanada != null || !shippingTotalCanada.matches(""^\\\\s*$"")) {\n\t\t\t\t\tshippingCanada = Double.parseDouble(shippingTotalCanada);\n\t\t\t\t\tshippingTotalCanada = ""$"" + format(shippingCanada, ""#,###.00"", ""en"", ""US"");\n\t\t\t\t} else {\n\t\t\t\t\tshippingTotalCanada = """";\n\t\t\t\t}\n\t\t\t}\t\t\t\n\t\t\t\n\t\t} catch(ServiceException e) {\n\t\t\tlog.debug(""Service Error when loading file"");\n\t\t\taddActionError(getText(""loyauty.error.common.service""));\n\t\t} catch (Exception e) {\n\t\t\taddActionError(getText(""loyauty.error.common.service""));\n\t\t}\t\t\n\t\treturn SUCCESS;\n\t}\n\t\n\tprivate String format(double value, String pattern, String language, String country) {\n\t\tLocale loc = new Locale(language, country);\n\t\tNumberFormat nf = NumberFormat.getInstance(loc);\n\t\tDecimalFormat df = (DecimalFormat) nf;\n\t\tdf.applyPattern(pattern);\n\t\treturn nf.format(value);\n\t}\n\t\n\tprivate int countBackRepeatsFromLast(String inputLeft) {\n\t\tint numberOfRepeats = 0;\n\t\tint pointer = inputLeft.length() - 1;\n\t\twhile (inputLeft.charAt(pointer) == CHAR_PATTERN_THAT_REPEATS) {\n\t\t\tif (inputLeft.charAt(pointer) == CHAR_PATTERN_THAT_REPEATS) ++numberOfRepeats;\n\t\t\tif (pointer == 0) break;\n\t\t\t-- pointer;\n\t\t}\n\t\treturn numberOfRepeats;\n\t}\n\t\n\tprivate int countForthRepeatsFromFirst(String inputRight) {\n\t\tint numberOfRepeats = 0;\n\t\tint pointer = 0;\n\t\twhile (inputRight.charAt(pointer) == CHAR_PATTERN_THAT_REPEATS) {\n\t\t\tif (inputRight.charAt(pointer) == CHAR_PATTERN_THAT_REPEATS) ++numberOfRepeats;\n\t\t\tif (pointer == inputRight.length() - 1) break;\n\t\t\t++pointer;\n\t\t}\n\t\treturn numberOfRepeats;\n\t}\n\t\n\tprivate boolean areThereRepeatsBackLeft(String inputLeft) {\n\t\treturn (countBackRepeatsFromLast(inputLeft) > 0);\n\t}\n\t\n\tprivate boolean areThereRepeatsForthRight(String inputRight) {\n\t\treturn (countForthRepeatsFromFirst(inputRight) > 0);\n\t}\n\t\n\tprivate String concatenate(String inputLeft, String inputRight) {\n\t\tString l = """", union = """", r = """";\n\t\tString leftChar = """", rightChar = """";\n\t\t\n\t\tif (inputLeft.equalsIgnoreCase("""") && inputRight.equalsIgnoreCase("""")) {\n\t\t\treturn """";\n\t\t}\n\t\t\n\t\tif (areThereRepeatsBackLeft(inputLeft)) {\n\t\t\tif (countBackRepeatsFromLast(inputLeft) == inputLeft.length()) {\n\t\t\t\tinputLeft = UNION;\n\t\t\t} else {\t// countBackRepeatsFromLast(inputLeft) < inputLeft.length()\n\t\t\t\tint info = inputLeft.length() - countBackRepeatsFromLast(inputLeft);\n\t\t\t\tinputLeft = inputLeft.substring(0, info + 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (areThereRepeatsForthRight(inputRight)) {\n\t\t\tif (countForthRepeatsFromFirst(inputRight) == inputRight.length()) {\n\t\t\t\tinputRight = UNION;\n\t\t\t} else {\t// countForthRepeatsFromFirst(inputRight) < inputRight.length()\n\t\t\t\tinputRight = inputRight.substring(countForthRepeatsFromFirst(inputRight) - 1, inputRight.length());\n\t\t\t}\n\t\t}\n\t\t\n\t\tleftChar = (inputLeft.length() > 0) ? inputLeft.substring(inputLeft.length() - 1) : """";\n\t\trightChar = (inputRight.length() > 0) ? inputRight.substring(0, 1) : """";\n\t\tif (inputLeft.length() > 0 && inputRight.length() > 0) {\t\t\t\n\t\t\tunion = UNION;\n\t\t\tif (leftChar.equalsIgnoreCase(UNION) && !rightChar.equalsIgnoreCase(UNION)) {\n\t\t\t\tl = inputLeft.substring(0, inputLeft.length() - 1);\n\t\t\t\tr = inputRight;\n\t\t\t} else if (!leftChar.equalsIgnoreCase(UNION) && rightChar.equalsIgnoreCase(UNION)) {\n\t\t\t\tl = inputLeft;\n\t\t\t\tr = inputRight.substring(1, inputRight.length());\n\t\t\t} else if (leftChar.equalsIgnoreCase(UNION) && rightChar.equalsIgnoreCase(UNION)) {\n\t\t\t\tl = inputLeft.substring(0, inputLeft.length() - 1);\n\t\t\t\tr = inputRight.substring(1, inputRight.length());\t\n\t\t\t} else {\n\t\t\t\tl = inputLeft;\n\t\t\t\tr = inputRight;\n\t\t\t}\t\t\t\n\t\t} else if (inputLeft.length() == 0 && inputRight.length() > 0) {\n\t\t\tl = """";\n\t\t\tunion = """";\n\t\t\tr = inputRight;\t\t\t\t\n\t\t} else if (inputLeft.length() > 0 && inputRight.length() == 0) {\n\t\t\tl = inputLeft;\n\t\t\tunion = """";\n\t\t\tr = """";\t\t\t\t\n\t\t} else if (inputLeft.length() == 0 && inputRight.length() == 0) {\n\t\t\t\tl = union = r = """";\n\t\t}\n\t\treturn (l + union + r);\n\t}\n\t\t\n}\n\n----------------------------------- SOURCE END -------------------------------------",1398562709065
error,log,,,"Problems occurred when invoking code from plug-in: ""org.eclipse.jdt.ui"".",1398562709065
error,log,,,"Error in JDT Core during reconcile",1398562709066
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1398562710065
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1398562712787
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.undo",1398562715893
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.cut",1398562723247
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.file.save",1398562725293
error,log,,,"Exception occurred during problem detection:\n----------------------------------- SOURCE BEGIN -------------------------------------\npackage com.loyauty.web.struts.action.product;\n\nimport java.text.DecimalFormat;\nimport java.text.NumberFormat;\nimport java.util.Locale;\nimport java.util.List;\n\nimport lombok.Getter;\nimport lombok.Setter;\n\nimport com.loyauty.enums.GroupCategoryEnum;\nimport com.loyauty.enums.ProductStatus;\nimport com.loyauty.enums.UserType;\nimport com.loyauty.exception.ServiceException;\nimport com.loyauty.exception.ServiceLocatorException;\nimport com.loyauty.model.UserProductPrice;\nimport com.loyauty.service.core.dto.ImageDTO;\nimport com.loyauty.service.core.dto.BrandDTO;\nimport com.loyauty.service.core.dto.ProductDTO;\nimport com.loyauty.service.core.dto.ProvinceDTO;\nimport com.loyauty.service.core.dto.ShippingTotalDTO;\nimport com.loyauty.service.core.dto.ProductModelDTO;\nimport com.loyauty.service.core.dto.SpecificationDTO;\nimport com.loyauty.service.core.dto.UserProductPriceDTO;\nimport com.loyauty.service.core.dto.UserSessionDTO;\nimport com.loyauty.service.product.ProductService;\nimport com.loyauty.service.specification.SpecificationService;\nimport com.loyauty.web.RequestAtributeConstants;\nimport com.loyauty.web.WebConstants;\nimport com.loyauty.web.struts.action.LoyautyAction;\nimport com.loyauty.web.util.SeoUrlsMaker;\n\npublic class Product extends LoyautyAction {\n\t\n\tprivate static final long serialVersionUID = 1L;\n\t\n\tprivate static final String UNION = ""_"";\n\tprivate static final char CHAR_PATTERN_THAT_REPEATS = '_';\n\t\n\tprivate ProductService productService;\n\tprivate SpecificationService specificationService;\n\t\n\t@Getter @Setter\n\tprivate ProductDTO productDTO;\n\t@Getter @Setter\n\tprivate BrandDTO brandDTO;\n\t@Getter @Setter\n\tprivate ImageDTO productImageDTO;\n\t@Getter @Setter\n\tprivate ImageDTO brandImageDTO;\n\t@Getter @Setter\n\tprivate String productImageName;\n\t@Getter @Setter\n\tprivate String brandImageName;\n\t@Getter @Setter\n\tprivate long productId;\n\t@Getter @Setter\n\tprivate String productName;\n\t@Getter @Setter\n\tprivate String desc;\t\n\t@Getter @Setter\n\tprivate String spec;\n\t@Getter @Setter\n\tprivate String other;\n\t@Getter @Setter\n\tprivate String loyaltyProductId;\n\t@Getter @Setter\n\tprivate String weight;\n\t@Getter @Setter\n\tprivate String w;\n\t@Getter @Setter\n\tprivate String l;\n\t@Getter @Setter\n\tprivate String h;\t\n\t@Getter @Setter\n\tprivate String modelNumber;\n\t@Getter @Setter\n\tprivate String price;\t\n\t@Getter @Setter\n\tprivate String msrp;\n\t@Getter @Setter\n\tprivate String discount;\n\t@Getter @Setter\n\tprivate String percentage;\t\n\t@Getter @Setter\n\tprivate String productBreadcrumb;\n\t@Getter @Setter\n\tprivate String groupName;\n\t@Getter @Setter\n\tprivate String groupHL;\n\t@Getter @Setter\n\tprivate String categoryName;\n\t@Getter @Setter\n\tprivate String categoryHL;\n\t@Getter @Setter\n\tprivate String specName;\n\t@Getter @Setter\n\tprivate String specHL;\t\n\t@Getter @Setter\n\tprivate String warranty;\t\n\t@Getter @Setter\n\tprivate String hrefName;\n\t@Getter @Setter\n\tprivate String link;\n\t@Getter @Setter\n\tprivate String warning;\n\t@Getter @Setter\n\tprivate String warning2;\t\n\t@Getter @Setter\n\tprivate String writeWarning;\n\t@Getter @Setter\n\tprivate String loyaltyProductIdSub;\n\t@Getter @Setter\n\tprivate String newLSProductIdSubHRef;\n\t\n\t@Getter @Setter\n\tprivate String sendRestricted;\n\t\n\t@Getter @Setter\n\tprivate int numberOfProductModelElements;\n\t\n\t@Getter @Setter\n\tprivate List<ShippingTotalDTO> provinceNameList;\n\t@Getter @Setter\n\tprivate String[] provinceName;\t\n\t@Getter @Setter\n\tString[] shippingCost;\n\t@Getter @Setter\n\tprivate String shippingTotalCanada;\n\t\n\tpublic Product() throws ServiceLocatorException {\n\t\tsuper();\n\t\tproductService = getServiceLocator().getProductService();\t\t\n\t\tspecificationService = getServiceLocator().getSpecificationService();\n\t}\t\n\t\n\t@Override  \n\tpublic String execute() throws Exception {\n\t\ttry {\n\t\t\tUserSessionDTO userSessionDTO = (UserSessionDTO)request.getSession().getAttribute(WebConstants.USER);\n\t\t\t\n\t\t\tif (userSessionDTO != null) {\n\t\t\t\tproductDTO = productService.getProductInformation(productId, userSessionDTO.getId());\n\t\t\t\tproductBreadcrumb = ""Our Products"";\t\t\t\t\n\t\t\t} else {\n\t\t\t\tproductDTO = productService.getProductInformation(productId, null);\n\t\t\t\tproductBreadcrumb = ""Products"";\n\t\t\t}\n\t\t\t\n\t\t\tproductImageDTO = productDTO.getImage();\n\t\t\tproductImageName = productImageDTO != null ? productImageDTO.getName() : """";\n\t\t\t\n\t\t\tif (productDTO.getBrand() != null) {\n\t\t\t\tbrandDTO = productDTO.getBrand();\n\t\t\t\t\n\t\t\t\tproductDTO.getBrand().setHrefName(SeoUrlsMaker.getBrandUrl(brandDTO.getName(), brandDTO.getId()));\n\t\t\t\t\n\t\t\t\tif (brandDTO.getImage() != null) {\n\t\t\t\t\tbrandImageDTO = brandDTO.getImage();\n\t\t\t\t\tif (brandImageDTO != null) {\n\t\t\t\t\t\tbrandImageName = brandImageDTO.getName();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbrandImageName = """";\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tbrandImageName = """";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tbrandImageName = """";\n\t\t\t}\n\t\t\t\n\t\t\tif (getCurrentLanguage().equals(WebConstants.ENGLISH_LANGUAGE)) {\n\t\t\t\tproductName = productDTO.getNameEng().getName();\n\t\t\t\tdesc = productDTO.getDescriptionEng().getName();\n\t\t\t\tspec = productDTO.getSpecificationEng().getName();\n\t\t\t\tother = productDTO.getOtherEng().getName();\n\t\t\t\twarranty = (productDTO.getWarrantyEng() != null) ? productDTO.getWarrantyEng().getName() : """";\n\t\t\t} else if (getCurrentLanguage().equals(WebConstants.FRENCH_LANGUAGE)) { \n\t\t\t\tproductName = productDTO.getNameFr().getName();\n\t\t\t\tdesc = productDTO.getDescriptionFr().getName();\n\t\t\t\tspec = productDTO.getSpecificationFr().getName();\n\t\t\t\tother = productDTO.getSpecificationFr().getName();\n\t\t\t\twarranty = (productDTO.getWarrantyFr() != null) ? productDTO.getWarrantyFr().getName() : """";\n\t\t\t}\n\t\t\t\n\t\t\t//Link url \n\t\t\tif(productDTO.getLinkList().size() > 0)\n\t\t\t\tlink = productDTO.getLinkList().get(0).getLink();\n\n\t\t\tif (desc.indexOf(""<p></p>"") != -1 && desc.length() == 7) desc = desc.replaceAll(""<p></p>"", """");\n\t\t\tif (spec.indexOf(""<p></p>"") != -1 && spec.length() == 7) spec = spec.replaceAll(""<p></p>"", """");\n\t\t\t\n\t\t\tInteger status = productDTO.getStatus().getValue();\n\t\t\tif (status == ProductStatus.UNAVAILABLE.getValue()) {\n\t\t\t\twriteWarning = ""y2"";\n\t\t\t\twarning = ""PRODUCT TEMPORARILY UNAVAILABLE"";\n\t\t\t} else if (status == ProductStatus.DISCONTINUED.getValue()) {\n\t\t\t\twriteWarning = ""y3"";\n\t\t\t\tloyaltyProductIdSub = productDTO.getLoyaltyProductIdSub();\n\t\t\t\twarning = ""THIS PRODUCT IS DISCONTINUED"";\n\t\t\t\t\n\t\t\t\tif (!loyaltyProductIdSub.matches(""^\\\\s*$"")) {\n\t\t\t\t\twarning2 = ""Please view our suggested replacement: "";\n\t\t\t\t\tProductDTO newProductDTO = productService.getProductIdFromLSProductId(loyaltyProductIdSub);\n\t\t\t\t\tif (newProductDTO != null) {\n\t\t\t\t\t\tlong newProductId = newProductDTO.getId();\n\t\t\t\t\t\tString newBrandName = newProductDTO.getBrand().getName();\n\t\t\t\t\t\tString newProductName = """";\n\t\t\t\t\t\tif(getCurrentLanguage().equals(WebConstants.ENGLISH_LANGUAGE)) {\t\t\t\t\t\n\t\t\t\t\t\t\tnewProductName = newProductDTO.getNameEng().getName();\t\t\t\t\t\n\t\t\t\t\t\t} else if(getCurrentLanguage().equals(WebConstants.FRENCH_LANGUAGE)) {\n\t\t\t\t\t\t\tnewProductName = newProductDTO.getNameFr().getName();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnewLSProductIdSubHRef = SeoUrlsMaker.getProductUrl(newBrandName, newProductName, newProductId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tweight = productDTO.getWeight();\t\t\n\t\t\tif (weight != null) {\n\t\t\t\tweight = (!weight.matches(""^\\\\s*$"")) ? String.valueOf(weight) : """";\t\n\t\t\t} else {\n\t\t\t\tweight = """";\n\t\t\t}\n\t\t\t\n\t\t\tString width = productDTO.getWidth();\tw = (!width.equalsIgnoreCase(""0"")) ? String.valueOf(width) : """";\n\t\t\tString large = productDTO.getLarge();\tl = (!large.equalsIgnoreCase(""0"")) ? String.valueOf(large) : """";\t\n\t\t\tString high = productDTO.getHigh();\t\th = (!high.equalsIgnoreCase(""0""))  ? String.valueOf(high)  : """";\n\t\t\t\n\t\t\tif(productDTO.getManufactureProductList().size() >= 1) {\n\t\t\t\tmodelNumber= ((ProductModelDTO)productDTO.getManufactureProductList().get(0)).getName();\n\t\t\t} else {\n\t\t\t\tmodelNumber = """";\n\t\t\t}\n\t\t\tmodelNumber = ((ProductModelDTO)productDTO.getManufactureProductList().get(0)).getName();\t\t\t\n\t\t\t\n\t\t\tif (userSessionDTO != null) {\n\t\t\t\tList<UserProductPriceDTO> userProductPriceDTOList = productService.getUserProductPriceList(productId);\n\t\t\t\tfor (UserProductPriceDTO userProductPriceDTO : userProductPriceDTOList) {\n\t\t\t\t\tif (userSessionDTO.getId() == userProductPriceDTO.getUserId() && userProductPriceDTO.getExcluded()) {\n\t\t\t\t\t\tsendRestricted = ""restricted"";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tnumberOfProductModelElements = (productDTO.getManufactureProductList() != null) \n\t\t\t\t\t\t\t\t\t\t\t? productDTO.getManufactureProductList().size()\n\t\t\t\t\t\t\t\t\t\t\t: 0;\n\t\t\t\n\t\t\tprice = productDTO.getPriceProduct();\n\t\t\tmsrp = productDTO.getMsrp();\n\t\t\tpercentage = """";\n\t\t\tdiscount = """";\n\t\t\t\n\t\t\tdouble priceVal = 0d;\n\t\t\tdouble msrpVal = 0d;\n\t\t\tdouble discountVal = 0d;\n\t\t\tdouble percentageVal = 0d;\n\t\t\t\n\t\t\tif (userSessionDTO != null) {\t// User logged in!!!\t\t\t\t\n\t\t\t\tif (price != null) {\n\t\t\t\t\tif (!price.matches(""^\\\\s*$"") && !price.equalsIgnoreCase("""")) {\t\t\t\t\t\n\t\t\t\t\t\tpriceVal = Double.parseDouble(price);\n\t\t\t\t\t\tprice = ""$"" + format(priceVal, ""#,###.00"", ""en"", ""US"");\t\t\t\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpriceVal = 0d;\n\t\t\t\t\t\tprice = """";\n\t\t\t\t\t}\n\t\t\t\t}\t\t\t\t\n\t\t\t\tif (msrp != null) {\t\t\t\t\t\n\t\t\t\t\tif (!msrp.matches(""^\\\\s*$"") && !msrp.equalsIgnoreCase("""")) {\t\n\t\t\t\t\t\tmsrpVal = Double.parseDouble(msrp);\n\t\t\t\t\t\tmsrp = ""$"" + format(msrpVal, ""#,###.00"", ""en"", ""US"");\t\n\t\t\t\t\t\tdiscountVal = msrpVal - priceVal;\n\t\t\t\t\t\tdiscount = (discountVal != 0d) ? (""$"" + format(discountVal, ""#,###.00"", ""en"", ""US"")) : """";\t\t\t\t\t\n\t\t\t\t\t\tpercentageVal = (msrpVal != 0d) ? (100d * discountVal / msrpVal) : 0d;\n\t\t\t\t\t\tpercentage = (percentageVal != 0d) \n\t\t\t\t\t\t\t\t\t\t? ""("" + format(percentageVal, ""0.00"", ""en"", ""CA"") + ""%)"" \n\t\t\t\t\t\t\t\t\t\t: """" ;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdiscount = """";\n\t\t\t\t\t\tpercentage = """";\n\t\t\t\t\t\tmsrp = """";\n\t\t\t\t\t}\t\t\t\n\t\t\t\t}\t\t\t\n\t\t\t\tloyaltyProductId = concatenate(userSessionDTO.getCode(), productDTO.getLoyaltyProductId());\t\t\t\t\n\t\t\t} else {\t// User Not Logged-in!!!!\n\t\t\t\tif (msrp != null || !msrp.matches(""^\\\\s*$"")) {\n\t\t\t\t\tmsrpVal = Double.parseDouble(msrp);\n\t\t\t\t\tmsrp = ""$"" + format(msrpVal, ""#,###.00"", ""en"", ""US"");\n\t\t\t\t} else {\n\t\t\t\t\tmsrp = """";\t\t\n\t\t\t\t}\n\t\t\t\tloyaltyProductId = productDTO.getLoyaltyProductId();\n\t\t\t}\n\t\t\t\n\t\t\tlong groupId = productDTO.getCategory().getCategoryGoupeId();\n\t\t\tgroupName = groupId >= 1L \n\t\t\t\t\t\t? GroupCategoryEnum.values()[((int) groupId) - 1].getCode() \n\t\t\t\t\t\t: """";\n\t\t\tgroupHL = SeoUrlsMaker.getCategoryGroupUrl(groupName);\n\t\t\tlong categoryID = productDTO.getCategory().getId();\n\t\t\tcategoryName = productDTO.getCategory().getName();\n\t\t\tcategoryHL = SeoUrlsMaker.getCategoryUrl(groupName, categoryName, categoryID);\n\t\t\tlong specId = productDTO.getMainFilterTypeId();\n\t\t\tSpecificationDTO specDTO = specificationService.getSpecification(specId);\t\t\t\n\t\t\t\n\t\t\tspecName = specDTO.getName();\n\t\t\tspecHL = SeoUrlsMaker.getSpecificationUrl(groupName, categoryName, specName, specId);\n\t\t\t\n\t\t\trequest.getSession(true).setAttribute(""queryID"", groupId);\t\t\t\n\t\t\trequest.getSession(true).setAttribute(""productBreadcrumb"", productBreadcrumb);\n\t\t\trequest.getSession(true).setAttribute(""groupName"", groupName);\n\t\t\trequest.getSession(true).setAttribute(""groupHL"", groupHL);\n\t\t\trequest.getSession(true).setAttribute(""categoryName"", categoryName);\n\t\t\trequest.getSession(true).setAttribute(""categoryHL"", categoryHL);\n\t\t\trequest.getSession(true).setAttribute(""specName"", specName);\n\t\t\trequest.getSession(true).setAttribute(""specHL"", specHL);\n\t\t\t\n\t\t\t//Set information title\n\t\t\trequest.setAttribute(RequestAtributeConstants.PAGE_TITLE_PARAM_1, productName);\n\t\t\trequest.setAttribute(RequestAtributeConstants.PAGE_TITLE_PARAM_2, brandDTO.getName());\n\t\t\t\n\t\t\t\n\t\t\tif (userSessionDTO != null) {\n\t\t\t\tlong userId = userSessionDTO.getId();\n\t\t\t\tprovinceNameList = productService.getShippingTotalList(productId, userId);\n\t\t\t\tfinal int SIZE = provinceNameList.size();\n\t\t\t\tprovinceName = new String[SIZE];\n\t\t\t\tshippingCost = new String[SIZE];\t\n\t\t\t\t\n\t\t\t\tProvinceDTO provinceDTO = new ProvinceDTO();\n\t\t\t\tlong provinceId = 0L;\n\t\t\t\tint count = 0;\n\t\t\t\tString $ = ""$"";\n\t\t\t\tfor (ShippingTotalDTO shippingTotalDTO : provinceNameList) {\n\t\t\t\t\tprovinceId = shippingTotalDTO.getProvinceId();\n\t\t\t\t\tprovinceDTO = productService.getProvince(provinceId);\n\t\t\t\t\tprovinceName[count] = provinceDTO.getCode();\n\t\t\t\t\tif (!shippingTotalDTO.getAverageShippingTotal().trim()\n\t\t\t\t\t\t\t.equalsIgnoreCase(""NOT AVAILABLE"")) {\n\t\t\t\t\t\tshippingCost[count] = $ + shippingTotalDTO.getAverageShippingTotal();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshippingCost[count] = ""N/A"";\n\t\t\t\t\t}\n\t\t\t\t\t++count;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tUserProductPriceDTO userProductPriceDTO = productService.getUserProductPriceInformation(productId, userId);\n\t\t\t\t\n\t\t\t\tshippingTotalCanada = userProductPriceDTO.getShippingTotalCanada();\n\t\t\t\tdouble shippingCanada = 0d;\n\t\t\t\tif (shippingTotalCanada != null || !shippingTotalCanada.matches(""^\\\\s*$"")) {\n\t\t\t\t\tshippingCanada = Double.parseDouble(shippingTotalCanada);\n\t\t\t\t\tshippingTotalCanada = ""$"" + format(shippingCanada, ""#,###.00"", ""en"", ""US"");\n\t\t\t\t} else {\n\t\t\t\t\tshippingTotalCanada = """";\n\t\t\t\t}\n\t\t\t}\t\t\t\n\t\t\t\n\t\t} catch(ServiceException e) {\n\t\t\tlog.debug(""Service Error when loading file"");\n\t\t\taddActionError(getText(""loyauty.error.common.service""));\n\t\t} catch (Exception e) {\n\t\t\taddActionError(getText(""loyauty.error.common.service""));\n\t\t}\t\t\n\t\treturn SUCCESS;\n\t}\n\t\n\tprivate String format(double value, String pattern, String language, String country) {\n\t\tLocale loc = new Locale(language, country);\n\t\tNumberFormat nf = NumberFormat.getInstance(loc);\n\t\tDecimalFormat df = (DecimalFormat) nf;\n\t\tdf.applyPattern(pattern);\n\t\treturn nf.format(value);\n\t}\n\t\n\tprivate int countBackRepeatsFromLast(String inputLeft) {\n\t\tint numberOfRepeats = 0;\n\t\tint pointer = inputLeft.length() - 1;\n\t\twhile (inputLeft.charAt(pointer) == CHAR_PATTERN_THAT_REPEATS) {\n\t\t\tif (inputLeft.charAt(pointer) == CHAR_PATTERN_THAT_REPEATS) ++numberOfRepeats;\n\t\t\tif (pointer == 0) break;\n\t\t\t-- pointer;\n\t\t}\n\t\treturn numberOfRepeats;\n\t}\n\t\n\tprivate int countForthRepeatsFromFirst(String inputRight) {\n\t\tint numberOfRepeats = 0;\n\t\tint pointer = 0;\n\t\twhile (inputRight.charAt(pointer) == CHAR_PATTERN_THAT_REPEATS) {\n\t\t\tif (inputRight.charAt(pointer) == CHAR_PATTERN_THAT_REPEATS) ++numberOfRepeats;\n\t\t\tif (pointer == inputRight.length() - 1) break;\n\t\t\t++pointer;\n\t\t}\n\t\treturn numberOfRepeats;\n\t}\n\t\n\tprivate boolean areThereRepeatsBackLeft(String inputLeft) {\n\t\treturn (countBackRepeatsFromLast(inputLeft) > 0);\n\t}\n\t\n\tprivate boolean areThereRepeatsForthRight(String inputRight) {\n\t\treturn (countForthRepeatsFromFirst(inputRight) > 0);\n\t}\n\t\n\tprivate String concatenate(String inputLeft, String inputRight) {\n\t\tString l = """", union = """", r = """";\n\t\tString leftChar = """", rightChar = """";\n\t\t\n\t\tif (inputLeft.equalsIgnoreCase("""") && inputRight.equalsIgnoreCase("""")) {\n\t\t\treturn """";\n\t\t}\n\t\t\n\t\tif (areThereRepeatsBackLeft(inputLeft)) {\n\t\t\tif (countBackRepeatsFromLast(inputLeft) == inputLeft.length()) {\n\t\t\t\tinputLeft = UNION;\n\t\t\t} else {\t// countBackRepeatsFromLast(inputLeft) < inputLeft.length()\n\t\t\t\tint info = inputLeft.length() - countBackRepeatsFromLast(inputLeft);\n\t\t\t\tinputLeft = inputLeft.substring(0, info + 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (areThereRepeatsForthRight(inputRight)) {\n\t\t\tif (countForthRepeatsFromFirst(inputRight) == inputRight.length()) {\n\t\t\t\tinputRight = UNION;\n\t\t\t} else {\t// countForthRepeatsFromFirst(inputRight) < inputRight.length()\n\t\t\t\tinputRight = inputRight.substring(countForthRepeatsFromFirst(inputRight) - 1, inputRight.length());\n\t\t\t}\n\t\t}\n\t\t\n\t\tleftChar = (inputLeft.length() > 0) ? inputLeft.substring(inputLeft.length() - 1) : """";\n\t\trightChar = (inputRight.length() > 0) ? inputRight.substring(0, 1) : """";\n\t\tif (inputLeft.length() > 0 && inputRight.length() > 0) {\t\t\t\n\t\t\tunion = UNION;\n\t\t\tif (leftChar.equalsIgnoreCase(UNION) && !rightChar.equalsIgnoreCase(UNION)) {\n\t\t\t\tl = inputLeft.substring(0, inputLeft.length() - 1);\n\t\t\t\tr = inputRight;\n\t\t\t} else if (!leftChar.equalsIgnoreCase(UNION) && rightChar.equalsIgnoreCase(UNION)) {\n\t\t\t\tl = inputLeft;\n\t\t\t\tr = inputRight.substring(1, inputRight.length());\n\t\t\t} else if (leftChar.equalsIgnoreCase(UNION) && rightChar.equalsIgnoreCase(UNION)) {\n\t\t\t\tl = inputLeft.substring(0, inputLeft.length() - 1);\n\t\t\t\tr = inputRight.substring(1, inputRight.length());\t\n\t\t\t} else {\n\t\t\t\tl = inputLeft;\n\t\t\t\tr = inputRight;\n\t\t\t}\t\t\t\n\t\t} else if (inputLeft.length() == 0 && inputRight.length() > 0) {\n\t\t\tl = """";\n\t\t\tunion = """";\n\t\t\tr = inputRight;\t\t\t\t\n\t\t} else if (inputLeft.length() > 0 && inputRight.length() == 0) {\n\t\t\tl = inputLeft;\n\t\t\tunion = """";\n\t\t\tr = """";\t\t\t\t\n\t\t} else if (inputLeft.length() == 0 && inputRight.length() == 0) {\n\t\t\t\tl = union = r = """";\n\t\t}\n\t\treturn (l + union + r);\n\t}\n\t\t\n}\n\n----------------------------------- SOURCE END -------------------------------------",1398562726612
error,log,,,"Problems occurred when invoking code from plug-in: ""org.eclipse.jdt.ui"".",1398562726613
error,log,,,"Error in JDT Core during reconcile",1398562726614
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1398562731503
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1398562732836
executed,command,org.eclipse.ui.ide,3.6.2.M20101201-0800,"org.eclipse.ui.project.cleanAction",1398562732851
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1398562733124
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1398562733409
error,log,,,"Problems occurred when invoking code from plug-in: ""org.eclipse.core.resources"".",1398562734045
error,log,,,"Errors occurred during the build.",1398562734195
error,log,,,"Exception occurred during problem detection:\n----------------------------------- SOURCE BEGIN -------------------------------------\npackage com.loyauty.web.struts.action.product;\n\nimport java.text.DecimalFormat;\nimport java.text.NumberFormat;\nimport java.util.Locale;\nimport java.util.List;\n\nimport lombok.Getter;\nimport lombok.Setter;\n\nimport com.loyauty.enums.GroupCategoryEnum;\nimport com.loyauty.enums.ProductStatus;\nimport com.loyauty.enums.UserType;\nimport com.loyauty.exception.ServiceException;\nimport com.loyauty.exception.ServiceLocatorException;\nimport com.loyauty.model.UserProductPrice;\nimport com.loyauty.service.core.dto.ImageDTO;\nimport com.loyauty.service.core.dto.BrandDTO;\nimport com.loyauty.service.core.dto.ProductDTO;\nimport com.loyauty.service.core.dto.ProvinceDTO;\nimport com.loyauty.service.core.dto.ShippingTotalDTO;\nimport com.loyauty.service.core.dto.ProductModelDTO;\nimport com.loyauty.service.core.dto.SpecificationDTO;\nimport com.loyauty.service.core.dto.UserProductPriceDTO;\nimport com.loyauty.service.core.dto.UserSessionDTO;\nimport com.loyauty.service.product.ProductService;\nimport com.loyauty.service.specification.SpecificationService;\nimport com.loyauty.web.RequestAtributeConstants;\nimport com.loyauty.web.WebConstants;\nimport com.loyauty.web.struts.action.LoyautyAction;\nimport com.loyauty.web.util.SeoUrlsMaker;\n\npublic class Product extends LoyautyAction {\n\t\n\tprivate static final long serialVersionUID = 1L;\n\t\n\tprivate static final String UNION = ""_"";\n\tprivate static final char CHAR_PATTERN_THAT_REPEATS = '_';\n\t\n\tprivate ProductService productService;\n\tprivate SpecificationService specificationService;\n\t\n\t@Getter @Setter\n\tprivate ProductDTO productDTO;\n\t@Getter @Setter\n\tprivate BrandDTO brandDTO;\n\t@Getter @Setter\n\tprivate ImageDTO productImageDTO;\n\t@Getter @Setter\n\tprivate ImageDTO brandImageDTO;\n\t@Getter @Setter\n\tprivate String productImageName;\n\t@Getter @Setter\n\tprivate String brandImageName;\n\t@Getter @Setter\n\tprivate long productId;\n\t@Getter @Setter\n\tprivate String productName;\n\t@Getter @Setter\n\tprivate String desc;\t\n\t@Getter @Setter\n\tprivate String spec;\n\t@Getter @Setter\n\tprivate String other;\n\t@Getter @Setter\n\tprivate String loyaltyProductId;\n\t@Getter @Setter\n\tprivate String weight;\n\t@Getter @Setter\n\tprivate String w;\n\t@Getter @Setter\n\tprivate String l;\n\t@Getter @Setter\n\tprivate String h;\t\n\t@Getter @Setter\n\tprivate String modelNumber;\n\t@Getter @Setter\n\tprivate String price;\t\n\t@Getter @Setter\n\tprivate String msrp;\n\t@Getter @Setter\n\tprivate String discount;\n\t@Getter @Setter\n\tprivate String percentage;\t\n\t@Getter @Setter\n\tprivate String productBreadcrumb;\n\t@Getter @Setter\n\tprivate String groupName;\n\t@Getter @Setter\n\tprivate String groupHL;\n\t@Getter @Setter\n\tprivate String categoryName;\n\t@Getter @Setter\n\tprivate String categoryHL;\n\t@Getter @Setter\n\tprivate String specName;\n\t@Getter @Setter\n\tprivate String specHL;\t\n\t@Getter @Setter\n\tprivate String warranty;\t\n\t@Getter @Setter\n\tprivate String hrefName;\n\t@Getter @Setter\n\tprivate String link;\n\t@Getter @Setter\n\tprivate String warning;\n\t@Getter @Setter\n\tprivate String warning2;\t\n\t@Getter @Setter\n\tprivate String writeWarning;\n\t@Getter @Setter\n\tprivate String loyaltyProductIdSub;\n\t@Getter @Setter\n\tprivate String newLSProductIdSubHRef;\n\t\n\t@Getter @Setter\n\tprivate String sendRestricted;\n\t\n\t@Getter @Setter\n\tprivate int numberOfProductModelElements;\n\t\n\t@Getter @Setter\n\tprivate List<ShippingTotalDTO> provinceNameList;\n\t@Getter @Setter\n\tprivate String[] provinceName;\t\n\t@Getter @Setter\n\tString[] shippingCost;\n\t@Getter @Setter\n\tprivate String shippingTotalCanada;\n\t\n\tpublic Product() throws ServiceLocatorException {\n\t\tsuper();\n\t\tproductService = getServiceLocator().getProductService();\t\t\n\t\tspecificationService = getServiceLocator().getSpecificationService();\n\t}\t\n\t\n\t@Override  \n\tpublic String execute() throws Exception {\n\t\ttry {\n\t\t\tUserSessionDTO userSessionDTO = (UserSessionDTO)request.getSession().getAttribute(WebConstants.USER);\n\t\t\t\n\t\t\tif (userSessionDTO != null) {\n\t\t\t\tproductDTO = productService.getProductInformation(productId, userSessionDTO.getId());\n\t\t\t\tproductBreadcrumb = ""Our Products"";\t\t\t\t\n\t\t\t} else {\n\t\t\t\tproductDTO = productService.getProductInformation(productId, null);\n\t\t\t\tproductBreadcrumb = ""Products"";\n\t\t\t}\n\t\t\t\n\t\t\tproductImageDTO = productDTO.getImage();\n\t\t\tproductImageName = productImageDTO != null ? productImageDTO.getName() : """";\n\t\t\t\n\t\t\tif (productDTO.getBrand() != null) {\n\t\t\t\tbrandDTO = productDTO.getBrand();\n\t\t\t\t\n\t\t\t\tproductDTO.getBrand().setHrefName(SeoUrlsMaker.getBrandUrl(brandDTO.getName(), brandDTO.getId()));\n\t\t\t\t\n\t\t\t\tif (brandDTO.getImage() != null) {\n\t\t\t\t\tbrandImageDTO = brandDTO.getImage();\n\t\t\t\t\tif (brandImageDTO != null) {\n\t\t\t\t\t\tbrandImageName = brandImageDTO.getName();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbrandImageName = """";\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tbrandImageName = """";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tbrandImageName = """";\n\t\t\t}\n\t\t\t\n\t\t\tif (getCurrentLanguage().equals(WebConstants.ENGLISH_LANGUAGE)) {\n\t\t\t\tproductName = productDTO.getNameEng().getName();\n\t\t\t\tdesc = productDTO.getDescriptionEng().getName();\n\t\t\t\tspec = productDTO.getSpecificationEng().getName();\n\t\t\t\tother = productDTO.getOtherEng().getName();\n\t\t\t\twarranty = (productDTO.getWarrantyEng() != null) ? productDTO.getWarrantyEng().getName() : """";\n\t\t\t} else if (getCurrentLanguage().equals(WebConstants.FRENCH_LANGUAGE)) { \n\t\t\t\tproductName = productDTO.getNameFr().getName();\n\t\t\t\tdesc = productDTO.getDescriptionFr().getName();\n\t\t\t\tspec = productDTO.getSpecificationFr().getName();\n\t\t\t\tother = productDTO.getSpecificationFr().getName();\n\t\t\t\twarranty = (productDTO.getWarrantyFr() != null) ? productDTO.getWarrantyFr().getName() : """";\n\t\t\t}\n\t\t\t\n\t\t\t//Link url \n\t\t\tif(productDTO.getLinkList().size() > 0)\n\t\t\t\tlink = productDTO.getLinkList().get(0).getLink();\n\n\t\t\tif (desc.indexOf(""<p></p>"") != -1 && desc.length() == 7) desc = desc.replaceAll(""<p></p>"", """");\n\t\t\tif (spec.indexOf(""<p></p>"") != -1 && spec.length() == 7) spec = spec.replaceAll(""<p></p>"", """");\n\t\t\t\n\t\t\tInteger status = productDTO.getStatus().getValue();\n\t\t\tif (status == ProductStatus.UNAVAILABLE.getValue()) {\n\t\t\t\twriteWarning = ""y2"";\n\t\t\t\twarning = ""PRODUCT TEMPORARILY UNAVAILABLE"";\n\t\t\t} else if (status == ProductStatus.DISCONTINUED.getValue()) {\n\t\t\t\twriteWarning = ""y3"";\n\t\t\t\tloyaltyProductIdSub = productDTO.getLoyaltyProductIdSub();\n\t\t\t\twarning = ""THIS PRODUCT IS DISCONTINUED"";\n\t\t\t\t\n\t\t\t\tif (!loyaltyProductIdSub.matches(""^\\\\s*$"")) {\n\t\t\t\t\twarning2 = ""Please view our suggested replacement: "";\n\t\t\t\t\tProductDTO newProductDTO = productService.getProductIdFromLSProductId(loyaltyProductIdSub);\n\t\t\t\t\tif (newProductDTO != null) {\n\t\t\t\t\t\tlong newProductId = newProductDTO.getId();\n\t\t\t\t\t\tString newBrandName = newProductDTO.getBrand().getName();\n\t\t\t\t\t\tString newProductName = """";\n\t\t\t\t\t\tif(getCurrentLanguage().equals(WebConstants.ENGLISH_LANGUAGE)) {\t\t\t\t\t\n\t\t\t\t\t\t\tnewProductName = newProductDTO.getNameEng().getName();\t\t\t\t\t\n\t\t\t\t\t\t} else if(getCurrentLanguage().equals(WebConstants.FRENCH_LANGUAGE)) {\n\t\t\t\t\t\t\tnewProductName = newProductDTO.getNameFr().getName();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnewLSProductIdSubHRef = SeoUrlsMaker.getProductUrl(newBrandName, newProductName, newProductId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tweight = productDTO.getWeight();\t\t\n\t\t\tif (weight != null) {\n\t\t\t\tweight = (!weight.matches(""^\\\\s*$"")) ? String.valueOf(weight) : """";\t\n\t\t\t} else {\n\t\t\t\tweight = """";\n\t\t\t}\n\t\t\t\n\t\t\tString width = productDTO.getWidth();\tw = (!width.equalsIgnoreCase(""0"")) ? String.valueOf(width) : """";\n\t\t\tString large = productDTO.getLarge();\tl = (!large.equalsIgnoreCase(""0"")) ? String.valueOf(large) : """";\t\n\t\t\tString high = productDTO.getHigh();\t\th = (!high.equalsIgnoreCase(""0""))  ? String.valueOf(high)  : """";\n\t\t\t\n\t\t\tif(productDTO.getManufactureProductList().size() >= 1) {\n\t\t\t\tmodelNumber= ((ProductModelDTO)productDTO.getManufactureProductList().get(0)).getName();\n\t\t\t} else {\n\t\t\t\tmodelNumber = """";\n\t\t\t}\n\t\t\tmodelNumber = ((ProductModelDTO)productDTO.getManufactureProductList().get(0)).getName();\t\t\t\n\t\t\t\n\t\t\tif (userSessionDTO != null) {\n\t\t\t\tList<UserProductPriceDTO> userProductPriceDTOList = productService.getUserProductPriceList(productId);\n\t\t\t\tfor (UserProductPriceDTO userProductPriceDTO : userProductPriceDTOList) {\n\t\t\t\t\tif (userSessionDTO.getId() == userProductPriceDTO.getUserId() && userProductPriceDTO.getExcluded()) {\n\t\t\t\t\t\tsendRestricted = ""restricted"";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tnumberOfProductModelElements = (productDTO.getManufactureProductList() != null) \n\t\t\t\t\t\t\t\t\t\t\t? productDTO.getManufactureProductList().size()\n\t\t\t\t\t\t\t\t\t\t\t: 0;\n\t\t\t\n\t\t\tprice = productDTO.getPriceProduct();\n\t\t\tmsrp = productDTO.getMsrp();\n\t\t\tpercentage = """";\n\t\t\tdiscount = """";\n\t\t\t\n\t\t\tdouble priceVal = 0d;\n\t\t\tdouble msrpVal = 0d;\n\t\t\tdouble discountVal = 0d;\n\t\t\tdouble percentageVal = 0d;\n\t\t\t\n\t\t\tif (userSessionDTO != null) {\t// User logged in!!!\t\t\t\t\n\t\t\t\tif (price != null) {\n\t\t\t\t\tif (!price.matches(""^\\\\s*$"") && !price.equalsIgnoreCase("""")) {\t\t\t\t\t\n\t\t\t\t\t\tpriceVal = Double.parseDouble(price);\n\t\t\t\t\t\tprice = ""$"" + format(priceVal, ""#,###.00"", ""en"", ""US"");\t\t\t\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpriceVal = 0d;\n\t\t\t\t\t\tprice = """";\n\t\t\t\t\t}\n\t\t\t\t}\t\t\t\t\n\t\t\t\tif (msrp != null) {\t\t\t\t\t\n\t\t\t\t\tif (!msrp.matches(""^\\\\s*$"") && !msrp.equalsIgnoreCase("""")) {\t\n\t\t\t\t\t\tmsrpVal = Double.parseDouble(msrp);\n\t\t\t\t\t\tmsrp = ""$"" + format(msrpVal, ""#,###.00"", ""en"", ""US"");\t\n\t\t\t\t\t\tdiscountVal = msrpVal - priceVal;\n\t\t\t\t\t\tdiscount = (discountVal != 0d) ? (""$"" + format(discountVal, ""#,###.00"", ""en"", ""US"")) : """";\t\t\t\t\t\n\t\t\t\t\t\tpercentageVal = (msrpVal != 0d) ? (100d * discountVal / msrpVal) : 0d;\n\t\t\t\t\t\tpercentage = (percentageVal != 0d) \n\t\t\t\t\t\t\t\t\t\t? ""("" + format(percentageVal, ""0.00"", ""en"", ""CA"") + ""%)"" \n\t\t\t\t\t\t\t\t\t\t: """" ;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdiscount = """";\n\t\t\t\t\t\tpercentage = """";\n\t\t\t\t\t\tmsrp = """";\n\t\t\t\t\t}\t\t\t\n\t\t\t\t}\t\t\t\n\t\t\t\tloyaltyProductId = concatenate(userSessionDTO.getCode(), productDTO.getLoyaltyProductId());\t\t\t\t\n\t\t\t} else {\t// User Not Logged-in!!!!\n\t\t\t\tif (msrp != null || !msrp.matches(""^\\\\s*$"")) {\n\t\t\t\t\tmsrpVal = Double.parseDouble(msrp);\n\t\t\t\t\tmsrp = ""$"" + format(msrpVal, ""#,###.00"", ""en"", ""US"");\n\t\t\t\t} else {\n\t\t\t\t\tmsrp = """";\t\t\n\t\t\t\t}\n\t\t\t\tloyaltyProductId = productDTO.getLoyaltyProductId();\n\t\t\t}\n\t\t\t\n\t\t\tlong groupId = productDTO.getCategory().getCategoryGoupeId();\n\t\t\tgroupName = groupId >= 1L \n\t\t\t\t\t\t? GroupCategoryEnum.values()[((int) groupId) - 1].getCode() \n\t\t\t\t\t\t: """";\n\t\t\tgroupHL = SeoUrlsMaker.getCategoryGroupUrl(groupName);\n\t\t\tlong categoryID = productDTO.getCategory().getId();\n\t\t\tcategoryName = productDTO.getCategory().getName();\n\t\t\tcategoryHL = SeoUrlsMaker.getCategoryUrl(groupName, categoryName, categoryID);\n\t\t\tlong specId = productDTO.getMainFilterTypeId();\n\t\t\tSpecificationDTO specDTO = specificationService.getSpecification(specId);\t\t\t\n\t\t\t\n\t\t\tspecName = specDTO.getName();\n\t\t\tspecHL = SeoUrlsMaker.getSpecificationUrl(groupName, categoryName, specName, specId);\n\t\t\t\n\t\t\trequest.getSession(true).setAttribute(""queryID"", groupId);\t\t\t\n\t\t\trequest.getSession(true).setAttribute(""productBreadcrumb"", productBreadcrumb);\n\t\t\trequest.getSession(true).setAttribute(""groupName"", groupName);\n\t\t\trequest.getSession(true).setAttribute(""groupHL"", groupHL);\n\t\t\trequest.getSession(true).setAttribute(""categoryName"", categoryName);\n\t\t\trequest.getSession(true).setAttribute(""categoryHL"", categoryHL);\n\t\t\trequest.getSession(true).setAttribute(""specName"", specName);\n\t\t\trequest.getSession(true).setAttribute(""specHL"", specHL);\n\t\t\t\n\t\t\t//Set information title\n\t\t\trequest.setAttribute(RequestAtributeConstants.PAGE_TITLE_PARAM_1, productName);\n\t\t\trequest.setAttribute(RequestAtributeConstants.PAGE_TITLE_PARAM_2, brandDTO.getName());\n\t\t\t\n\t\t\t\n\t\t\tif (userSessionDTO != null) {\n\t\t\t\tlong userId = userSessionDTO.getId();\n\t\t\t\tprovinceNameList = productService.getShippingTotalList(productId, userId);\n\t\t\t\tfinal int SIZE = provinceNameList.size();\n\t\t\t\tprovinceName = new String[SIZE];\n\t\t\t\tshippingCost = new String[SIZE];\t\n\t\t\t\t\n\t\t\t\tProvinceDTO provinceDTO = new ProvinceDTO();\n\t\t\t\tlong provinceId = 0L;\n\t\t\t\tint count = 0;\n\t\t\t\tString $ = ""$"";\n\t\t\t\tfor (ShippingTotalDTO shippingTotalDTO : provinceNameList) {\n\t\t\t\t\tprovinceId = shippingTotalDTO.getProvinceId();\n\t\t\t\t\tprovinceDTO = productService.getProvince(provinceId);\n\t\t\t\t\tprovinceName[count] = provinceDTO.getCode();\n\t\t\t\t\tif (!shippingTotalDTO.getAverageShippingTotal().trim()\n\t\t\t\t\t\t\t.equalsIgnoreCase(""NOT AVAILABLE"")) {\n\t\t\t\t\t\tshippingCost[count] = $ + shippingTotalDTO.getAverageShippingTotal();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshippingCost[count] = ""N/A"";\n\t\t\t\t\t}\n\t\t\t\t\t++count;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tUserProductPriceDTO userProductPriceDTO = productService.getUserProductPriceInformation(productId, userId);\n\t\t\t\t\n\t\t\t\tshippingTotalCanada = userProductPriceDTO.getShippingTotalCanada();\n\t\t\t\tdouble shippingCanada = 0d;\n\t\t\t\tif (shippingTotalCanada != null || !shippingTotalCanada.matches(""^\\\\s*$"")) {\n\t\t\t\t\tshippingCanada = Double.parseDouble(shippingTotalCanada);\n\t\t\t\t\tshippingTotalCanada = ""$"" + format(shippingCanada, ""#,###.00"", ""en"", ""US"");\n\t\t\t\t} else {\n\t\t\t\t\tshippingTotalCanada = """";\n\t\t\t\t}\n\t\t\t}\t\t\t\n\t\t\t\n\t\t} catch(ServiceException e) {\n\t\t\tlog.debug(""Service Error when loading file"");\n\t\t\taddActionError(getText(""loyauty.error.common.service""));\n\t\t} catch (Exception e) {\n\t\t\taddActionError(getText(""loyauty.error.common.service""));\n\t\t}\t\t\n\t\treturn SUCCESS;\n\t}\n\t\n\tprivate String format(double value, String pattern, String language, String country) {\n\t\tLocale loc = new Locale(language, country);\n\t\tNumberFormat nf = NumberFormat.getInstance(loc);\n\t\tDecimalFormat df = (DecimalFormat) nf;\n\t\tdf.applyPattern(pattern);\n\t\treturn nf.format(value);\n\t}\n\t\n\tprivate int countBackRepeatsFromLast(String inputLeft) {\n\t\tint numberOfRepeats = 0;\n\t\tint pointer = inputLeft.length() - 1;\n\t\twhile (inputLeft.charAt(pointer) == CHAR_PATTERN_THAT_REPEATS) {\n\t\t\tif (inputLeft.charAt(pointer) == CHAR_PATTERN_THAT_REPEATS) ++numberOfRepeats;\n\t\t\tif (pointer == 0) break;\n\t\t\t-- pointer;\n\t\t}\n\t\treturn numberOfRepeats;\n\t}\n\t\n\tprivate int countForthRepeatsFromFirst(String inputRight) {\n\t\tint numberOfRepeats = 0;\n\t\tint pointer = 0;\n\t\twhile (inputRight.charAt(pointer) == CHAR_PATTERN_THAT_REPEATS) {\n\t\t\tif (inputRight.charAt(pointer) == CHAR_PATTERN_THAT_REPEATS) ++numberOfRepeats;\n\t\t\tif (pointer == inputRight.length() - 1) break;\n\t\t\t++pointer;\n\t\t}\n\t\treturn numberOfRepeats;\n\t}\n\t\n\tprivate boolean areThereRepeatsBackLeft(String inputLeft) {\n\t\treturn (countBackRepeatsFromLast(inputLeft) > 0);\n\t}\n\t\n\tprivate boolean areThereRepeatsForthRight(String inputRight) {\n\t\treturn (countForthRepeatsFromFirst(inputRight) > 0);\n\t}\n\t\n\tprivate String concatenate(String inputLeft, String inputRight) {\n\t\tString l = """", union = """", r = """";\n\t\tString leftChar = """", rightChar = """";\n\t\t\n\t\tif (inputLeft.equalsIgnoreCase("""") && inputRight.equalsIgnoreCase("""")) {\n\t\t\treturn """";\n\t\t}\n\t\t\n\t\tif (areThereRepeatsBackLeft(inputLeft)) {\n\t\t\tif (countBackRepeatsFromLast(inputLeft) == inputLeft.length()) {\n\t\t\t\tinputLeft = UNION;\n\t\t\t} else {\t// countBackRepeatsFromLast(inputLeft) < inputLeft.length()\n\t\t\t\tint info = inputLeft.length() - countBackRepeatsFromLast(inputLeft);\n\t\t\t\tinputLeft = inputLeft.substring(0, info + 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (areThereRepeatsForthRight(inputRight)) {\n\t\t\tif (countForthRepeatsFromFirst(inputRight) == inputRight.length()) {\n\t\t\t\tinputRight = UNION;\n\t\t\t} else {\t// countForthRepeatsFromFirst(inputRight) < inputRight.length()\n\t\t\t\tinputRight = inputRight.substring(countForthRepeatsFromFirst(inputRight) - 1, inputRight.length());\n\t\t\t}\n\t\t}\n\t\t\n\t\tleftChar = (inputLeft.length() > 0) ? inputLeft.substring(inputLeft.length() - 1) : """";\n\t\trightChar = (inputRight.length() > 0) ? inputRight.substring(0, 1) : """";\n\t\tif (inputLeft.length() > 0 && inputRight.length() > 0) {\t\t\t\n\t\t\tunion = UNION;\n\t\t\tif (leftChar.equalsIgnoreCase(UNION) && !rightChar.equalsIgnoreCase(UNION)) {\n\t\t\t\tl = inputLeft.substring(0, inputLeft.length() - 1);\n\t\t\t\tr = inputRight;\n\t\t\t} else if (!leftChar.equalsIgnoreCase(UNION) && rightChar.equalsIgnoreCase(UNION)) {\n\t\t\t\tl = inputLeft;\n\t\t\t\tr = inputRight.substring(1, inputRight.length());\n\t\t\t} else if (leftChar.equalsIgnoreCase(UNION) && rightChar.equalsIgnoreCase(UNION)) {\n\t\t\t\tl = inputLeft.substring(0, inputLeft.length() - 1);\n\t\t\t\tr = inputRight.substring(1, inputRight.length());\t\n\t\t\t} else {\n\t\t\t\tl = inputLeft;\n\t\t\t\tr = inputRight;\n\t\t\t}\t\t\t\n\t\t} else if (inputLeft.length() == 0 && inputRight.length() > 0) {\n\t\t\tl = """";\n\t\t\tunion = """";\n\t\t\tr = inputRight;\t\t\t\t\n\t\t} else if (inputLeft.length() > 0 && inputRight.length() == 0) {\n\t\t\tl = inputLeft;\n\t\t\tunion = """";\n\t\t\tr = """";\t\t\t\t\n\t\t} else if (inputLeft.length() == 0 && inputRight.length() == 0) {\n\t\t\t\tl = union = r = """";\n\t\t}\n\t\treturn (l + union + r);\n\t}\n\t\t\n}\n\n----------------------------------- SOURCE END -------------------------------------",1398562734219
error,log,,,"Problems occurred when invoking code from plug-in: ""org.eclipse.jdt.ui"".",1398562734221
error,log,,,"Error in JDT Core during reconcile",1398562734222
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1398562734231
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1398562742734
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1398562747340
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1398562749085
executed,command,org.eclipse.ui.ide,3.6.2.M20101201-0800,"org.eclipse.ui.project.cleanAction",1398562749097
error,log,,,"Exception occurred during problem detection:\n----------------------------------- SOURCE BEGIN -------------------------------------\npackage com.loyauty.web.struts.action;\n\nimport javax.servlet.http.HttpServletRequest;\n\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.Setter;\n\nimport org.apache.log4j.Logger;\nimport org.apache.struts2.ServletActionContext;\nimport org.apache.struts2.interceptor.ServletRequestAware;\n\nimport com.loyauty.exception.ServiceException;\nimport com.loyauty.exception.ServiceLocatorException;\nimport com.loyauty.service.ServiceLocator;\nimport com.loyauty.service.core.dto.UserDTO;\nimport com.loyauty.service.user.UserService;\nimport com.loyauty.web.MessageKeyConstants;\nimport com.loyauty.web.util.LocaleUtils;\nimport com.opensymphony.xwork2.ActionSupport;\nimport com.opensymphony.xwork2.Preparable;\n\n/**\n * This is the basic Loyalty action where common properties and methods should go.\n *  \n * @author Muthanna\n *\n */\n\npublic class LoyautyAction extends ActionSupport implements ServletRequestAware, Preparable {\n\n\tprivate static final String NAMESPACES_SEPARATOR = ""/"";\n\n\tprotected Logger log = Logger.getLogger(this.getClass());\n\t\n\tprotected HttpServletRequest request;\t\n\t\n\t@Getter\t@Setter\n\tprivate boolean ajax = false;\n\t@Getter\t@Setter\n\tprivate String currentLanguage;\n\t@Getter\t@Setter\n\tprivate String pageTitleKey;\n\t@Getter\t@Setter\n\tprivate String pageKeywordsKey;\n\t@Getter\t@Setter\n\tprivate String pageDescriptionKey;\n\t\n\t@Getter(AccessLevel.PROTECTED)\n\t@Setter(AccessLevel.PRIVATE)\n\tprivate ServiceLocator serviceLocator;\n\t\n\t\n\tprivate UserService userService;\n\t@Getter @Setter\n\tprivate UserDTO userDTO;\n\t\n\t\n\tpublic LoyautyAction() throws ServiceLocatorException {\n\t\tsetServiceLocator(ServiceLocator.getInstance());\n\t\tuserService = serviceLocator.getUserService();\n\t}\n\t\n\t@Override\n\tpublic void prepare() {\n\t\t/*\n\t\t * filling of message keys header information\n\t\t */\n\n\t\tString headerKey = null;\n\t\tString namesSpace = ServletActionContext.getActionMapping().getNamespace();\n\t\tString actionName = ServletActionContext.getActionMapping().getName();\n\t\tif (namesSpace != null && !namesSpace.equals(NAMESPACES_SEPARATOR)) {\n\t\t\theaderKey = namesSpace.replace(NAMESPACES_SEPARATOR, ""."");\n\t\t}\n\t\tif (actionName != null) {\n\t\t\theaderKey = (headerKey!=null?headerKey+""."":""."") + actionName;\n\t\t}\n\t\t\n\t\t\n\t\tsetPageTitleKey(MessageKeyConstants.PAGE_HEADER_TITLE_KEY+headerKey);\n\t\tsetPageKeywordsKey(MessageKeyConstants.PAGE_HEADER_KEYWORDS_KEY+headerKey);\n\t\tsetPageDescriptionKey(MessageKeyConstants.PAGE_HEADER_DESCRIPTION_KEY+headerKey);\n\t\t\n\t\tcurrentLanguage = LocaleUtils.getSessionLanguage(request);\n\t}\n\t\n\t/**\n\t * Use this method when if an Action can be use in a Ajax way.\n\t * If the action succeed, it chooses to return ""success"" in the classic way and ""none"" in a Ajax way.\n\t * method do the choice with an ""ajax=true"" parameter in the request \n\t * @return ""success"" in the classic way and ""none"" in a Ajax way.\n\t */\n\tpublic String getSuccessResult() { \n\t\tif (ajax) {\n\t\t\treturn NONE;\n\t\t} else {\n\t\t\treturn SUCCESS;\n\t\t}\n\t}\n\t\n\t/**\n\t * Use this method when if an Action can be use in a Ajax way.\n\t * If the action failed, it chooses to return ""input"" in the classic way and ""none"" in a Ajax way.\n\t * method do the choice with an ""ajax=true"" parameter in the request \n\t * @return ""success"" in the classic way and ""none"" in a Ajax way.\n\t */\n\tpublic String getInputResult() {\n\t\tif (ajax) {\n\t\t\treturn NONE;\n\t\t} else {\n\t\t\treturn INPUT;\n\t\t}\n\t}\n\t\n\t\n\tpublic String getRedirectResult() {\n\t\tif (ajax) {\n\t\t\treturn NONE;\n\t\t} else {\n\t\t\treturn ""next"";\n\t\t}\n\t}\n\t\n\t@Override\n\tpublic void setServletRequest(HttpServletRequest request) {\n\t\tthis.request = request;\n\t}\n}\n\n----------------------------------- SOURCE END -------------------------------------",1398562749833
error,log,,,"Problems occurred when invoking code from plug-in: ""org.eclipse.jdt.ui"".",1398562749834
