what,kind,bundleId,bundleVersion,description,time
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207517860
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.findReplace",1403207517878
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207541077
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403207555546
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403207555777
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207630850
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.findReplace",1403207630888
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207639361
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403207640658
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403207640922
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403207641402
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403207641641
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207642952
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207671381
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207703304
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.findReplace",1403207703312
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207716738
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207719680
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.findReplace",1403207719689
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207746421
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207754023
no handler,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.undo",1403207756069
no handler,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.undo",1403207756661
no handler,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.undo",1403207758686
no handler,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.undo",1403207758982
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207766224
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1403207788016
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403207796283
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403207796683
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1403207799443
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.cut",1403207801779
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1403207803620
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207807760
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207807911
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.file.save",1403207809935
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207812163
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207817497
activated,view,org.eclipse.ui.console,3.5.0.v20100526,"org.eclipse.ui.console.ConsoleView",1403207817507
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207820124
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207832386
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207835969
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207848100
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207860420
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207869423
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207899521
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207944240
activated,editor,org.eclipse.jst.jsp.ui,1.1.503.v201101262228,"org.eclipse.jst.jsp.core.jspsource.source",1403207944275
activated,perspective,,,"Hamdoune",1403207952301
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207959569
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403207964588
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403208034420
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403208154229
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1403208154388
activated,view,org.eclipse.ui.ide,3.6.2.M20101201-0800,"org.eclipse.ui.views.ResourceNavigator",1403208219687
opened,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1403208219918
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1403208219942
activated,view,org.eclipse.ui.ide,3.6.2.M20101201-0800,"org.eclipse.ui.views.ResourceNavigator",1403208226399
opened,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1403208226673
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1403208226698
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403208325309
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403208325557
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1403208333619
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.cut",1403208471816
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1403208490056
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1403208512980
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403208516607
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1403208520615
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.text.contentAssist.proposals",1403208572245
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1403208591167
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403208596924
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1403208599509
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403208627793
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1403208632586
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403208659241
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403208668512
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1403208670482
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403208684135
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1403208685569
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403208701936
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403208704150
executed,command,org.eclipse.ui.workbench.texteditor,3.6.1.r361_v20100714-0800,"org.eclipse.ui.edit.text.goto.line",1403208704155
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403208727422
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1403208730817
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403208757914
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1403208763265
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403208781758
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1403208784878
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403208852425
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403208857872
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403208883610
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1403208885617
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403208988698
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403208988954
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403208989151
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.text.contentAssist.proposals",1403209001675
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403209028557
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1403209032520
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.delete",1403209035914
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403209048870
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1403209050846
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403209061911
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1403209100640
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403209105677
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1403209107454
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.text.contentAssist.proposals",1403209111321
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403209116750
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1403209118581
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403209134673
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1403209157369
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.text.contentAssist.proposals",1403209164027
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.copy",1403209181714
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.edit.paste",1403209190488
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403209196998
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403209197200
activated,view,org.eclipse.wst.server.ui,1.1.207.v20110119,"org.eclipse.wst.server.ui.ServersView",1403209205382
executed,command,org.eclipse.wst.server.ui,1.1.207.v20110119,"org.eclipse.wst.server.stop",1403209205497
executed,command,org.eclipse.ui,3.6.2.M20110203-1100,"org.eclipse.ui.file.saveAll",1403209208170
activated,editor,org.eclipse.jdt.ui,3.6.2.r362_v20110203,"org.eclipse.jdt.ui.CompilationUnitEditor",1403209209362
activated,view,org.eclipse.ui.console,3.5.0.v20100526,"org.eclipse.ui.console.ConsoleView",1403209218339
activated,view,org.eclipse.wst.server.ui,1.1.207.v20110119,"org.eclipse.wst.server.ui.ServersView",1403209219999
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403209222791
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403209224254
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403209224584
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403209234234
activated,view,org.eclipse.ui.console,3.5.0.v20100526,"org.eclipse.ui.console.ConsoleView",1403209239229
activated,view,org.eclipse.wst.server.ui,1.1.207.v20110119,"org.eclipse.wst.server.ui.ServersView",1403209243214
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403209247089
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403209248602
executed,command,org.eclipse.ui.ide,3.6.2.M20101201-0800,"org.eclipse.ui.project.cleanAction",1403209248610
deactivated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403209248895
activated,workbench,org.eclipse.ui.workbench,3.6.2.M20110210-1200,"",1403209249153
error,log,,,"Exception occurred during problem detection:\n----------------------------------- SOURCE BEGIN -------------------------------------\npackage com.loyauty.web.struts.action.orders;\n\nimport java.text.SimpleDateFormat;\nimport java.util.ArrayList;\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.Hashtable;\nimport java.util.List;\n\nimport javax.servlet.http.HttpSession;\nimport lombok.Getter;\nimport lombok.Setter;\n\nimport com.loyauty.exception.ServiceException;\nimport com.loyauty.exception.ServiceLocatorException;\nimport com.loyauty.model.OrdersRows;\nimport com.loyauty.model.User;\nimport com.loyauty.service.core.DTOFactory;\nimport com.loyauty.service.core.dto.BasicUserDTO;\nimport com.loyauty.service.core.dto.OperationsDTO;\nimport com.loyauty.service.core.dto.OrdersDTO;\nimport com.loyauty.service.core.dto.ProvinceDTO;\nimport com.loyauty.service.core.dto.UserProductPriceDTO;\nimport com.loyauty.service.core.dto.UserSessionDTO;\nimport com.loyauty.service.core.dto.UsersPrivilegesDTO;\nimport com.loyauty.service.operations.OperationsService;\nimport com.loyauty.service.orders.OrdersService;\nimport com.loyauty.service.product.ProductService;\nimport com.loyauty.service.user.UserService;\nimport com.loyauty.web.struts.action.LoyautyAction;\n\npublic class ReportOrders  extends LoyautyAction {\n\tprivate static final long serialVersionUID = -3811760851445730062L;\n\tprivate UserService userService;\n\tprivate ProductService productService;\n\tprivate OrdersService orderService;\n\tprivate OperationsService operationsService;\n\t@Getter @Setter\n\tprivate String userLogin;\n\t@Getter @Setter\n\tprivate List<User> usersList;\n\tprivate static int USER_TYPE = 2;\n\t@Getter @Setter\n\tList<OrdersDTO>listOrdersDTO;\n\t@Getter @Setter\n\tList<OrdersDTO>listStatus;\n\t@Getter @Setter\n\tprivate String lsOrderId;\n\t@Getter @Setter\n\tLong poYpop;\n\t@Getter @Setter\n\tLong poXpop;\n\t@Getter @Setter\n\tprivate Long pageTop=0L;\n\t@Getter @Setter\n\tprivate Date creationDate ;\n\t@Getter @Setter\n\tprivate Long findOrdersSignal;\n\tprivate String status;\n\t@Getter @Setter\n\tprivate Long sizeResult=0L;\n\t@Getter @Setter\n\tprivate Long sorting;\n\t@Getter @Setter\n\tprivate Long sortingOrdersSignal;\n\t@Getter @Setter\n\tprivate Integer fieldForSorting;\n\t@Getter @Setter\n\tprivate Integer asc;\n\t@Getter @Setter\n\tprivate Integer scrollDivRowsLeft;\n\t@Getter @Setter\n\tprivate Integer scrollPageLeft;\n\t@Getter @Setter\n\tprivate Integer scrollDivRowsTop;\n\t@Getter @Setter\n\tprivate String strCreationDateStart;\n\t@Getter @Setter\n\tprivate String strCreationDateEnd;\n\t@Getter @Setter\n\tprivate Date creationDateStart;\n\t@Getter @Setter\n\tprivate Date creationDateEnd ;\n\tprivate Date creationDateStartArg;\n\tprivate Date creationDateEndArg ;\n\t@Getter @Setter\n\tprivate Integer selectedStatus;\n\t@Getter @Setter\n\tprivate Long editOrderSignal;\n\t@Getter @Setter\n\tprivate Long cancelSignal;\n\t@Getter @Setter\n\tprivate Integer indexOrder;\n\t@Getter @Setter\n\tprivate OrdersDTO orderToEdit;\n\t@Getter @Setter\n\tprivate String strProductOrderDate;\n\t@Getter @Setter\n\tprivate String lsProductID;\n\t@Getter @Setter\n\tInteger indexRow;\n\t@Getter @Setter\n\tprivate String showOrderDetailPop;\n\t@Getter @Setter\n\tprivate Long userId;\n\t@Getter @Setter\n\tprivate Long checkProductPriceSignal;\n\t@Getter @Setter\n\tprivate Long saveTemporaryRowSignal;\n\t@Getter @Setter\n\tprivate Long addSimilarRowSignal;\n\t@Getter @Setter\n\tprivate Long deleteRowSignal;\n\t@Getter @Setter\n\tprivate Long saveOrdersSignal;\n\t@Getter @Setter\n\tprivate Long checkBoxPrintSignal;\n\t@Getter @Setter\n\tprivate Boolean checkBoxPrint;\n\t\n\t//recovery Data Order\n\t@Getter @Setter\n\tprivate String clientLastName;\n\t@Getter @Setter\n\tprivate String clientFirstName;\n\t@Getter @Setter\n\tprivate String clientOtherNames;\n\t@Getter @Setter\n\tprivate String clientStreet;\n\t@Getter @Setter\n\tprivate String  clientOtherStreet;\n\t@Getter @Setter\n\tprivate String  clientCity;\n\t@Getter @Setter\n\tprivate String  clientProvince;\n\t@Getter @Setter\n\tprivate String  clientPostalCode;\n\t@Getter @Setter\n\tprivate String  clientPhone;\n\t@Getter @Setter\n\tprivate String  clientEmail;\n\t@Getter @Setter\n\tprivate String productOrderNumber;\n\t@Getter @Setter\n\tprivate String strRequiredDate;\n\t\n\t//recovery data row\n\t@Getter @Setter\n\tprivate Double quantity ;\n\t@Getter @Setter\n\tprivate String notes;\n\t@Getter @Setter\n\tprivate Double quantityToChange;\n\t@Getter @Setter\n\tprivate Double stock;\n\t@Getter @Setter\n\tprivate String productDescription;\n\t@Getter @Setter\n\tprivate Double unitPrice;\n\t@Getter @Setter\n\tprivate Double shippingFee;\n\t@Getter @Setter\n\tprivate String shippingCompany;\n\t@Getter @Setter\n\tprivate String companyHeader;\n\t@Getter @Setter\n\tprivate String trackingNumber;\n\t@Getter @Setter\n\tprivate Long quantityToChangeSignal;\n\t@Getter @Setter\n\tprivate Long duplicateOrderSignal;\n\t@Getter @Setter\n\tprivate String strCreationDate;\n\t@Getter @Setter\n\tprivate String strCreationOrderDate;\n\t@Getter @Setter\n\tprivate User usr;\n\t@Getter @Setter\n\tprivate String showSaveSuccessPop;\n\t//showSaveSuccessPop=""display:block;visibility:visible;"";\n\t//showSaveSuccessPop=""visibility:hidden;display:none;"";\n\t@Getter @Setter\n\tprivate String message;\n\t@Getter @Setter\n\tprivate Long okSaveSuccessPopSignal;\n\t@Getter @Setter\n\tprivate Long showRowShipping;\n\t@Getter @Setter\n\tprivate Long showOnlyEditNote;\n\t@Getter @Setter\n\tprivate Long saveShippingSignal;\n\t@Getter @Setter\n\tprivate Long saveOnlyNoteSignal;\n\t@Getter @Setter\n\tprivate String code;\n\t@Getter @Setter\n\tprivate Long cityId;\n\t@Getter @Setter\n\tprivate List<ProvinceDTO>listProvinces;\n\tprivate Hashtable<String, ProvinceDTO>hashProvinces;\n\t@Getter @Setter\n\tprivate Boolean orderNotSavedAtFirst;\n\t@Getter @Setter\n\tprivate String strShippedDate;\n\t@Getter @Setter\n\tprivate String strShippingPrice;\n\t@Getter @Setter\n\tprivate String showConfirmDeleteOrderPop;\n\t@Getter @Setter\n\tprivate Long deleteOrderSignal; \n\t@Getter @Setter\n\tprivate Long confirmDeleteSignal;\n\t@Getter @Setter\n\tprivate UsersPrivilegesDTO userPrivileges;\n\t@Getter @Setter\n\tprivate UsersPrivilegesDTO usersPrivShippedToInvoiced;\n\t@Getter @Setter\n\tprivate UsersPrivilegesDTO usersPrivChangeShippedStatus;\n\t@Getter @Setter\n\tprivate HashMap<Integer, String> hashStatus;\n\t@Getter @Setter\n\tprivate Long statusId;\n\t@Getter @Setter\n\tprivate String strPrint;\n\t@Getter @Setter\n\tprivate Integer testSignal;\n\t@Getter @Setter\n\tprivate String newStatus;\n\tLong invoicedOrdersRefresh;\n\t@Getter @Setter\n\tprivate Integer reportDateBetween;\n\t@Getter @Setter\n\tprivate Long dateBetweenSignal;\n\t//------Pagination\n\t@Getter @Setter\n\tLong pageIndexSignal;\n\t@Getter @Setter\n\tLong prevListPagesSignal;\n\t@Getter @Setter\n\tLong nextListPagesSignal;\n\t@Getter @Setter\n\tLong cancelOrderSignal;\n\t@Getter @Setter\n\tLong totalOrders;\n\t@Getter @Setter\n\tInteger nextListPages;\n\t@Getter @Setter\n\tInteger prevListPages;\n\t@Getter @Setter\n\tInteger indexSet=0;\n\t@Getter @Setter\n\tInteger indexList;\n\t@Getter @Setter\n\tList<OrdersDTO>listIndexSet;\n\t@Getter @Setter\n\tInteger PAGE_ITEMS_COUNT=100;\n\t//------Pagination\n\t\n\t/*=========================================================================================\n\t\t\t\t\t\t\t\t\t\tDefault constructor\n\t  =========================================================================================*/\n\tpublic  ReportOrders() throws ServiceLocatorException {\n\t\tsuper();\t \n\t\tuserService = getServiceLocator().getUserService();\n\t\torderService = getServiceLocator().getOrderService();\n\t\tproductService = getServiceLocator().getProductService();\n\t\toperationsService=getServiceLocator().getOperationsService();\n\t}\n\t/*=========================================================================================\n\t \t\t\t\t\t\t\t\t\tmethod execute\n\t  =========================================================================================*/\n\t@SuppressWarnings({ ""rawtypes"", ""unchecked"" })\n\t@Override\n\tpublic String execute() throws Exception {\n\t\tHttpSession session = request.getSession(true);\n\t\t\n\t\tif(showOrderDetailPop==null)showOrderDetailPop=""visibility:hidden;display:none;"";\n\t\tif(showConfirmDeleteOrderPop==null)showConfirmDeleteOrderPop=""visibility:hidden;display:none;"";\n\t\tif(showSaveSuccessPop==null)showSaveSuccessPop=""visibility:hidden;display:none;"";\n\t\tif(poYpop==null)poYpop=100L;\n\t\tif(poXpop==null)poXpop=100L;\n\t\tHashtable<String, OrdersDTO>hashOrders;\n\t\tif(selectedStatus==null)selectedStatus=-1;\n\t\tsizeResult=(Long)session.getAttribute(""sizeResult"");\n\t\ttotalOrders=(Long)session.getAttribute(""totalOrders"");\n\t\tif(totalOrders==null)totalOrders=0L;\n\t\tasc=(Integer)session.getAttribute(""asc"");\n\t\tif(asc==null)asc=0;\n\t\tif(sizeResult==null)sizeResult=0L;\n\t\tif(indexOrder==null)indexOrder=0;\n\t\tuserPrivileges=(UsersPrivilegesDTO)session.getAttribute(""userPrivileges"");\n\t\tusersPrivShippedToInvoiced=(UsersPrivilegesDTO)session.getAttribute(""usersPrivShippedToInvoiced"");\n\t\tusersPrivChangeShippedStatus=(UsersPrivilegesDTO)session.getAttribute(""usersPrivChangeShippedStatus"");\n\t\thashStatus=(HashMap<Integer, String>)session.getAttribute(""hashStatus"");\n\t\tif(hashStatus==null){\n\t\t\thashStatus=new HashMap<Integer, String>();\n\t\t\thashStatus.put(0, """");\n\t\t\thashStatus.put(1, ""open"");\n\t\t\thashStatus.put(2, ""progress"");\n\t\t}\n\t\tList<Integer>listIndexColumn=new ArrayList<Integer>();\n\t\t//fill list status\n\t\tlistStatus=(ArrayList<OrdersDTO>)session.getAttribute(""listStatus"");\n\t\tif(listStatus==null){\n\t\t\tlistStatus=new ArrayList<OrdersDTO>();\n\t\t\tOrdersDTO orderDTOOpen=new OrdersDTO();\n\t\t\torderDTOOpen.setStatus(""open"");\n\t\t\torderDTOOpen.setId(0L);\n\t\t\tlistStatus.add(orderDTOOpen);\n\t\t\tOrdersDTO orderDTOProgress=new OrdersDTO();\n\t\t\torderDTOProgress.setStatus(""progress"");\n\t\t\torderDTOProgress.setId(1L);\n\t\t\tlistStatus.add(orderDTOProgress);\n\t\t\tif(usersPrivChangeShippedStatus!=null){\n\t\t\t\tOrdersDTO orderDTOShipped=new OrdersDTO();\n\t\t\t\torderDTOShipped.setStatus(""shipped"");\n\t\t\t\torderDTOShipped.setId(2L);\n\t\t\t\tlistStatus.add(orderDTOShipped);\n\t\t\t\t/*OrdersDTO orderDTOBuild=new OrdersDTO();\n\t\t\t\torderDTOBuild.setStatus(""invoiced"");\n\t\t\t\torderDTOBuild.setId(3L);\n\t\t\t\tlistStatus.add(orderDTOBuild);*/\n\t\t\t}\n\n\t\t}\n\n\t\ttry {\n\t\n\t\t\t/*-------------------- recovery users list -----------------------------------\n\t\t\t\t\t\t\tRecovery users list in session\n\t\t\t -----------------------------------------------------------------------------*/\n\t\t\t//recovery provinces\n\t\t\tlistProvinces=(List<ProvinceDTO>)session.getAttribute(""listProvinces"");\n\t\t\tif(listProvinces==null)listProvinces=productService.getAllProvinces();\n\t\t\torderNotSavedAtFirst=(Boolean)session.getAttribute(""listNotSavedAtFirst"");\n\t\t\tBasicUserDTO basicUserDTO = new BasicUserDTO();\n\t\t\tbasicUserDTO.setTypeId(USER_TYPE);\n\t\t\tList<User> usersListSession=(List<User>)session.getAttribute(""usersListSession"");\n\t\t\tif(usersListSession==null){\n\t\t\t\tList<UserSessionDTO> listAllUsers= userService.getAllUsers(basicUserDTO);\n\t\t\t\tusersList=new ArrayList<User>();\n\t\t\t\tfor(UserSessionDTO userDTO:listAllUsers){\n\t\t\t\t\tUser user=new User();\n\t\t\t\t\tuser.setId(userDTO.getId());\n\t\t\t\t\tuser.setLogin(userDTO.getLogin());\n\t\t\t\t\tusersList.add(user);\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""usersListSession"",usersList);\n\t\t\t}else usersList=usersListSession;\n\t\t\tlistOrdersDTO=(ArrayList<OrdersDTO>) session.getAttribute(""listOrdersDTOReport"");\n\t\t\treportDateBetween=(Integer)session.getAttribute(""reportDateBetween"");\n\t\t\tif(reportDateBetween==null){\n\t\t\t\treportDateBetween=0;\n\t\t\t\tsession.setAttribute(""reportDateBetween"",reportDateBetween);\n\t\t\t}\n\t\t\t/*------ always recovery creationDate from strCreationDate ------\n\t\t\t\t\t\talways keep the user search options\n\t\t\t  ---------------------------------------------------------------*/\n\t\t\tcreationDateStart=null;\n\t\t\tSimpleDateFormat frm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\tif (((strCreationDateStart)!=null)&&(!"""".equals(strCreationDateStart))){\n    \t\t\ttry {\n    \t\t\t\tDate date = frm.parse(strCreationDateStart);\n    \t\t\t\tcreationDateStart=date;\n    \t\t\t\tcreationDateStartArg=date;\n    \t\t\t}\n    \t\t\tcatch (Exception pe) {\n    \t\t\t\tcreationDateStart=null;\n    \t\t\t\taddActionError(""Please enter a date in the correct format"");\n    \t\t\t}\n    \t\t}\n    \t\tif(creationDateStart==null){\n\t\t\t\tDate date = frm.parse(""01/01/1900"");\n\t\t\t\tcreationDateStartArg=date;\n    \t\t}\n    \t\tcreationDateEnd=null;\n    \t\tif (((strCreationDateEnd)!=null)&&(!"""".equals(strCreationDateEnd))){\n    \t\t\tfrm = new SimpleDateFormat(""dd/MM/yyyy"");\n    \t\t\ttry {\n    \t\t\t\tDate date = frm.parse(strCreationDateEnd);\n    \t\t\t\tcreationDateEnd=date;\n    \t\t\t\tcreationDateEndArg=date;\n    \t\t\t}\n    \t\t\tcatch (Exception pe) {\n    \t\t\t\tcreationDateEnd=null;\n    \t\t\t\taddActionError(""Please enter a date in the correct format"");\n    \t\t\t}\n    \t\t}\n    \t\tif(creationDateEnd==null){\n    \t\t\tcreationDateEndArg=new Date();\n    \t\t}\n\n\t\t\t/*------ always recovery Status from selectedStatus key ------\n\t\t\t\t\t\talways keep the status search options\n\t\t\t  ---------------------------------------------------------------*/\n    \t\tswitch (selectedStatus) {\n\t\t\t\tcase -1:status="""";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0:status=""open"";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:status=""progress"";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:status=""shipped"";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:status=""invoiced"";\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t/*----------- always initialized listPages if not done ----------\n\t\t\t\t   \t\t    and check if is there next listPages\n\t\t\t  ---------------------------------------------------------------*/\n    \t\tnextListPages=(Integer)session.getAttribute(""nextListPages"");\n    \t\tif(nextListPages==null)nextListPages=0;\n    \t\tif(indexSet==null || indexSet==-1){\n    \t\t\tindexSet=(Integer)session.getAttribute(""indexSet"");\n    \t\t\tif(indexSet==null)indexSet=0;\n    \t\t}\n    \t\tlistIndexSet=(List<OrdersDTO>)session.getAttribute(""listIndexSet"");\n    \t\tif(listIndexSet==null)initalizeListIndexSet(session,orderService );\n \n\t\t\t/*----------------- When Admin Click on the pageIndex ----------------------------------\n\t\t\t\t\t\t\t\t\t\tcatch  page index\n\t\t\t ---------------------------------------------------------------------------------------*/\n    \t\t\n    \t\tif(dateBetweenSignal!=null && dateBetweenSignal!=0L){\n    \t\t\treportDateBetween=((reportDateBetween==null || reportDateBetween==0)?1:0);\n    \t\t\tlistOrdersDTO=new ArrayList<OrdersDTO>();\n    \t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\tsession.setAttribute(""reportDateBetween"",reportDateBetween);\n\t\t\t\treturn SUCCESS;\n    \t\t}\n\n\t\t\t/*----------------- When Admin Click on the pageIndex ----------------------------------\n\t\t\t\t\t\t\t\t\t\tcatch  page index\n\t\t\t ---------------------------------------------------------------------------------------*/\n    \t\tif(pageIndexSignal!=null && pageIndexSignal!=0L){\n     \t\t\tOrdersDTO orderDTO=(OrdersDTO)session.getAttribute(""orderPageSelected"");\n    \t\t\tif(orderDTO!=null)orderDTO.setCssStyle("""");\n    \t\t\tOrdersDTO orderPageSelected=listIndexSet.get(indexList);\n    \t\t\torderPageSelected.setCssStyle(""background-color:#FFFF99;border:1px solid #CCCCCC;"");\n    \t\t\tindexSet=orderPageSelected.getIndex()-1;\n    \t\t\tindexSet=indexSet*PAGE_ITEMS_COUNT;\n    \t\t\tsession.setAttribute(""indexSet"",indexSet);\n    \t\t\tsession.setAttribute(""listIndexSet"",listIndexSet);\n    \t\t\tsession.setAttribute(""orderPageSelected"",orderPageSelected);\n    \t\t}\n\n\t\t\t/*----------------- When Admin Click on the nextListPages ------------------------------\n\t\t\t\t\t\trecreate listIndexSet started with index>index+10 and indexSet>indexSet+10\n\t\t\t ---------------------------------------------------------------------------------------*/\n    \t\tif(nextListPagesSignal!=null && nextListPagesSignal!=0L && listIndexSet.size()>0){\n    \t\t\tOrdersDTO orderDTOPrevious=(OrdersDTO)session.getAttribute(""orderPageSelected"");\n    \t\t\tif(orderDTOPrevious!=null)orderDTOPrevious.setCssStyle("""");\n    \t\t\tOrdersDTO orderDTO=listIndexSet.get(listIndexSet.size()-1);\n    \t\t\tif(orderDTO!=null)nextListPages=orderDTO.getIndex()+1;\n    \t\t\tLong totalOrders=orderService.getCountOrders(creationDateStartArg, creationDateEndArg,reportDateBetween, userLogin, lsOrderId, status);\n    \t\t\tString strcount=totalOrders.toString();\n    \t\t\tInteger sizeList=Integer.parseInt(strcount) / PAGE_ITEMS_COUNT;\n    \t\t\tif(nextListPages<=sizeList+1){\n        \t\t\tlistIndexSet=new ArrayList<OrdersDTO>();\n        \t\t\tfor(int i=nextListPages;i<=sizeList+1 && i<=nextListPages+10;i++){\n        \t\t\t\tOrdersDTO ord=new OrdersDTO();\n        \t\t\t\tord.setCssStyle("""");\n        \t\t\t\tord.setIndex(i);\n        \t\t\t\tlistIndexSet.add(ord);\n        \t\t\t}\n        \t\t\tif(nextListPages<=sizeList+1){\n        \t\t\t\tindexSet=nextListPages-1;\n            \t\t\tOrdersDTO orderPageSelected=listIndexSet.get(0);\n            \t\t\torderPageSelected.setCssStyle(""background-color:#FFFF99;border:1px solid #CCCCCC;"");\n            \t\t\tindexSet=indexSet*PAGE_ITEMS_COUNT;\n            \t\t\tsession.setAttribute(""indexSet"",indexSet);\n            \t\t\tsession.setAttribute(""nextListPages"",nextListPages);\n            \t\t\tsession.setAttribute(""listIndexSet"",listIndexSet);\n            \t\t\tsession.setAttribute(""orderPageSelected"",orderPageSelected);\n        \t\t\t}\n    \t\t\t}\n    \t\t}\n\n\t\t\t/*----------------- When Admin Click on the previousListPages --------------------------\n\t\t\t\t\trecreate listIndexSet started with index< index-10 and indexSet<indexSet-10\n\t\t\t ---------------------------------------------------------------------------------------*/\n    \t\tif(prevListPagesSignal!=null && prevListPagesSignal!=0L && listIndexSet.size()>0){\n    \t\t\tOrdersDTO orderDTOPrevious=(OrdersDTO)session.getAttribute(""orderPageSelected"");\n    \t\t\tif(orderDTOPrevious!=null)orderDTOPrevious.setCssStyle("""");\n    \t\t\tnextListPages=(Integer)session.getAttribute(""nextListPages"");\n    \t\t\tif(nextListPages!=null && nextListPages>=11){\n    \t\t\t\tprevListPages=nextListPages-11;\n    \t\t\t\tlistIndexSet=new ArrayList<OrdersDTO>();\n        \t\t\tfor(int i=prevListPages;i<nextListPages;i++){\n        \t\t\t\tOrdersDTO ord=new OrdersDTO();\n        \t\t\t\tord.setCssStyle("""");\n        \t\t\t\tord.setIndex(i);\n        \t\t\t\tlistIndexSet.add(ord);\n        \t\t\t}\n         \t\t\tindexSet=prevListPages-1;\n            \t\tOrdersDTO orderPageSelected=listIndexSet.get(0);\n            \t\torderPageSelected.setCssStyle(""background-color:#FFFF99;border:1px solid #CCCCCC;"");\n            \t\tindexSet=indexSet*PAGE_ITEMS_COUNT;\n            \t\tnextListPages=prevListPages;\n            \t\tsession.setAttribute(""nextListPages"",nextListPages);\n            \t\tsession.setAttribute(""indexSet"",indexSet);\n            \t\tsession.setAttribute(""listIndexSet"",listIndexSet);\n            \t\tsession.setAttribute(""orderPageSelected"",orderPageSelected);\n    \t \t\t}\n    \t\t}\n \n\t\t\t/*----------------- When Admin change province -----------------------------------------\n\t\t\t\t\t\t\t\tCheck a list off this province\n\t\t\t ---------------------------------------------------------------------------------------*/\n\t\t\t\thashProvinces=(Hashtable<String, ProvinceDTO>)session.getAttribute(""hashProvinces"");\n\t\t\t\tif(hashProvinces==null){\n\t\t\t\t\tlistProvinces=productService.getAllProvinces();\n\t\t\t\t\tHashtable<String, ProvinceDTO> hashProvinces=new Hashtable<String, ProvinceDTO>();\n\t\t\t\t\tfor(ProvinceDTO prov:listProvinces){\n\t\t\t\t\t\thashProvinces.put(prov.getCode(), prov);\n\t\t\t\t\t}\n\t\t\t\t\tsession.setAttribute(""hashProvinces"",hashProvinces);\n\t\t\t\t}\n\t\t\t\tif(code!=null && !code.equals("""")&& listOrdersDTO!=null){\n\t\t\t\t\tProvinceDTO provinceDTO=hashProvinces.get(code);\n\t\t\t\t\tif(provinceDTO!=null){\n\t\t\t\t\t\tclientProvince=provinceDTO.getCode();\n\t\t\t\t\t}\n\t\t\t\t}//else listCities=new ArrayList<CityDTO>();\n\t\t\t\tif(listOrdersDTO!=null && indexOrder!=-1){\n\t\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\t\tif(orderToEdit!=null){\n\t\t\t\t\t\torderToEdit.setClientProvince(code);\n\t\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/*------------------------------- Refresh listOrdersDTO------------------------------------\n\t\t\t\t\t\tRefresh listOrders before generation of invoiced orders XLS file \n\t\t\t\t ------------------------------------------------------------------------------------------*/\n\t\t\t\tinvoicedOrdersRefresh=(Long)session.getAttribute(""invoicedOrdersRefresh"");\n\t\t\t\tif(invoicedOrdersRefresh!=null && invoicedOrdersRefresh!=0L){\n\t\t\t\t\tlistIndexColumn=new ArrayList<Integer>();\n\t\t\t\t\tfor(int i=0;i<=34;i++){\n\t\t\t\t\t\tif(i!=2 && i<=13){\n\t\t\t\t\t\t\tlistIndexColumn.add(i);\n\t\t\t\t\t\t\tif(i!=0)listIndexColumn.add(-i);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(i==30 || i==31 || i==34){\n\t\t\t\t\t\t\tlistIndexColumn.add(i);\n\t\t\t\t\t\t\tlistIndexColumn.add(-i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlsOrderId=lsOrderId.toUpperCase();\n\t\t\t\t\tlistOrdersDTO=orderService.searchOrdersWithOptionsAndSorting(creationDateStartArg, creationDateEndArg,reportDateBetween,userLogin, lsOrderId, status, listIndexColumn,PAGE_ITEMS_COUNT,indexSet);\n\t\t\t\t\tif(findOrdersSignal!=null && findOrdersSignal!=0L)initalizeListIndexSet(session,orderService );\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\tsession.setAttribute(""invoicedOrdersRefresh"",0L);\n\t\t\t\t\treturn SUCCESS;\n\t\t\t\t}\t\n\n\t\t\t\t\n\t\t\t/*------------ When Admin click on the Button ""Delete Order"" in The OrderDtailPop --------------\n\t\t\t\t\t\t\t\tshow other pop to confirm Order Delete\n\t\t\t  ----------------------------------------------------------------------------------------------*/\n\t\t\t\tif(deleteOrderSignal!=null && deleteOrderSignal!=0L){\n\t\t\t\t\tmessage=""Attention! if you click on \\""Delete Order\\"" you can not restore it."";\n\t\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\t\tif(confirmDeleteSignal!=null && confirmDeleteSignal==0L){ //Delete Order Request \n\t\t\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\t\t\tshowConfirmDeleteOrderPop=""display:block;visibility:visible;"";\n\t\t\t\t\t}else if(confirmDeleteSignal==1L){\t\t\t\t\t\t //Delete Order Confirmed\n\t\t\t\t\t\torderService.deleteOrderByLsOrderId(orderToEdit);\n\t\t\t\t\t\t//Save this operation in table operation\n\t\t\t\t\t\tOperationsDTO operationDTO=new OperationsDTO();\n\t\t\t\t\t\tUser userAdmin=(User)session.getAttribute(""userAdmin"");\n\t\t\t\t\t\tif(userAdmin!=null)operationDTO.setUserId(userAdmin.getId());\n\t\t\t\t\t\toperationDTO.setOperationDate(new Date());\n\t\t\t\t\t\toperationDTO.setOperationType(""Delete Order"");\n\t\t\t\t\t\tString dataBefore=""[PARTNER NAME:""+orderToEdit.getUserLogin()+""];"";\n\t\t\t\t\t\tdataBefore+="" [LS_ORDER_ID:""+orderToEdit.getLsOrderId()+""];"";\n\t\t\t\t\t\tdataBefore+="" [PRODUCT_ORDER_NUMBER:""+orderToEdit.getProductOrderNumber()+""];"";\n\t\t\t\t\t\tdataBefore+="" [CLIENT_FIRST_NAME:""+orderToEdit.getClientFirstName()+""];"";\n\t\t\t\t\t\tdataBefore+="" [CLIENT_LAST_NAME:""+orderToEdit.getClientLastName()+""];"";\n\t\t\t\t\t\tdataBefore+="" [CLIENT_POSTAL_CODE:""+orderToEdit.getClientPostalCode()+""];"";\n\t\t\t\t\t\tdataBefore+="" [LS_PRODUCT_ID:""+orderToEdit.getLsProductID()+""];"";\n\t\t\t\t\t\tdataBefore+="" [UNIT_PRICE:""+orderToEdit.getUnitPrice()+""];"";\n\t\t\t\t\t\tdataBefore+="" [STATUS:""+orderToEdit.getStatus()+""];"";\n\t\t\t\t\t\toperationDTO.setDataBefore(dataBefore);\n\t\t\t\t\t\toperationDTO.setDataBefore(operationDTO.getDataBefore());\n\t\t\t\t\t\toperationDTO.setDataAfter("""");\n\t\t\t\t\t\toperationsService.insertOperation(operationDTO);\n\t\t\t\t\t\t//Remove order from the list orders\n\t\t\t\t\t\tlistOrdersDTO.remove(orderToEdit);\n\t\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\t\tshowOrderDetailPop=""visibility:hidden;display:none;"";\n\t\t\t\t\t\tshowConfirmDeleteOrderPop=""visibility:hidden;display:none;"";\n\t\t\t\t\t\t//initialize index orders\n\t\t\t\t\t\tint indexOrder=0;\n\t\t\t\t\t\tint indexRow=0;\n\t\t\t\t\t\tfor(OrdersDTO orderDTO:listOrdersDTO){\n\t\t\t\t\t\t\torderDTO.setIndex(indexOrder);\n\t\t\t\t\t\t\tindexOrder++;\n\t\t\t\t\t\t\tindexRow=0;\n\t\t\t\t\t\t\tfor(OrdersRows orderRows:orderDTO.getRowsList()){\n\t\t\t\t\t\t\t\torderRows.setIndex(indexRow);\n\t\t\t\t\t\t\t\tindexRow++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\t}else{\t\t\t\t\t\t\t\t\t\t\t\t\t//Cancel Order Delete\n\t\t\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\t\t\tshowConfirmDeleteOrderPop=""visibility:hidden;display:none;"";\n\t\t\t\t\t}\n\n\t\t\t\t\treturn SUCCESS;\n\t\t\t\t}\n\n\n\t\t//#################################################################################################\t\t\n\t\t\t\t/*------------ When Admin click on the Button ""Delete Order"" in The OrderDtailPop --------------\n\t\t\t\t\t\t\t\t\tshow other pop to confirm Order Delete\n\t\t\t\t  ----------------------------------------------------------------------------------------------*/\n\t\t\t\t\tif(cancelOrderSignal!=null && cancelOrderSignal!=0L){\n\t\t\t\t\t\tmessage=""Attention! if you click on \\""Delete Order\\"" you can not restore it."";\n\t\t\t\t\t\tSystem.out.println(""strPrint:""+strPrint);\n\t\t\t\t\t\tList<OrdersDTO>listOrdersToCanceled=null;\n\t\t\t\t\t\tlistOrdersToCanceled=getOrdersToCancel(strPrint);\n\t\t\t\t\t\tfor(OrdersDTO ord:listOrdersToCanceled){\n\t\t\t\t\t\t\tSystem.out.println(""Order:""+ord.getLsOrderId());\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/*orderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\t\t\tif(confirmDeleteSignal!=null && confirmDeleteSignal==0L){ //Delete Order Request \n\t\t\t\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\t\t\t\tshowConfirmDeleteOrderPop=""display:block;visibility:visible;"";\n\t\t\t\t\t\t}else if(confirmDeleteSignal==1L){\t\t\t\t\t\t //Delete Order Confirmed\n\t\t\t\t\t\t\torderService.deleteOrderByLsOrderId(orderToEdit);\n\t\t\t\t\t\t\t//Save this operation in table operation\n\t\t\t\t\t\t\tOperationsDTO operationDTO=new OperationsDTO();\n\t\t\t\t\t\t\tUser userAdmin=(User)session.getAttribute(""userAdmin"");\n\t\t\t\t\t\t\tif(userAdmin!=null)operationDTO.setUserId(userAdmin.getId());\n\t\t\t\t\t\t\toperationDTO.setOperationDate(new Date());\n\t\t\t\t\t\t\toperationDTO.setOperationType(""Delete Order"");\n\t\t\t\t\t\t\tString dataBefore=""[PARTNER NAME:""+orderToEdit.getUserLogin()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [LS_ORDER_ID:""+orderToEdit.getLsOrderId()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [PRODUCT_ORDER_NUMBER:""+orderToEdit.getProductOrderNumber()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [CLIENT_FIRST_NAME:""+orderToEdit.getClientFirstName()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [CLIENT_LAST_NAME:""+orderToEdit.getClientLastName()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [CLIENT_POSTAL_CODE:""+orderToEdit.getClientPostalCode()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [LS_PRODUCT_ID:""+orderToEdit.getLsProductID()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [UNIT_PRICE:""+orderToEdit.getUnitPrice()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [STATUS:""+orderToEdit.getStatus()+""];"";\n\t\t\t\t\t\t\toperationDTO.setDataBefore(dataBefore);\n\t\t\t\t\t\t\toperationDTO.setDataBefore(operationDTO.getDataBefore());\n\t\t\t\t\t\t\toperationDTO.setDataAfter("""");\n\t\t\t\t\t\t\toperationsService.insertOperation(operationDTO);\n\t\t\t\t\t\t\t//Remove order from the list orders\n\t\t\t\t\t\t\tlistOrdersDTO.remove(orderToEdit);\n\t\t\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\t\t\tshowOrderDetailPop=""visibility:hidden;display:none;"";\n\t\t\t\t\t\t\tshowConfirmDeleteOrderPop=""visibility:hidden;display:none;"";\n\t\t\t\t\t\t\t//initialize index orders\n\t\t\t\t\t\t\tint indexOrder=0;\n\t\t\t\t\t\t\tint indexRow=0;\n\t\t\t\t\t\t\tfor(OrdersDTO orderDTO:listOrdersDTO){\n\t\t\t\t\t\t\t\torderDTO.setIndex(indexOrder);\n\t\t\t\t\t\t\t\tindexOrder++;\n\t\t\t\t\t\t\t\tindexRow=0;\n\t\t\t\t\t\t\t\tfor(OrdersRows orderRows:orderDTO.getRowsList()){\n\t\t\t\t\t\t\t\t\torderRows.setIndex(indexRow);\n\t\t\t\t\t\t\t\t\tindexRow++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\t\t}else{\t\t\t\t\t\t\t\t\t\t\t\t\t//Cancel Order Delete\n\t\t\t\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\t\t\t\tshowConfirmDeleteOrderPop=""visibility:hidden;display:none;"";\n\t\t\t\t\t\t}*/\n\n\t\t\t\t\t\treturn SUCCESS;\n\t\t\t\t\t}\n\n\t\t//#############################################################################################\t\t\t\n\t\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t/*------ When Admin click the ""Edit link"" in the Order Table for Edit NOTE -----\n\t\t\t\t\t\t\tshow only field Edit Note\n\t\t\t  ------------------------------------------------------------------------------*/\n\t\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && showOnlyEditNote!=null && showOnlyEditNote!=0L){\n\t\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\t\tfor(OrdersDTO order:listOrdersDTO){\n\t\t\t\t\t\torder.setShowOnlyEditNote(0L);\n\t\t\t\t\t\torder.setCssRow("""");\n\t\t\t\t\t}\n\t\t\t\torderToEdit.setShowOnlyEditNote(1L);\n\t\t\t\torderToEdit.setCssRow(""background-color:#FF9966;"");\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\tlistOrdersDTO=(ArrayList<OrdersDTO>) session.getAttribute(""listOrdersDTOReport"");\t\n\t\t\t\treturn SUCCESS;\n\t\t\t\t}\n\n\t\t\t\t/*------------ When Admin click on link ""Save Edit Note in the Orders Table"" ----------\n\t\t\t\t\t\t\t\t\t\t\t\t\tsave Only  notes\n\t\t\t\t  -------------------------------------------------------------------------------------*/\n\t\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && saveOnlyNoteSignal!=null && saveOnlyNoteSignal!=0L){\n\t\t\t\tif(indexOrder!=null){\n\t\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\t\tif(orderToEdit!=null){\n\t\t\t\t\t\torderToEdit.setNotes(notes);\n\t\t\t\t\t\torderToEdit.setShowRowShipping(0L);\n\t\t\t\t\t\torderToEdit.setShowOnlyEditNote(0L);\n\t\t\t\t\t\torderToEdit.setCssRow("""");\n\t\t\t\t\t\t//Save Note\n\t\t\t\t\t\tBoolean sucess=orderService.updateShippingOrderElements(orderToEdit);\n\t\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn SUCCESS;\n\t\t\t\t}\n\n\t\t\t/*------------ When Admin click the ""Edit link"" in the Order Table -------------\n\t\t\t\t\t\t\t\tshow fields to edit shipping parameters\n\t\t\t  ------------------------------------------------------------------------------*/\t\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && showRowShipping!=null && showRowShipping!=0L){\n\n\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\tfor(OrdersDTO order:listOrdersDTO){\n\t\t\t\t\torder.setShowRowShipping(0L);\n\t\t\t\t\torder.setCssRow("""");\n\t\t\t\t}\t\t\t\n\t\t\t\t //only Admins who has Active = true of action name='All' can change shipping settings \n\t\t\t\t //of orders shipped or invoiced\n\t\t\t\tif(usersPrivChangeShippedStatus==null && orderToEdit.getStatus()!=null &&\n\t\t\t\t   (orderToEdit.getStatus().equals(""shipped"")||orderToEdit.getStatus().equals(""invoiced""))){\n\t\t\t\t\tshowRowShipping=0L;\n\t\t\t\t\treturn SUCCESS;\n\t\t\t\t}\n\n\t\t\t\tif(orderToEdit!=null){\n\t\t\t\t\torderToEdit.setShowRowShipping(1L);\n\t\t\t\t\torderToEdit.setShowOnlyEditNote(1L);\n\t\t\t\t\torderToEdit.setCssRow(""background-color:#FF9966;"");\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\tlistOrdersDTO=(ArrayList<OrdersDTO>) session.getAttribute(""listOrdersDTOReport"");\n\t\t\t\t}\n\t\t\t\tif(orderToEdit.getStatus().equals(""open"")){\n\t\t\t\t\tstatusId=0L;\n\t\t\t\t}else if(orderToEdit.getStatus().equals(""progress"")){\n\t\t\t\t\tstatusId=1L;\n\t\t\t\t}else if(orderToEdit.getStatus().equals(""shipped"")){\n\t\t\t\t\tstatusId=2L;\n\t\t\t\t}else if(orderToEdit.getStatus().equals(""invoiced"")){\n\t\t\t\t\tstatusId=3L;\n\t\t\t\t}\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n    \t\t\n\t\t\t/*------------ When Admin click on link ""Save in the Orders Table"" ----------\n\t\t\t\t\t\t\tsave all shipping parameters and notes\n\t\t\t ----------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && saveShippingSignal!=null && saveShippingSignal!=0L){\n\t\t\t\tif(indexOrder!=null){\n\t\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\t\tif(orderToEdit!=null){\n\t\t\t\t\t\tDate shippedDateToEdit=null;\n\t\t\t\t\t\tfrm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\t\t\t\tif (((strShippedDate)!=null)&&(!"""".equals(strShippedDate))){\n\t\t\t\t\t\t\tstrShippedDate=strShippedDate.replaceAll("" "", """");\n\t\t\t    \t\t\ttry {\n\t\t\t    \t\t\t\tDate date = frm.parse(strShippedDate);\n\t\t\t    \t\t\t\tshippedDateToEdit=date;\n\t\t\t    \t\t\t}\n\t\t\t    \t\t\tcatch (Exception pe) {\n\t\t\t    \t\t\t\tshippedDateToEdit=null;\n\t\t\t    \t\t\t}\n\t\t\t    \t\t}\n\t\t\t\t\t\tif (((strShippedDate)!=null)&&(!"""".equals(strShippedDate))&& strShippedDate.length()<=8)shippedDateToEdit=orderToEdit.getShippedDate();\n\t\t\t\t\t\tDouble shippingPrice=null;\n\t   \t\t\t\t\tif(strShippingPrice!=null && !strShippingPrice.equals("""")){\n\t   \t\t\t\t\t\tstrShippingPrice=strShippingPrice.replaceAll("" "", """");\n    \t\t\t\t\t\tint index=strShippingPrice.indexOf("","");\n    \t\t\t\t\t\tif(index>=0){\n    \t\t\t\t\t\t\tString strUnitPrice1=strShippingPrice.substring(0, index);\n    \t\t\t\t\t\t\tString strUnitPrice2= strShippingPrice.substring(index+1, strShippingPrice.length());\n    \t\t\t\t\t\t\tstrShippingPrice=strUnitPrice1+"".""+strUnitPrice2;\n    \t\t\t\t\t\t}\n                          \t\n                          \ttry {\n                          \t\tshippingPrice = Double.parseDouble(strShippingPrice);\n                          \t}\n                          \tcatch (Exception pe) {\n                          \t\tshippingPrice=null;\n                          \t}\n    \t\t\t\t\t}\n\n                      \tif(trackingNumber!=null)trackingNumber=trackingNumber.replaceAll(""^ +| +$|( )+"", ""$1"");\n                      \tif(shippingCompany!=null)shippingCompany=shippingCompany.replaceAll(""^ +| +$|( )+"", ""$1"");\n\t\t\t\t\t\torderToEdit.setShippingPrice(shippingPrice);\n\t\t\t\t\t\torderToEdit.setShippedDate(shippedDateToEdit);\n\t\t\t\t\t\torderToEdit.setNotes(notes);\n\t\t\t\t\t\tif(newStatus!=null && !newStatus.equals(""""))orderToEdit.setStatus(newStatus);\n\t\t\t\t\t\torderToEdit.setShippingCompany(shippingCompany);\n\t\t\t\t\t\torderToEdit.setTrackingNumber(trackingNumber);\n\t\t\t\t\t\torderToEdit.setShowRowShipping(0L);\n\t\t\t\t\t\torderToEdit.setShowOnlyEditNote(0L);\n\t\t\t\t\t\tOrdersRows row=orderToEdit.getRowsList().get(0);\n\t\t\t\t\t\trow.setShippingPrice(shippingPrice);\n\t\t\t\t\t\trow.setShippingCompany(shippingCompany);\n\t\t\t\t\t\trow.setTrackingNumber(trackingNumber);\n\t\t\t\t\t\torderToEdit.setCssRow("""");\n  \n\t\t\t\t\t\tif(newStatus!=null && !newStatus.equals("""")){ // if admin click on the save behind status\n\t\t\t\t\t\t\torderService.updateStatusByLsOrderId(orderToEdit.getLsOrderId(), newStatus);\n\t\t\t\t\t\t\torderToEdit.setStatus(newStatus);\n\t\t\t\t\t\t\tif(!newStatus.equals(""shipped"")&& !newStatus.equals(""invoiced"")){\n\t\t\t\t\t\t\t\torderToEdit.setShippingPrice(null);\n\t\t\t\t\t\t\t\torderToEdit.setTrackingNumber(null);\n\t\t\t\t\t\t\t\torderToEdit.setShippedDate(null);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}else{// if admin click on the save other than Status\n\t\t\t\t\t\t\tif(orderToEdit.getShippedDate()!=null && \n\t\t\t\t\t\t\t\t   orderToEdit.getTrackingNumber()!=null && !orderToEdit.getTrackingNumber().equals("""")&&\n\t\t\t\t\t\t\t\t   orderToEdit.getShippingCompany()!=null && !orderToEdit.getShippingCompany().equals("""")&&\n\t\t\t\t\t\t\t\t   orderToEdit.getShippingPrice()!=null && orderToEdit.getStatus()!=null){\n\t\t\t\t\t\t\t\t   if(orderToEdit.getStatus().equals(""open"")||\n\t\t\t\t\t\t\t\t\t   orderToEdit.getStatus().equals(""progress"")){\n\t\t\t\t\t\t\t\t\t   orderService.updateStatusByLsOrderId(orderToEdit.getLsOrderId(), ""shipped"");\n\t\t\t\t\t\t\t\t\t   orderToEdit.setStatus(""shipped"");   \n\t\t\t\t\t\t\t\t   }\n\t\t\t\t\t\t\t}else{\t\t\t\t\t\t\t   \n\t\t\t\t\t\t\t\t   if(usersPrivChangeShippedStatus!=null && !orderToEdit.getStatus().equals(""open"") && \n\t\t\t\t\t\t\t\t\t\t!orderToEdit.getStatus().equals(""progress"")){\n\t\t\t\t\t\t\t\t\t\t orderService.updateStatusByLsOrderId(orderToEdit.getLsOrderId(), ""progress"");\n\t\t\t\t\t\t\t\t\t\t orderToEdit.setStatus(""progress"");\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// if admin click on the save other then status(save notes, save shipping company ...)\n\t\t\t\t\t\tBoolean sucess=orderService.updateShippingOrderElements(orderToEdit);\n\t\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*------------ When Admin click on icon findOrders.png ----------\n\t\t\t\t\t\t\t\tcheck user and complete infos client\n\t\t\t ----------------------------------------------------------------*/\n\t\t\tif(findOrdersSignal!=null && findOrdersSignal!=0L||\n\t\t\t\t\t(pageIndexSignal!=null && pageIndexSignal!=0L) ||\n\t\t\t\t\t(nextListPagesSignal!=null && nextListPagesSignal!=0L)||\n\t\t\t\t\t(prevListPagesSignal!=null && prevListPagesSignal!=0L)){\t\n\t\t\t\tlistIndexColumn=new ArrayList<Integer>();\n\t\t\t\tfor(int i=0;i<=34;i++){\n\t\t\t\t\tif(i!=2 && i<=13){\n\t\t\t\t\t\tlistIndexColumn.add(i);\n\t\t\t\t\t\tif(i!=0)listIndexColumn.add(-i);\n\t\t\t\t\t}\n\t\t\t\t\tif(i==30 || i==31 || i==34){\n\t\t\t\t\t\tlistIndexColumn.add(i);\n\t\t\t\t\t\tlistIndexColumn.add(-i);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlsOrderId=lsOrderId.toUpperCase();\n\t\t\t\t//if(findOrdersSignal!=null && findOrdersSignal!=0L)initalizeListIndexSet(session,orderService );\n\t\t\t\t\n\t\t\t\tlistOrdersDTO=orderService.searchOrdersWithOptionsAndSorting(creationDateStartArg, creationDateEndArg,reportDateBetween,userLogin, lsOrderId, status, listIndexColumn,PAGE_ITEMS_COUNT,indexSet);\n\t\t\t\t\n\t\t\t\tsession.setAttribute(""listIndexColumn"",listIndexColumn);\n\t\t\t\tsession.setAttribute(""sizeResult"",sizeResult);\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\tif(findOrdersSignal!=null && findOrdersSignal!=0L)initalizeListIndexSet(session,orderService );\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*------------ When Admin click on the icon sorting of column ----------\n\t\t\t\t\t\t\tseach result with option of sorting list\n\t\t\t -----------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && sortingOrdersSignal!=null && sortingOrdersSignal!=0L){\t\n\t\t\t\tlistIndexColumn=(List<Integer>)session.getAttribute(""listIndexColumn"");\n\t\t\t\tasc=(asc==1?-1:1);\n\t\t\t\tint nextElement=listIndexColumn.get(0);\n\t\t\t\tfieldForSorting=asc*fieldForSorting;\n\t\t\t\tlistIndexColumn.set(0,fieldForSorting);\n\t\t\t\tfor(int i=1;i<listIndexColumn.size();i++){\n\t\t\t\t\tint element=listIndexColumn.get(i);\n\t\t\t\t\tlistIndexColumn.set(i,nextElement);\n\t\t\t\t\tnextElement=element;\n\t\t\t\t}\t\n\t\t\t\tlistOrdersDTO=orderService.searchOrdersWithOptionsAndSorting(creationDateStartArg, creationDateEndArg,reportDateBetween,userLogin, lsOrderId, status, listIndexColumn,PAGE_ITEMS_COUNT,indexSet);\n\t\t\t\tint balance=0;\n\t\t\t\tint OrderIndex=0;\n\t\t\t\tfor(OrdersDTO orDTO: listOrdersDTO){\n\t\t\t\t\tbalance=(balance==1?0:1);\n\t\t\t\t\tif(balance==1){\n\t\t\t\t\t\torDTO.setCssStyle(""background-color: rgb(245,249,252);border-right: 1px solid #CCCCCC;border-left:1px solid #CCCCCC;border-top:  1px solid #CCCCCC;"");\n\t\t\t\t\t}else{\n\t\t\t\t\t\torDTO.setCssStyle(""background-color: color:white;border-right:1px solid #CCCCCC;border-left:1px solid #CCCCCC;border-top:1px solid #CCCCCC;"");\n\t\t\t\t\t}\n\t\t\t\t\torDTO.setIndex(OrderIndex); \n\t\t\t\t\tOrderIndex++;\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""listIndexColumn"",listIndexColumn);\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\tsession.setAttribute(""asc"", asc);\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*------ when Admin click on the lsOrder link in table -----------\n\t\t\t\t\tshow popup detail and allow admin to update Order\n\t\t\t  ---------------------------------------------------------------*/\n\t\t\tif (listOrdersDTO!=null && listOrdersDTO.size()>0 && editOrderSignal!=null && editOrderSignal!=0L){\n\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\tif(orderToEdit==null)orderToEdit=new OrdersDTO();\n\t\t\t\tif(orderToEdit.getProductOrderDate()==null)strProductOrderDate="""";\n\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*--- when Admin click on the cancel Button of orderDetailPop ---\n\t\t\t\t\twe mast just hide popup OrderDetail\n\t\t\t  ---------------------------------------------------------------*/\n    \t\tif (listOrdersDTO!=null && listOrdersDTO.size()>0 && cancelSignal!=null && cancelSignal!=0L){\n\t\t\t\tshowOrderDetailPop=""visibility:hidden;display:none;"";\n    \t\t\treturn SUCCESS;\n    \t\t}\n\n\t\t\t/*-------------------- When Admin left lsProduct TextField -------------\n\t\t\t\t\t\t\t\tcheck userPrice in DB, and write it in web view\n\t\t\t -----------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && checkProductPriceSignal!=null && checkProductPriceSignal!=0L){\n\t\t\t\tOrdersDTO orderDTOToUpdate=listOrdersDTO.get(indexOrder);\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\tOrdersRows orderRowToUpadate=orderDTOToUpdate.getRowsList().get(indexRow);\n\t\t\t\tUserProductPriceDTO userProductPrice=productService.getUsrPPriceByLsproductId(userId, lsProductID);\n\t\t\t\torderRowToUpadate.setCss("""");\n\t\t\t\torderRowToUpadate.setCssPrice("""");\n\t\t\t\tif(userProductPrice==null){\n\t\t\t\t\torderRowToUpadate.setCss(""background-color:red;"");\n\t\t\t\t\torderRowToUpadate.setProductDescription(""""); \n\t\t\t\t\torderRowToUpadate.setStock(null);\n\t\t\t\t\torderRowToUpadate.setProductId(null);\n\t\t\t\t\torderRowToUpadate.setLsProductID(lsProductID);\n\t\t\t\t\torderRowToUpadate.setLsPrice(null);\n\t\t\t\t}else{\n\t\t\t\t\tDouble usrPrice=orderRowToUpadate.getUnitPrice();\n\t\t\t\t\tif(usrPrice==null)usrPrice=0D;\n\t\t\t\t\tif(usrPrice < userProductPrice.getPriceNum()){\n\t\t\t\t\t\torderRowToUpadate.setCssPrice(""background-color:red;"");\t\n\t\t\t\t\t}\n\t\t\t\t\torderRowToUpadate.setProductDescription(userProductPrice.getProductTitle());\n\t\t\t\t\torderRowToUpadate.setStock(userProductPrice.getStock());\n\t\t\t\t\torderRowToUpadate.setProductId(userProductPrice.getProductId());\n\t\t\t\t\torderRowToUpadate.setLsProductID(userProductPrice.getLsProductId());\n\t\t\t\t\torderRowToUpadate.setLsPrice(userProductPrice.getPriceNum());\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\torderToEdit=orderDTOToUpdate;\n\t\t\t\tlistOrdersDTO=(List<OrdersDTO>)session.getAttribute(""listOrdersDTOReport"");\n\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*----------------- When Admin check on saveTemporaryRow Icon --------------------------\n\t\t\t\t\twe must first obtained the object that contains the list of rows,\n\t\t\t\t\tafter we accede to the row by index recovered by web view and change it\n\t\t\t ---------------------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && saveTemporaryRowSignal!=null && saveTemporaryRowSignal!=0L){\n\t\t\t\tOrdersDTO orderDTOToUpdate=listOrdersDTO.get(indexOrder);\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\tOrdersRows orderRowToSaveMemory=orderDTOToUpdate.getRowsList().get(indexRow);\n\t\t\t\torderRowToSaveMemory.setIcon(""images/orders/itemValidated.png"");\n\t\t\t\tif(orderRowToSaveMemory!=null){\n\t\t\t\t\torderRowToSaveMemory.setQuantity(quantity); \n\t\t\t\t\torderRowToSaveMemory.setLsProductID(lsProductID);\n\t\t\t\t\torderRowToSaveMemory.setProductDescription(productDescription);\n\t\t\t\t\torderRowToSaveMemory.setUnitPrice(unitPrice);\n\t\t\t\t\torderRowToSaveMemory.setCssPrice(""background-color:#FF6666;"");\n\t\t\t\t\torderRowToSaveMemory.setCssQuantity(""background-color:#FF6666;"");\n\t\t\t\t\tif(quantity!=null && quantity>0D)orderRowToSaveMemory.setCssQuantity("""");\n\t\t\t\t\tif(unitPrice!=null && orderRowToSaveMemory.getLsPrice()!=null\n\t\t\t\t\t  && unitPrice>=orderRowToSaveMemory.getLsPrice())\n\t\t\t\t\t  orderRowToSaveMemory.setCssPrice("""");\n\t\t\t\t\torderRowToSaveMemory.setShippingFee(shippingFee);\n\t\t\t\t\torderRowToSaveMemory.setShippingCompany(shippingCompany);\n\t\t\t\t\torderRowToSaveMemory.setTrackingNumber(trackingNumber);\t\n\t\t\t\t\tint indexOrder=0;\n\t\t\t\t\tint indexRow=0;\n\t\t\t\t\tfor(OrdersDTO orderDTO:listOrdersDTO){\n\t\t\t\t\t\torderDTO.setIndex(indexOrder);\n\t\t\t\t\t\tindexOrder++;\n\t\t\t\t\t\tindexRow=0;\n\t\t\t\t\t\tfor(OrdersRows orderRows:orderDTO.getRowsList()){\n\t\t\t\t\t\t\torderRows.setIndex(indexRow);\n\t\t\t\t\t\t\tindexRow++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\tlistOrdersDTO=(List<OrdersDTO>)session.getAttribute(""listOrdersDTOReport"");\n\t\t\t\t}\n\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*------- When Admin click on addSimilarRow Icon on the OrderDetailPop --------\n\t\t\t\t\t\t\t\tAdd one Row Similar at the previews\n\t\t\t  -----------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && addSimilarRowSignal!=null && addSimilarRowSignal!=0L){\n\t\t\t\tOrdersDTO orderDTOToUpdate=listOrdersDTO.get(indexOrder);\n\t\t\t\t//generate lsOrderId to new order\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\tOrdersRows orderRowToClone=orderDTOToUpdate.getRowsList().get(indexRow);\n\t\t\t\tif(orderRowToClone!=null){\n\t\t\t\t\tif(!orderRowToClone.getIcon().equals(""images/orders/itemValidated.png"")){\n\t\t\t\t\t\torderRowToClone.setQuantity(quantity); \n\t\t\t\t\t\torderRowToClone.setLsProductID(lsProductID);\n\t\t\t\t\t\torderRowToClone.setStock(stock);\n\t\t\t\t\t\torderRowToClone.setProductDescription(productDescription);\n\t\t\t\t\t\torderRowToClone.setUnitPrice(unitPrice);\n\t\t\t\t\t\torderRowToClone.setShippingFee(shippingFee);\n\t\t\t\t\t\torderRowToClone.setShippingCompany(shippingCompany);\n\t\t\t\t\t\torderRowToClone.setTrackingNumber(trackingNumber);\n\t\t\t\t\t}\n\t\t\t\t\torderRowToClone.setIcon(""images/orders/itemValidated.png"");\n\t\t\t\t\tOrdersRows orderRowToAdd=DTOFactory.getOrderRowClone(orderRowToClone);\n\t\t\t\t\torderRowToAdd.setId(-1L);\n\t\t\t\t\t\n\t\t\t\t\torderDTOToUpdate.getRowsList().add(indexRow+1,orderRowToAdd);\n\t\t\t\t\tint indexOrder=0;\n\t\t\t\t\tint indexRow=0;\n\t\t\t\t\tfor(OrdersDTO orderDTO:listOrdersDTO){\n\t\t\t\t\t\torderDTO.setIndex(indexOrder);\n\t\t\t\t\t\tindexOrder++;\n\t\t\t\t\t\tindexRow=0;\n\t\t\t\t\t\tfor(OrdersRows orderRows:orderDTO.getRowsList()){\n\t\t\t\t\t\t\torderRows.setIndex(indexRow);\n\t\t\t\t\t\t\tindexRow++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\tlistOrdersDTO=(List<OrdersDTO>)session.getAttribute(""listOrdersDTOReport"");\n\t\t\t\t}\n\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*-------- When Admin click on Delete Row Icon of orderDetail Popup-----------\n\t\t\t\t\t\t\t\t\tDelete this row using index\n\t\t\t -----------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && deleteRowSignal!=null && deleteRowSignal!=0L){\n\t\t\t\tOrdersDTO orderDTO=listOrdersDTO.get(indexOrder);\n\t\t\t\torderDTO=fillDataOrderDTO(orderDTO);\n\t\t\t\tint nb=orderService.nbOrderRowsNotDeleted(orderDTO.getRowsList());\n\t\t\t\tif(orderDTO!=null && orderDTO.getRowsList().size()>1){\n\t\t\t\t\tfor(int i=0 ;i<orderDTO.getRowsList().size();i++){\n\t\t\t\t\t\tif(i==indexRow && nb>1){\n\t\t\t\t\t\t\torderDTO.getRowsList().get(i).setToDelete(1);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*------ when Admin click on the button save of orderDetail ------------------\n\t\t\t\t\t save order and hide pup  \n\t\t\t  ----------------------------------------------------------------------------*/\n    \t\tif (listOrdersDTO!=null && listOrdersDTO.size()>0 && saveOrdersSignal!=null && saveOrdersSignal!=0L){\n    \t\t\tsession.setAttribute(""orderNotSavedAtFirst"",null);\n\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\torderToEdit=fillDataOrderDTO(orderToEdit);\n\t\t\t\torderService.updateOrderByLsOrderId(orderToEdit);\n\t\t\t\tfor(OrdersRows row:orderToEdit.getRowsList()){\n\t\t\t\t\tif(row.getId()==-1)row.setId(0L);\n\t\t\t\t}\n\t\t\t\tOrdersRows row=orderToEdit.getRowsList().get(0);\n\t\t\t\tif(row!=null){\n\t\t\t\t\torderToEdit.getShippedDate();\n\t\t\t\t\torderToEdit.setLsPrice(row.getLsPrice());\n\t\t\t\t\torderToEdit.setLsProductID(row.getLsProductID());\n\t\t\t\t\torderToEdit.setProductDescription(row.getProductDescription());\n\t\t\t\t\torderToEdit.setQuantity(row.getQuantity());\n\t\t\t\t}\n\t\t\t\torderToEdit=DTOFactory.getOrderDTOConsideredMissingInfo(orderToEdit,hashProvinces);\n\t\t\t\tlistIndexColumn=(List<Integer>)session.getAttribute(""listIndexColumn"");\n\t\t\t\tlistOrdersDTO=orderService.searchOrdersWithOptionsAndSorting(creationDateStartArg, creationDateEndArg,reportDateBetween,userLogin, lsOrderId, status, listIndexColumn,PAGE_ITEMS_COUNT,indexSet);\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\tmessage=""Saving has completed successfuly"";\n\t\t\t\tshowSaveSuccessPop=""display:block;visibility:visible;"";\n\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n    \t\t\treturn SUCCESS;\n    \t\t}\n\n\t\t\t/*------ When user change Quantity to split in orderDetailPop -----------\n\t\t\t\t\t prepare order to split from two other orders witch\n\t\t\t\t \t one must have a lsOrder with underscore \n\t \t\t ------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && quantityToChangeSignal!=null && quantityToChangeSignal!=0L){\n\t\t\t\tOrdersDTO orderToChangeQt=listOrdersDTO.get(indexOrder);\n\t\t\t\tOrdersRows orderRow=orderToChangeQt.getRowsList().get(indexRow);\n\t\t\t\torderToChangeQt=fillDataOrderDTO(orderToChangeQt);\n\t\t\t\tif(quantityToChange<orderRow.getQuantity())orderRow.setQuantityToSplit(quantityToChange);\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\tlistOrdersDTO=(List<OrdersDTO>)session.getAttribute(""listOrdersDTOReport"");\n\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*-------------------- Duplicate Order ----------------------------------------\n\t\t\t\t\t\t\tCreate order in just in memory\n\t \t\t -----------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && duplicateOrderSignal!=null && duplicateOrderSignal!=0L){\n\t\t\tOrdersDTO orderToClone=listOrdersDTO.get(indexOrder);\n\t\t\torderToClone=fillDataOrderDTO(orderToClone);\n\t\t\thashOrders=new Hashtable<String, OrdersDTO>();\n\t\t\tfor(OrdersDTO ord:listOrdersDTO){\n\t\t\t\thashOrders.put(ord.getLsOrderId(), ord);\n\t\t\t}\n\t\t\tOrdersDTO orderClone=DTOFactory.getOrderDTOSplitted(orderToClone);\n\t\t\tif(orderClone!=null){\n\t\t\t\torderClone.setDuplicate(true);\n\t\t\t\tString lsOrder=orderClone.getLsOrderId();\n\t\t\t\tString strlsOrder=orderService.generateLsOrderId(lsOrder, hashOrders);\n\t\t\t\torderClone.setLsOrderId(strlsOrder);//rgb(116,180,209)\n\t\t\t\torderClone.setCssStyle(""background-color:#FFFF99;border-right: 1px solid #CCCCCC;border-left:1px solid #CCCCCC;border-top:  1px solid #CCCCCC;"");\n\t\t\t\torderToEdit=orderClone;\n\t\t\t\torderToEdit.setBackgroundColor(""background-color:#FFFF99;"");\n\t\t\t\tlistOrdersDTO.add(indexOrder+1,orderClone);\n\t\t\t\tindexOrder=0;\n\t\t\t\tfor(OrdersDTO ord: listOrdersDTO){\n\t\t\t\t\tord.setIndex(indexOrder);\n\t\t\t\t\tindexOrder++;\n\t\t\t\t}\n\t\t\t\torderService.updateOrderByLsOrderId(orderToClone);\n\t\t\t\torderService.insertOrderWithRows(orderClone);\n\t\t\t\torderClone.setDuplicate(false);\n\t\t\t\tfor(OrdersRows row:orderClone.getRowsList()) {\n\t\t\t\t\tif(row.getId()<0L)row.setId(0L);\n\t\t\t\t}\n\t\t\t\tif(listOrdersDTO.size()>0){\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t}\n\t\t\t}else orderToEdit=orderToClone;\n\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*-------------------- When user check print item -----------------------------\n\t\t\t\t\tAdd or remove this element from the orders to print\n\t \t\t -----------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && checkBoxPrintSignal!=null && checkBoxPrintSignal!=0L){\n\t\t\t\tOrdersDTO orderDTOInList=listOrdersDTO.get(indexOrder);\n\t\t\t\torderDTOInList.setPrint(checkBoxPrint);\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*-------------------- When user check print item -----------------------------\n\t\t\t\t\tAdd or remove this element from the orders to print\n\t \t\t -----------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && okSaveSuccessPopSignal!=null && okSaveSuccessPopSignal!=0L){\n\t\t\t\tshowSaveSuccessPop=""visibility:hidden;display:none;"";\n\t\t\t\tshowOrderDetailPop=""visibility:hidden;display:none;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t} catch (Exception e) {\n\t\t\te.printStackTrace();\n\t\t\treturn ""input"";\n\t\t}\n\treturn SUCCESS;\n\t}\n\n   /*=========================================================================================\n\t\t\t\t\t\t\tfill all fields of order without rows\n\t =========================================================================================*/\n\tpublic OrdersDTO fillDataOrderDTO(OrdersDTO orderDTO){\n\t\tSimpleDateFormat frm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t//orderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\n\t\torderDTO.setClientLastName(clientLastName);\n\t\torderDTO.setClientFirstName(clientFirstName);\n\t\torderDTO.setClientOtherNames(clientOtherNames); \n\t\torderDTO.setClientStreet(clientStreet);\n\t\torderDTO.setClientOtherStreet(clientOtherStreet);\n\t\torderDTO.setClientCity(clientCity);\n\t\torderDTO.setClientProvince(code);\n\t\torderDTO.setClientPostalCode(clientPostalCode);\n\t\torderDTO.setClientPhone(clientPhone);\n\t\torderDTO.setClientEmail(clientEmail);\t\t\t\n\t\torderDTO.setProductOrderNumber(productOrderNumber);\n\t\torderDTO.setCompanyHeader(companyHeader);\n\n\t\tif (((strProductOrderDate)!=null)&&(!"""".equals(strProductOrderDate))){\n\t\t\tfrm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\ttry {\n\t\t\t\tDate date = frm.parse(strProductOrderDate);\n\t\t\t\torderDTO.setProductOrderDate(date);\n\t\t\t}\n\t\t\tcatch (Exception pe) {\n\t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (((strCreationOrderDate)!=null)&&(!"""".equals(strCreationOrderDate))){\n\t\t\tfrm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\ttry {\n\t\t\t\tDate date = frm.parse(strCreationOrderDate);\n\t\t\t\torderDTO.setCreationDate(date);\n\t\t\t}\n\t\t\tcatch (Exception pe) {\n\t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (((strRequiredDate)!=null)&&(!"""".equals(strRequiredDate))){\n\t\t\tfrm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\ttry {\n\t\t\t\tDate date = frm.parse(strRequiredDate);\n\t\t\t\torderDTO.setRequiredDate(date);\n\t\t\t}\n\t\t\tcatch (Exception pe) {\n\t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t\t\t}\n\t\t}\n\t\treturn orderDTO;\n\t}\n\n\n\t/*=========================================================================================\n\t\t\t\t\t\t\t\tinitialize ListIndexSet\n\t  =========================================================================================*/\n\tpublic void initalizeListIndexSet(HttpSession session,OrdersService orderService ) throws ServiceException{\n\t\t\tlistIndexSet=new ArrayList<OrdersDTO>();\n\t\t\ttotalOrders=orderService.getCountOrders(creationDateStartArg, creationDateEndArg,reportDateBetween, userLogin, lsOrderId, status);\n\t\t\tString strcount=totalOrders.toString();\n\t\t\tInteger sizeList=Integer.parseInt(strcount) / PAGE_ITEMS_COUNT;\n\t\t\tnextListPages=1;\n\t\t\tsession.setAttribute(""nextListPages"",nextListPages);\n\t\t\tfor(int i=1;i<=sizeList+1 && i<=11;i++){\n\t\t\t\tOrdersDTO ord=new OrdersDTO();\n\t\t\t\tord.setCssStyle("""");\n\t\t\t\tord.setIndex(i);\n\t\t\t\tlistIndexSet.add(ord);\n\t\t\t}\n\t\t\tindexSet=0;\n\t\t\tsession.setAttribute(""indexSet"",indexSet);\n\t\t\tsession.setAttribute(""totalOrders"",totalOrders);\n\t\t\tsession.setAttribute(""listIndexSet"",listIndexSet);\n\n\t}\n\t\n\tpublic List<OrdersDTO> getOrdersToCancel(String strOrderSelected){\n\t\tList<OrdersDTO>result=new ArrayList<OrdersDTO>();\n\t\tif(strOrderSelected==null || strOrderSelected.equals(""""))return result;\n\t\tString[] tabPrint=strOrderSelected.split("","");\n\t\tfor(int i=0;i<tabPrint.length;i++){\n\t\t\tString item=tabPrint[i];\n\t\t\tString[] tabItem=item.split("";"");\n\t\t\tint index=Integer.parseInt(tabItem[0]);\n\t\t\tOrdersDTO orderDTO= listOrdersDTO.get(index);\n\t\t\tif(tabItem[1].equals(""t"")){\n\t\t\t\tresult.add(orderDTO);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n}\n\n----------------------------------- SOURCE END -------------------------------------",1403209250339
error,log,,,"Problems occurred when invoking code from plug-in: ""org.eclipse.jdt.ui"".",1403209250342
error,log,,,"Error in JDT Core during reconcile",1403209250343
error,log,,,"Exception occurred during problem detection:\n----------------------------------- SOURCE BEGIN -------------------------------------\npackage com.loyauty.web.struts.action.orders;\n\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.InputStream;\nimport java.text.SimpleDateFormat;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport javax.servlet.http.HttpSession;\nimport net.sf.jasperreports.engine.JRException;\nimport net.sf.jasperreports.engine.JasperCompileManager;\nimport net.sf.jasperreports.engine.JasperExportManager;\nimport net.sf.jasperreports.engine.JasperFillManager;\nimport net.sf.jasperreports.engine.JasperPrint;\nimport net.sf.jasperreports.engine.JasperReport;\nimport net.sf.jasperreports.engine.data.JRBeanCollectionDataSource;\nimport net.sf.jasperreports.engine.design.JasperDesign;\nimport net.sf.jasperreports.engine.util.JRLoader;\nimport net.sf.jasperreports.engine.xml.JRXmlLoader;\nimport com.loyauty.exception.ServiceLocatorException;\nimport com.loyauty.model.OrdersRows;\nimport com.loyauty.service.core.DTOFactory;\nimport com.loyauty.service.core.dto.OrdersDTO;\nimport com.loyauty.service.orders.OrdersService;\nimport com.loyauty.web.struts.action.LoyautyAction;\nimport lombok.Getter;\nimport lombok.Setter;\n\npublic class PrintOrdersToPDF  extends LoyautyAction{\n\tprivate static final long serialVersionUID = -6290756519577177205L;\n\tprivate OrdersService orderService;\n\t@Getter @Setter\n\tprivate InputStream fileInputStream;\n\t@Getter @Setter\n\tprivate String fileName="""";\n\t@Getter @Setter\n\tprivate String lsOrderIdToPrint;\n\t@Getter @Setter\n\tprivate List<OrdersDTO>listOrdersDTO;\n\t@Getter @Setter\n\tprivate Long tansformAutoSignal;\n\t@Getter @Setter\n\tprivate Long tansformManSignal;\n\t@Getter @Setter\n\tprivate Long tansformTreatSignal;\n\t@Getter @Setter\n\tprivate Long tansformReportSignal;\n\t@Getter @Setter\n\tprivate String showPopupConfirmInsert;\n\t@Getter @Setter\n\tprivate Long printAllOrdersSignal;\n\t@Getter @Setter\n\tprivate Long tansformInvoicedSignal;\n\t@Getter @Setter\n\tprivate String message="""";\n\t@SuppressWarnings(""rawtypes"")\n\tCollection list;\n\t@Getter @Setter\n\tprivate String strPrint;\n\tpublic PrintOrdersToPDF() throws ServiceLocatorException {\n\t\tsuper();\t\n\t\tlistOrdersDTO=new ArrayList<OrdersDTO>();\n\t\torderService = getServiceLocator().getOrderService();\n\t}\n\t\n\t@Override  \n\tpublic String execute() throws Exception {\t\n\t\tHttpSession session = request.getSession(true);\n\t\tsession.setAttribute(""generatePDF"",0);\n\t\tString filePath = session.getServletContext().getRealPath(""/"");\n\t\tString filePathData = filePath + ""WEB-INF/jsp/orders/data/"";\n\t\tString logoPath= filePath + ""images/orders/usersLogos/"";\n\t\tshowPopupConfirmInsert=""visibility:hidden;display:none;"";\n\t\tSimpleDateFormat frm=new SimpleDateFormat(""dd-MM-yyyy"");\n\t\tDate date=new Date();\n\t\tString strDate=frm.format(date);\n\t\tfileName=""orders.pdf"";\n\t\t//String userLogin=""anonymous"";\n\t\tif(tansformAutoSignal!=null && tansformAutoSignal!=0L){\n\t\t\tlistOrdersDTO= (List<OrdersDTO>)session.getAttribute(""listOrdersDTOAuto"");\n\t\t}else if(tansformManSignal!=null && tansformManSignal!=0L){\n\t\t\tlistOrdersDTO= (List<OrdersDTO>)session.getAttribute(""listOrdersDTOMan"");\n\t\t}else if(tansformTreatSignal!=null && tansformTreatSignal!=0L){\n\t\t\tlistOrdersDTO= (List<OrdersDTO>)session.getAttribute(""listOrdersDTOTreat"");\n\t\t}else if(tansformReportSignal!=null && tansformReportSignal!=0L){\n\t\t\t//listOrdersDTO= (List<OrdersDTO>)session.getAttribute(""listOrdersDTOTreat"");\n\t\t\tlistOrdersDTO= (List<OrdersDTO>)session.getAttribute(""listOrdersDTOReport"");\n\t\t}else if(tansformInvoicedSignal!=null && tansformInvoicedSignal!=0L){\n\t\t\t//listOrdersDTO= (List<OrdersDTO>)session.getAttribute(""listOrdersDTOTreat"");\n\t\t\tlistOrdersDTO= (List<OrdersDTO>)session.getAttribute(""listOrdersDTOInvoiced"");\n\t\t}\n\t\t\n\t\ttry{\n\t\t\t\n\t\t\t/*------------------------ Change print property of order ---------------------\n\t\t\t\t\tcatch string content values print and change print property order \n\t\t\t  -----------------------------------------------------------------------------*/\n\t\t\tif(printAllOrdersSignal==null || printAllOrdersSignal==0L){\n\t\t\t\tString[] tabPrint=strPrint.split("","");\n\t\t\t\tfor(int i=0;i<tabPrint.length;i++){\n\t\t\t\t\tString item=tabPrint[i];\n\t\t\t\t\tString[] tabItem=item.split("";"");\n\t\t\t\t\tint index=Integer.parseInt(tabItem[0]);\n\t\t\t\t\tOrdersDTO orderDTO= listOrdersDTO.get(index);\n\t\t\t\t\tif(tabItem[1].equals(""t"")){\n\t\t\t\t\t\torderDTO.setPrint(true);\n\t\t\t\t\t}else orderDTO.setPrint(false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/*-------------------- Prepare list orders to print ---------------------------\n\t\t\t\tsearch just orders witch have property shippingCompany!=null and \n\t\t\t\t\t shippingCompany!="""" and add it at first of list \n\t \t\t ------------------------------------------------------------------------------*/\n\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0){\n\t\t\t\tList<OrdersDTO>listOrdersWithoutSHCompany=new ArrayList<OrdersDTO>();\n\t\t\t\tList<OrdersDTO>listOrdersWithSHCompany=new ArrayList<OrdersDTO>();\n\t\t\t\tfor(OrdersDTO order:listOrdersDTO){\n\t\t\t\t\tif(order.getShippingCompany()!=null && !order.getShippingCompany().equals("""")){\n\t\t\t\t\t\tlistOrdersWithSHCompany.add(order);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tlistOrdersWithoutSHCompany.add(order);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlistOrdersDTO=new ArrayList<OrdersDTO>();\n\t\t\t\tfor(OrdersDTO order:listOrdersWithSHCompany){\n\t\t\t\t\tlistOrdersDTO.add(order);\n\t\t\t\t}\n\t\t\t\tfor(OrdersDTO order:listOrdersWithoutSHCompany){\n\t\t\t\t\tlistOrdersDTO.add(order);\n\t\t\t\t}\n\t\t\t}\n\t\t\t/*-------------------- Save orders selected -----------------------------------\n\t\t\t\t\t  save all orders witch have property print=true\n\t \t\t ------------------------------------------------------------------------------*/\n\t\t\t\tif(printAllOrdersSignal!=null && printAllOrdersSignal!=0L){ // print All Orders\n\t\t\t\t\tfileName=""list_orders""+strDate+"".pdf"";\n\t\t\t\t\tif(tansformReportSignal!=null && tansformReportSignal!=0L){\n\t\t\t\t\t\tlist=DTOFactory.getListOrderPrintDTOForReport(listOrdersDTO,logoPath,true);\n\t\t\t\t\t\tfor(OrdersDTO ord:listOrdersDTO){\n\t\t\t\t\t\t\tif(ord.getStatus()!=null && ord.getStatus().equals(""open""))ord.setStatus(""progress"");\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tlist=DTOFactory.getListOrderPrintDTO(listOrdersDTO,logoPath,true);\n\t\t\t\t\t\tfor(OrdersDTO ord:listOrdersDTO){\n\t\t\t\t\t\t\tfor(OrdersRows row:ord.getRowsList()){\n\t\t\t\t\t\t\t\tif(row.getStatus()!=null && row.getStatus().equals(""open""))row.setStatus(""progress"");\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\tfor(OrdersDTO orderDTO:listOrdersDTO){\n\t\t\t\t\t\torderService.makeOrderInProgress(orderDTO);\n\t\t\t\t\t}//end for\t\n\t\t\t\t}else{ // print just orders Selected\n\t\t\t\t\tfileName=""orders_selected""+strDate+"".pdf"";\n\t\t\t\t\tfor(OrdersDTO ordDTO:listOrdersDTO){\n\t\t\t\t\t\tif(ordDTO.getPrint()!=null){\n\t\t\t\t\t\t\tif(ordDTO.getPrint()){\n\t\t\t\t\t\t\t\t//userLogin=ordDTO.getUserLogin();\n\t\t\t\t\t\t\t\tif(ordDTO.getStatus()!=null && ordDTO.getStatus().equals(""open""))ordDTO.setStatus(""progress"");\n\t\t\t\t\t\t\t\tfor(OrdersRows row:ordDTO.getRowsList()){\n\t\t\t\t\t\t\t\t\tif(row.getStatus()!=null && row.getStatus().equals(""open""))row.setStatus(""progress"");\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlist=DTOFactory.getListOrderPrintDTO(listOrdersDTO,logoPath,false); \n\t\t\t\t\tfor(OrdersDTO orderDTO:listOrdersDTO){\n\t\t\t\t\t\tif(orderDTO.getPrint()!=null){\n\t\t\t\t\t\t\tif(orderDTO.getPrint()==true)orderService.makeOrderInProgress(orderDTO);\n\t\t\t\t\t\t}//end if\n\t\t\t\t\t}//end for\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(tansformAutoSignal!=null && tansformAutoSignal!=0L){\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOAuto"",listOrdersDTO);\n\t\t\t\t}else if(tansformManSignal!=null && tansformManSignal!=0L){\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOMan"",listOrdersDTO);\n\t\t\t\t}else if(tansformTreatSignal!=null && tansformTreatSignal!=0L){\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOTreat"",listOrdersDTO);\n\t\t\t\t}else if(tansformReportSignal!=null && tansformReportSignal!=0L){\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t}else if(tansformInvoicedSignal!=null && tansformInvoicedSignal!=0L){\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOInvoiced"",listOrdersDTO);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t/*-------------------- Create a file PDF from orders list ---------------------\n\t\t\t\t\t  The system will create a pdf file with the client login name\n\t \t\t ------------------------------------------------------------------------------*/\n\t\t\t@SuppressWarnings(""rawtypes"")\n\t\t\tMap parameters = new HashMap();\n\t\t\tFile destFilePDF = new File(filePathData+""orders.pdf"");\n\t\t\tif(destFilePDF.exists())destFilePDF.delete();\n\t\t\tInputStream inputStream;\n\t\t\ttry {\n\t\t\t\tinputStream = JRLoader.getLocationInputStream(filePathData+""orders.jrxml"");\n\t\t\t\tJRBeanCollectionDataSource beanColDataSource = new JRBeanCollectionDataSource(list,false);\n\t\t\t\tJasperDesign jasperDesign = JRXmlLoader.load(inputStream);\n\t\t\t\tJasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign);\n\t\t\t\t@SuppressWarnings(""unchecked"")\n\t\t\t\tJasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, parameters, beanColDataSource);\n\t\t\t\tJasperExportManager.exportReportToPdfFile(jasperPrint, filePathData+""orders.pdf"");\t\t\t\t\n\t\t\t} catch (JRException e) {\n\t\t\t\t// TODO Auto-generated catch block\n\t\t\t\te.printStackTrace();\n\t\t\t}    \n\t\t\tfileInputStream = new FileInputStream(new File( filePathData+""orders.pdf""));\n\t\t\t//fileName=""orders.pdf"";\n\t\t\tsession.setAttribute(""generatePDF"",1);\n\t\t\tsession.setAttribute(""invoicedOrdersRefresh"",1L);\n\t\t\treturn SUCCESS;\n\t\t}catch (Exception e) {\n\t\t\t// TODO: handle exception\n\t\t\te.printStackTrace();\n\t\t\treturn ERROR;\n\t\t}\n\n\t}\n\t\n\t\n}\n\n----------------------------------- SOURCE END -------------------------------------",1403209250496
error,log,,,"Problems occurred when invoking code from plug-in: ""org.eclipse.jdt.ui"".",1403209250501
error,log,,,"Error in JDT Core during reconcile",1403209250501
error,log,,,"Exception occurred during problem detection:\n----------------------------------- SOURCE BEGIN -------------------------------------\npackage com.loyauty.web.struts.action.orders;\n\nimport java.text.SimpleDateFormat;\nimport java.util.ArrayList;\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.Hashtable;\nimport java.util.List;\n\nimport javax.servlet.http.HttpSession;\nimport lombok.Getter;\nimport lombok.Setter;\n\nimport com.loyauty.exception.ServiceException;\nimport com.loyauty.exception.ServiceLocatorException;\nimport com.loyauty.model.OrdersRows;\nimport com.loyauty.model.User;\nimport com.loyauty.service.core.DTOFactory;\nimport com.loyauty.service.core.dto.BasicUserDTO;\nimport com.loyauty.service.core.dto.OperationsDTO;\nimport com.loyauty.service.core.dto.OrdersDTO;\nimport com.loyauty.service.core.dto.ProvinceDTO;\nimport com.loyauty.service.core.dto.UserProductPriceDTO;\nimport com.loyauty.service.core.dto.UserSessionDTO;\nimport com.loyauty.service.core.dto.UsersPrivilegesDTO;\nimport com.loyauty.service.operations.OperationsService;\nimport com.loyauty.service.orders.OrdersService;\nimport com.loyauty.service.product.ProductService;\nimport com.loyauty.service.user.UserService;\nimport com.loyauty.web.struts.action.LoyautyAction;\n\npublic class ReportOrders  extends LoyautyAction {\n\tprivate static final long serialVersionUID = -3811760851445730062L;\n\tprivate UserService userService;\n\tprivate ProductService productService;\n\tprivate OrdersService orderService;\n\tprivate OperationsService operationsService;\n\t@Getter @Setter\n\tprivate String userLogin;\n\t@Getter @Setter\n\tprivate List<User> usersList;\n\tprivate static int USER_TYPE = 2;\n\t@Getter @Setter\n\tList<OrdersDTO>listOrdersDTO;\n\t@Getter @Setter\n\tList<OrdersDTO>listStatus;\n\t@Getter @Setter\n\tprivate String lsOrderId;\n\t@Getter @Setter\n\tLong poYpop;\n\t@Getter @Setter\n\tLong poXpop;\n\t@Getter @Setter\n\tprivate Long pageTop=0L;\n\t@Getter @Setter\n\tprivate Date creationDate ;\n\t@Getter @Setter\n\tprivate Long findOrdersSignal;\n\tprivate String status;\n\t@Getter @Setter\n\tprivate Long sizeResult=0L;\n\t@Getter @Setter\n\tprivate Long sorting;\n\t@Getter @Setter\n\tprivate Long sortingOrdersSignal;\n\t@Getter @Setter\n\tprivate Integer fieldForSorting;\n\t@Getter @Setter\n\tprivate Integer asc;\n\t@Getter @Setter\n\tprivate Integer scrollDivRowsLeft;\n\t@Getter @Setter\n\tprivate Integer scrollPageLeft;\n\t@Getter @Setter\n\tprivate Integer scrollDivRowsTop;\n\t@Getter @Setter\n\tprivate String strCreationDateStart;\n\t@Getter @Setter\n\tprivate String strCreationDateEnd;\n\t@Getter @Setter\n\tprivate Date creationDateStart;\n\t@Getter @Setter\n\tprivate Date creationDateEnd ;\n\tprivate Date creationDateStartArg;\n\tprivate Date creationDateEndArg ;\n\t@Getter @Setter\n\tprivate Integer selectedStatus;\n\t@Getter @Setter\n\tprivate Long editOrderSignal;\n\t@Getter @Setter\n\tprivate Long cancelSignal;\n\t@Getter @Setter\n\tprivate Integer indexOrder;\n\t@Getter @Setter\n\tprivate OrdersDTO orderToEdit;\n\t@Getter @Setter\n\tprivate String strProductOrderDate;\n\t@Getter @Setter\n\tprivate String lsProductID;\n\t@Getter @Setter\n\tInteger indexRow;\n\t@Getter @Setter\n\tprivate String showOrderDetailPop;\n\t@Getter @Setter\n\tprivate Long userId;\n\t@Getter @Setter\n\tprivate Long checkProductPriceSignal;\n\t@Getter @Setter\n\tprivate Long saveTemporaryRowSignal;\n\t@Getter @Setter\n\tprivate Long addSimilarRowSignal;\n\t@Getter @Setter\n\tprivate Long deleteRowSignal;\n\t@Getter @Setter\n\tprivate Long saveOrdersSignal;\n\t@Getter @Setter\n\tprivate Long checkBoxPrintSignal;\n\t@Getter @Setter\n\tprivate Boolean checkBoxPrint;\n\t\n\t//recovery Data Order\n\t@Getter @Setter\n\tprivate String clientLastName;\n\t@Getter @Setter\n\tprivate String clientFirstName;\n\t@Getter @Setter\n\tprivate String clientOtherNames;\n\t@Getter @Setter\n\tprivate String clientStreet;\n\t@Getter @Setter\n\tprivate String  clientOtherStreet;\n\t@Getter @Setter\n\tprivate String  clientCity;\n\t@Getter @Setter\n\tprivate String  clientProvince;\n\t@Getter @Setter\n\tprivate String  clientPostalCode;\n\t@Getter @Setter\n\tprivate String  clientPhone;\n\t@Getter @Setter\n\tprivate String  clientEmail;\n\t@Getter @Setter\n\tprivate String productOrderNumber;\n\t@Getter @Setter\n\tprivate String strRequiredDate;\n\t\n\t//recovery data row\n\t@Getter @Setter\n\tprivate Double quantity ;\n\t@Getter @Setter\n\tprivate String notes;\n\t@Getter @Setter\n\tprivate Double quantityToChange;\n\t@Getter @Setter\n\tprivate Double stock;\n\t@Getter @Setter\n\tprivate String productDescription;\n\t@Getter @Setter\n\tprivate Double unitPrice;\n\t@Getter @Setter\n\tprivate Double shippingFee;\n\t@Getter @Setter\n\tprivate String shippingCompany;\n\t@Getter @Setter\n\tprivate String companyHeader;\n\t@Getter @Setter\n\tprivate String trackingNumber;\n\t@Getter @Setter\n\tprivate Long quantityToChangeSignal;\n\t@Getter @Setter\n\tprivate Long duplicateOrderSignal;\n\t@Getter @Setter\n\tprivate String strCreationDate;\n\t@Getter @Setter\n\tprivate String strCreationOrderDate;\n\t@Getter @Setter\n\tprivate User usr;\n\t@Getter @Setter\n\tprivate String showSaveSuccessPop;\n\t//showSaveSuccessPop=""display:block;visibility:visible;"";\n\t//showSaveSuccessPop=""visibility:hidden;display:none;"";\n\t@Getter @Setter\n\tprivate String message;\n\t@Getter @Setter\n\tprivate Long okSaveSuccessPopSignal;\n\t@Getter @Setter\n\tprivate Long showRowShipping;\n\t@Getter @Setter\n\tprivate Long showOnlyEditNote;\n\t@Getter @Setter\n\tprivate Long saveShippingSignal;\n\t@Getter @Setter\n\tprivate Long saveOnlyNoteSignal;\n\t@Getter @Setter\n\tprivate String code;\n\t@Getter @Setter\n\tprivate Long cityId;\n\t@Getter @Setter\n\tprivate List<ProvinceDTO>listProvinces;\n\tprivate Hashtable<String, ProvinceDTO>hashProvinces;\n\t@Getter @Setter\n\tprivate Boolean orderNotSavedAtFirst;\n\t@Getter @Setter\n\tprivate String strShippedDate;\n\t@Getter @Setter\n\tprivate String strShippingPrice;\n\t@Getter @Setter\n\tprivate String showConfirmDeleteOrderPop;\n\t@Getter @Setter\n\tprivate Long deleteOrderSignal; \n\t@Getter @Setter\n\tprivate Long confirmDeleteSignal;\n\t@Getter @Setter\n\tprivate UsersPrivilegesDTO userPrivileges;\n\t@Getter @Setter\n\tprivate UsersPrivilegesDTO usersPrivShippedToInvoiced;\n\t@Getter @Setter\n\tprivate UsersPrivilegesDTO usersPrivChangeShippedStatus;\n\t@Getter @Setter\n\tprivate HashMap<Integer, String> hashStatus;\n\t@Getter @Setter\n\tprivate Long statusId;\n\t@Getter @Setter\n\tprivate String strPrint;\n\t@Getter @Setter\n\tprivate Integer testSignal;\n\t@Getter @Setter\n\tprivate String newStatus;\n\tLong invoicedOrdersRefresh;\n\t@Getter @Setter\n\tprivate Integer reportDateBetween;\n\t@Getter @Setter\n\tprivate Long dateBetweenSignal;\n\t//------Pagination\n\t@Getter @Setter\n\tLong pageIndexSignal;\n\t@Getter @Setter\n\tLong prevListPagesSignal;\n\t@Getter @Setter\n\tLong nextListPagesSignal;\n\t@Getter @Setter\n\tLong cancelOrderSignal;\n\t@Getter @Setter\n\tLong totalOrders;\n\t@Getter @Setter\n\tInteger nextListPages;\n\t@Getter @Setter\n\tInteger prevListPages;\n\t@Getter @Setter\n\tInteger indexSet=0;\n\t@Getter @Setter\n\tInteger indexList;\n\t@Getter @Setter\n\tList<OrdersDTO>listIndexSet;\n\t@Getter @Setter\n\tInteger PAGE_ITEMS_COUNT=100;\n\t//------Pagination\n\t\n\t/*=========================================================================================\n\t\t\t\t\t\t\t\t\t\tDefault constructor\n\t  =========================================================================================*/\n\tpublic  ReportOrders() throws ServiceLocatorException {\n\t\tsuper();\t \n\t\tuserService = getServiceLocator().getUserService();\n\t\torderService = getServiceLocator().getOrderService();\n\t\tproductService = getServiceLocator().getProductService();\n\t\toperationsService=getServiceLocator().getOperationsService();\n\t}\n\t/*=========================================================================================\n\t \t\t\t\t\t\t\t\t\tmethod execute\n\t  =========================================================================================*/\n\t@SuppressWarnings({ ""rawtypes"", ""unchecked"" })\n\t@Override\n\tpublic String execute() throws Exception {\n\t\tHttpSession session = request.getSession(true);\n\t\t\n\t\tif(showOrderDetailPop==null)showOrderDetailPop=""visibility:hidden;display:none;"";\n\t\tif(showConfirmDeleteOrderPop==null)showConfirmDeleteOrderPop=""visibility:hidden;display:none;"";\n\t\tif(showSaveSuccessPop==null)showSaveSuccessPop=""visibility:hidden;display:none;"";\n\t\tif(poYpop==null)poYpop=100L;\n\t\tif(poXpop==null)poXpop=100L;\n\t\tHashtable<String, OrdersDTO>hashOrders;\n\t\tif(selectedStatus==null)selectedStatus=-1;\n\t\tsizeResult=(Long)session.getAttribute(""sizeResult"");\n\t\ttotalOrders=(Long)session.getAttribute(""totalOrders"");\n\t\tif(totalOrders==null)totalOrders=0L;\n\t\tasc=(Integer)session.getAttribute(""asc"");\n\t\tif(asc==null)asc=0;\n\t\tif(sizeResult==null)sizeResult=0L;\n\t\tif(indexOrder==null)indexOrder=0;\n\t\tuserPrivileges=(UsersPrivilegesDTO)session.getAttribute(""userPrivileges"");\n\t\tusersPrivShippedToInvoiced=(UsersPrivilegesDTO)session.getAttribute(""usersPrivShippedToInvoiced"");\n\t\tusersPrivChangeShippedStatus=(UsersPrivilegesDTO)session.getAttribute(""usersPrivChangeShippedStatus"");\n\t\thashStatus=(HashMap<Integer, String>)session.getAttribute(""hashStatus"");\n\t\tif(hashStatus==null){\n\t\t\thashStatus=new HashMap<Integer, String>();\n\t\t\thashStatus.put(0, """");\n\t\t\thashStatus.put(1, ""open"");\n\t\t\thashStatus.put(2, ""progress"");\n\t\t}\n\t\tList<Integer>listIndexColumn=new ArrayList<Integer>();\n\t\t//fill list status\n\t\tlistStatus=(ArrayList<OrdersDTO>)session.getAttribute(""listStatus"");\n\t\tif(listStatus==null){\n\t\t\tlistStatus=new ArrayList<OrdersDTO>();\n\t\t\tOrdersDTO orderDTOOpen=new OrdersDTO();\n\t\t\torderDTOOpen.setStatus(""open"");\n\t\t\torderDTOOpen.setId(0L);\n\t\t\tlistStatus.add(orderDTOOpen);\n\t\t\tOrdersDTO orderDTOProgress=new OrdersDTO();\n\t\t\torderDTOProgress.setStatus(""progress"");\n\t\t\torderDTOProgress.setId(1L);\n\t\t\tlistStatus.add(orderDTOProgress);\n\t\t\tif(usersPrivChangeShippedStatus!=null){\n\t\t\t\tOrdersDTO orderDTOShipped=new OrdersDTO();\n\t\t\t\torderDTOShipped.setStatus(""shipped"");\n\t\t\t\torderDTOShipped.setId(2L);\n\t\t\t\tlistStatus.add(orderDTOShipped);\n\t\t\t\t/*OrdersDTO orderDTOBuild=new OrdersDTO();\n\t\t\t\torderDTOBuild.setStatus(""invoiced"");\n\t\t\t\torderDTOBuild.setId(3L);\n\t\t\t\tlistStatus.add(orderDTOBuild);*/\n\t\t\t}\n\n\t\t}\n\n\t\ttry {\n\t\n\t\t\t/*-------------------- recovery users list -----------------------------------\n\t\t\t\t\t\t\tRecovery users list in session\n\t\t\t -----------------------------------------------------------------------------*/\n\t\t\t//recovery provinces\n\t\t\tlistProvinces=(List<ProvinceDTO>)session.getAttribute(""listProvinces"");\n\t\t\tif(listProvinces==null)listProvinces=productService.getAllProvinces();\n\t\t\torderNotSavedAtFirst=(Boolean)session.getAttribute(""listNotSavedAtFirst"");\n\t\t\tBasicUserDTO basicUserDTO = new BasicUserDTO();\n\t\t\tbasicUserDTO.setTypeId(USER_TYPE);\n\t\t\tList<User> usersListSession=(List<User>)session.getAttribute(""usersListSession"");\n\t\t\tif(usersListSession==null){\n\t\t\t\tList<UserSessionDTO> listAllUsers= userService.getAllUsers(basicUserDTO);\n\t\t\t\tusersList=new ArrayList<User>();\n\t\t\t\tfor(UserSessionDTO userDTO:listAllUsers){\n\t\t\t\t\tUser user=new User();\n\t\t\t\t\tuser.setId(userDTO.getId());\n\t\t\t\t\tuser.setLogin(userDTO.getLogin());\n\t\t\t\t\tusersList.add(user);\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""usersListSession"",usersList);\n\t\t\t}else usersList=usersListSession;\n\t\t\tlistOrdersDTO=(ArrayList<OrdersDTO>) session.getAttribute(""listOrdersDTOReport"");\n\t\t\treportDateBetween=(Integer)session.getAttribute(""reportDateBetween"");\n\t\t\tif(reportDateBetween==null){\n\t\t\t\treportDateBetween=0;\n\t\t\t\tsession.setAttribute(""reportDateBetween"",reportDateBetween);\n\t\t\t}\n\t\t\t/*------ always recovery creationDate from strCreationDate ------\n\t\t\t\t\t\talways keep the user search options\n\t\t\t  ---------------------------------------------------------------*/\n\t\t\tcreationDateStart=null;\n\t\t\tSimpleDateFormat frm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\tif (((strCreationDateStart)!=null)&&(!"""".equals(strCreationDateStart))){\n    \t\t\ttry {\n    \t\t\t\tDate date = frm.parse(strCreationDateStart);\n    \t\t\t\tcreationDateStart=date;\n    \t\t\t\tcreationDateStartArg=date;\n    \t\t\t}\n    \t\t\tcatch (Exception pe) {\n    \t\t\t\tcreationDateStart=null;\n    \t\t\t\taddActionError(""Please enter a date in the correct format"");\n    \t\t\t}\n    \t\t}\n    \t\tif(creationDateStart==null){\n\t\t\t\tDate date = frm.parse(""01/01/1900"");\n\t\t\t\tcreationDateStartArg=date;\n    \t\t}\n    \t\tcreationDateEnd=null;\n    \t\tif (((strCreationDateEnd)!=null)&&(!"""".equals(strCreationDateEnd))){\n    \t\t\tfrm = new SimpleDateFormat(""dd/MM/yyyy"");\n    \t\t\ttry {\n    \t\t\t\tDate date = frm.parse(strCreationDateEnd);\n    \t\t\t\tcreationDateEnd=date;\n    \t\t\t\tcreationDateEndArg=date;\n    \t\t\t}\n    \t\t\tcatch (Exception pe) {\n    \t\t\t\tcreationDateEnd=null;\n    \t\t\t\taddActionError(""Please enter a date in the correct format"");\n    \t\t\t}\n    \t\t}\n    \t\tif(creationDateEnd==null){\n    \t\t\tcreationDateEndArg=new Date();\n    \t\t}\n\n\t\t\t/*------ always recovery Status from selectedStatus key ------\n\t\t\t\t\t\talways keep the status search options\n\t\t\t  ---------------------------------------------------------------*/\n    \t\tswitch (selectedStatus) {\n\t\t\t\tcase -1:status="""";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0:status=""open"";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:status=""progress"";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:status=""shipped"";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:status=""invoiced"";\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t/*----------- always initialized listPages if not done ----------\n\t\t\t\t   \t\t    and check if is there next listPages\n\t\t\t  ---------------------------------------------------------------*/\n    \t\tnextListPages=(Integer)session.getAttribute(""nextListPages"");\n    \t\tif(nextListPages==null)nextListPages=0;\n    \t\tif(indexSet==null || indexSet==-1){\n    \t\t\tindexSet=(Integer)session.getAttribute(""indexSet"");\n    \t\t\tif(indexSet==null)indexSet=0;\n    \t\t}\n    \t\tlistIndexSet=(List<OrdersDTO>)session.getAttribute(""listIndexSet"");\n    \t\tif(listIndexSet==null)initalizeListIndexSet(session,orderService );\n \n\t\t\t/*----------------- When Admin Click on the pageIndex ----------------------------------\n\t\t\t\t\t\t\t\t\t\tcatch  page index\n\t\t\t ---------------------------------------------------------------------------------------*/\n    \t\t\n    \t\tif(dateBetweenSignal!=null && dateBetweenSignal!=0L){\n    \t\t\treportDateBetween=((reportDateBetween==null || reportDateBetween==0)?1:0);\n    \t\t\tlistOrdersDTO=new ArrayList<OrdersDTO>();\n    \t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\tsession.setAttribute(""reportDateBetween"",reportDateBetween);\n\t\t\t\treturn SUCCESS;\n    \t\t}\n\n\t\t\t/*----------------- When Admin Click on the pageIndex ----------------------------------\n\t\t\t\t\t\t\t\t\t\tcatch  page index\n\t\t\t ---------------------------------------------------------------------------------------*/\n    \t\tif(pageIndexSignal!=null && pageIndexSignal!=0L){\n     \t\t\tOrdersDTO orderDTO=(OrdersDTO)session.getAttribute(""orderPageSelected"");\n    \t\t\tif(orderDTO!=null)orderDTO.setCssStyle("""");\n    \t\t\tOrdersDTO orderPageSelected=listIndexSet.get(indexList);\n    \t\t\torderPageSelected.setCssStyle(""background-color:#FFFF99;border:1px solid #CCCCCC;"");\n    \t\t\tindexSet=orderPageSelected.getIndex()-1;\n    \t\t\tindexSet=indexSet*PAGE_ITEMS_COUNT;\n    \t\t\tsession.setAttribute(""indexSet"",indexSet);\n    \t\t\tsession.setAttribute(""listIndexSet"",listIndexSet);\n    \t\t\tsession.setAttribute(""orderPageSelected"",orderPageSelected);\n    \t\t}\n\n\t\t\t/*----------------- When Admin Click on the nextListPages ------------------------------\n\t\t\t\t\t\trecreate listIndexSet started with index>index+10 and indexSet>indexSet+10\n\t\t\t ---------------------------------------------------------------------------------------*/\n    \t\tif(nextListPagesSignal!=null && nextListPagesSignal!=0L && listIndexSet.size()>0){\n    \t\t\tOrdersDTO orderDTOPrevious=(OrdersDTO)session.getAttribute(""orderPageSelected"");\n    \t\t\tif(orderDTOPrevious!=null)orderDTOPrevious.setCssStyle("""");\n    \t\t\tOrdersDTO orderDTO=listIndexSet.get(listIndexSet.size()-1);\n    \t\t\tif(orderDTO!=null)nextListPages=orderDTO.getIndex()+1;\n    \t\t\tLong totalOrders=orderService.getCountOrders(creationDateStartArg, creationDateEndArg,reportDateBetween, userLogin, lsOrderId, status);\n    \t\t\tString strcount=totalOrders.toString();\n    \t\t\tInteger sizeList=Integer.parseInt(strcount) / PAGE_ITEMS_COUNT;\n    \t\t\tif(nextListPages<=sizeList+1){\n        \t\t\tlistIndexSet=new ArrayList<OrdersDTO>();\n        \t\t\tfor(int i=nextListPages;i<=sizeList+1 && i<=nextListPages+10;i++){\n        \t\t\t\tOrdersDTO ord=new OrdersDTO();\n        \t\t\t\tord.setCssStyle("""");\n        \t\t\t\tord.setIndex(i);\n        \t\t\t\tlistIndexSet.add(ord);\n        \t\t\t}\n        \t\t\tif(nextListPages<=sizeList+1){\n        \t\t\t\tindexSet=nextListPages-1;\n            \t\t\tOrdersDTO orderPageSelected=listIndexSet.get(0);\n            \t\t\torderPageSelected.setCssStyle(""background-color:#FFFF99;border:1px solid #CCCCCC;"");\n            \t\t\tindexSet=indexSet*PAGE_ITEMS_COUNT;\n            \t\t\tsession.setAttribute(""indexSet"",indexSet);\n            \t\t\tsession.setAttribute(""nextListPages"",nextListPages);\n            \t\t\tsession.setAttribute(""listIndexSet"",listIndexSet);\n            \t\t\tsession.setAttribute(""orderPageSelected"",orderPageSelected);\n        \t\t\t}\n    \t\t\t}\n    \t\t}\n\n\t\t\t/*----------------- When Admin Click on the previousListPages --------------------------\n\t\t\t\t\trecreate listIndexSet started with index< index-10 and indexSet<indexSet-10\n\t\t\t ---------------------------------------------------------------------------------------*/\n    \t\tif(prevListPagesSignal!=null && prevListPagesSignal!=0L && listIndexSet.size()>0){\n    \t\t\tOrdersDTO orderDTOPrevious=(OrdersDTO)session.getAttribute(""orderPageSelected"");\n    \t\t\tif(orderDTOPrevious!=null)orderDTOPrevious.setCssStyle("""");\n    \t\t\tnextListPages=(Integer)session.getAttribute(""nextListPages"");\n    \t\t\tif(nextListPages!=null && nextListPages>=11){\n    \t\t\t\tprevListPages=nextListPages-11;\n    \t\t\t\tlistIndexSet=new ArrayList<OrdersDTO>();\n        \t\t\tfor(int i=prevListPages;i<nextListPages;i++){\n        \t\t\t\tOrdersDTO ord=new OrdersDTO();\n        \t\t\t\tord.setCssStyle("""");\n        \t\t\t\tord.setIndex(i);\n        \t\t\t\tlistIndexSet.add(ord);\n        \t\t\t}\n         \t\t\tindexSet=prevListPages-1;\n            \t\tOrdersDTO orderPageSelected=listIndexSet.get(0);\n            \t\torderPageSelected.setCssStyle(""background-color:#FFFF99;border:1px solid #CCCCCC;"");\n            \t\tindexSet=indexSet*PAGE_ITEMS_COUNT;\n            \t\tnextListPages=prevListPages;\n            \t\tsession.setAttribute(""nextListPages"",nextListPages);\n            \t\tsession.setAttribute(""indexSet"",indexSet);\n            \t\tsession.setAttribute(""listIndexSet"",listIndexSet);\n            \t\tsession.setAttribute(""orderPageSelected"",orderPageSelected);\n    \t \t\t}\n    \t\t}\n \n\t\t\t/*----------------- When Admin change province -----------------------------------------\n\t\t\t\t\t\t\t\tCheck a list off this province\n\t\t\t ---------------------------------------------------------------------------------------*/\n\t\t\t\thashProvinces=(Hashtable<String, ProvinceDTO>)session.getAttribute(""hashProvinces"");\n\t\t\t\tif(hashProvinces==null){\n\t\t\t\t\tlistProvinces=productService.getAllProvinces();\n\t\t\t\t\tHashtable<String, ProvinceDTO> hashProvinces=new Hashtable<String, ProvinceDTO>();\n\t\t\t\t\tfor(ProvinceDTO prov:listProvinces){\n\t\t\t\t\t\thashProvinces.put(prov.getCode(), prov);\n\t\t\t\t\t}\n\t\t\t\t\tsession.setAttribute(""hashProvinces"",hashProvinces);\n\t\t\t\t}\n\t\t\t\tif(code!=null && !code.equals("""")&& listOrdersDTO!=null){\n\t\t\t\t\tProvinceDTO provinceDTO=hashProvinces.get(code);\n\t\t\t\t\tif(provinceDTO!=null){\n\t\t\t\t\t\tclientProvince=provinceDTO.getCode();\n\t\t\t\t\t}\n\t\t\t\t}//else listCities=new ArrayList<CityDTO>();\n\t\t\t\tif(listOrdersDTO!=null && indexOrder!=-1){\n\t\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\t\tif(orderToEdit!=null){\n\t\t\t\t\t\torderToEdit.setClientProvince(code);\n\t\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/*------------------------------- Refresh listOrdersDTO------------------------------------\n\t\t\t\t\t\tRefresh listOrders before generation of invoiced orders XLS file \n\t\t\t\t ------------------------------------------------------------------------------------------*/\n\t\t\t\tinvoicedOrdersRefresh=(Long)session.getAttribute(""invoicedOrdersRefresh"");\n\t\t\t\tif(invoicedOrdersRefresh!=null && invoicedOrdersRefresh!=0L){\n\t\t\t\t\tlistIndexColumn=new ArrayList<Integer>();\n\t\t\t\t\tfor(int i=0;i<=34;i++){\n\t\t\t\t\t\tif(i!=2 && i<=13){\n\t\t\t\t\t\t\tlistIndexColumn.add(i);\n\t\t\t\t\t\t\tif(i!=0)listIndexColumn.add(-i);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(i==30 || i==31 || i==34){\n\t\t\t\t\t\t\tlistIndexColumn.add(i);\n\t\t\t\t\t\t\tlistIndexColumn.add(-i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlsOrderId=lsOrderId.toUpperCase();\n\t\t\t\t\tlistOrdersDTO=orderService.searchOrdersWithOptionsAndSorting(creationDateStartArg, creationDateEndArg,reportDateBetween,userLogin, lsOrderId, status, listIndexColumn,PAGE_ITEMS_COUNT,indexSet);\n\t\t\t\t\tif(findOrdersSignal!=null && findOrdersSignal!=0L)initalizeListIndexSet(session,orderService );\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\tsession.setAttribute(""invoicedOrdersRefresh"",0L);\n\t\t\t\t\treturn SUCCESS;\n\t\t\t\t}\t\n\n\t\t\t\t\n\t\t\t/*------------ When Admin click on the Button ""Delete Order"" in The OrderDtailPop --------------\n\t\t\t\t\t\t\t\tshow other pop to confirm Order Delete\n\t\t\t  ----------------------------------------------------------------------------------------------*/\n\t\t\t\tif(deleteOrderSignal!=null && deleteOrderSignal!=0L){\n\t\t\t\t\tmessage=""Attention! if you click on \\""Delete Order\\"" you can not restore it."";\n\t\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\t\tif(confirmDeleteSignal!=null && confirmDeleteSignal==0L){ //Delete Order Request \n\t\t\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\t\t\tshowConfirmDeleteOrderPop=""display:block;visibility:visible;"";\n\t\t\t\t\t}else if(confirmDeleteSignal==1L){\t\t\t\t\t\t //Delete Order Confirmed\n\t\t\t\t\t\torderService.deleteOrderByLsOrderId(orderToEdit);\n\t\t\t\t\t\t//Save this operation in table operation\n\t\t\t\t\t\tOperationsDTO operationDTO=new OperationsDTO();\n\t\t\t\t\t\tUser userAdmin=(User)session.getAttribute(""userAdmin"");\n\t\t\t\t\t\tif(userAdmin!=null)operationDTO.setUserId(userAdmin.getId());\n\t\t\t\t\t\toperationDTO.setOperationDate(new Date());\n\t\t\t\t\t\toperationDTO.setOperationType(""Delete Order"");\n\t\t\t\t\t\tString dataBefore=""[PARTNER NAME:""+orderToEdit.getUserLogin()+""];"";\n\t\t\t\t\t\tdataBefore+="" [LS_ORDER_ID:""+orderToEdit.getLsOrderId()+""];"";\n\t\t\t\t\t\tdataBefore+="" [PRODUCT_ORDER_NUMBER:""+orderToEdit.getProductOrderNumber()+""];"";\n\t\t\t\t\t\tdataBefore+="" [CLIENT_FIRST_NAME:""+orderToEdit.getClientFirstName()+""];"";\n\t\t\t\t\t\tdataBefore+="" [CLIENT_LAST_NAME:""+orderToEdit.getClientLastName()+""];"";\n\t\t\t\t\t\tdataBefore+="" [CLIENT_POSTAL_CODE:""+orderToEdit.getClientPostalCode()+""];"";\n\t\t\t\t\t\tdataBefore+="" [LS_PRODUCT_ID:""+orderToEdit.getLsProductID()+""];"";\n\t\t\t\t\t\tdataBefore+="" [UNIT_PRICE:""+orderToEdit.getUnitPrice()+""];"";\n\t\t\t\t\t\tdataBefore+="" [STATUS:""+orderToEdit.getStatus()+""];"";\n\t\t\t\t\t\toperationDTO.setDataBefore(dataBefore);\n\t\t\t\t\t\toperationDTO.setDataBefore(operationDTO.getDataBefore());\n\t\t\t\t\t\toperationDTO.setDataAfter("""");\n\t\t\t\t\t\toperationsService.insertOperation(operationDTO);\n\t\t\t\t\t\t//Remove order from the list orders\n\t\t\t\t\t\tlistOrdersDTO.remove(orderToEdit);\n\t\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\t\tshowOrderDetailPop=""visibility:hidden;display:none;"";\n\t\t\t\t\t\tshowConfirmDeleteOrderPop=""visibility:hidden;display:none;"";\n\t\t\t\t\t\t//initialize index orders\n\t\t\t\t\t\tint indexOrder=0;\n\t\t\t\t\t\tint indexRow=0;\n\t\t\t\t\t\tfor(OrdersDTO orderDTO:listOrdersDTO){\n\t\t\t\t\t\t\torderDTO.setIndex(indexOrder);\n\t\t\t\t\t\t\tindexOrder++;\n\t\t\t\t\t\t\tindexRow=0;\n\t\t\t\t\t\t\tfor(OrdersRows orderRows:orderDTO.getRowsList()){\n\t\t\t\t\t\t\t\torderRows.setIndex(indexRow);\n\t\t\t\t\t\t\t\tindexRow++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\t}else{\t\t\t\t\t\t\t\t\t\t\t\t\t//Cancel Order Delete\n\t\t\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\t\t\tshowConfirmDeleteOrderPop=""visibility:hidden;display:none;"";\n\t\t\t\t\t}\n\n\t\t\t\t\treturn SUCCESS;\n\t\t\t\t}\n\n\n\t\t//#################################################################################################\t\t\n\t\t\t\t/*------------ When Admin click on the Button ""Delete Order"" in The OrderDtailPop --------------\n\t\t\t\t\t\t\t\t\tshow other pop to confirm Order Delete\n\t\t\t\t  ----------------------------------------------------------------------------------------------*/\n\t\t\t\t\tif(cancelOrderSignal!=null && cancelOrderSignal!=0L){\n\t\t\t\t\t\tmessage=""Attention! if you click on \\""Delete Order\\"" you can not restore it."";\n\t\t\t\t\t\tSystem.out.println(""strPrint:""+strPrint);\n\t\t\t\t\t\tList<OrdersDTO>listOrdersToCanceled=null;\n\t\t\t\t\t\tlistOrdersToCanceled=getOrdersToCancel(strPrint);\n\t\t\t\t\t\tfor(OrdersDTO ord:listOrdersToCanceled){\n\t\t\t\t\t\t\tSystem.out.println(""Order:""+ord.getLsOrderId());\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/*orderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\t\t\tif(confirmDeleteSignal!=null && confirmDeleteSignal==0L){ //Delete Order Request \n\t\t\t\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\t\t\t\tshowConfirmDeleteOrderPop=""display:block;visibility:visible;"";\n\t\t\t\t\t\t}else if(confirmDeleteSignal==1L){\t\t\t\t\t\t //Delete Order Confirmed\n\t\t\t\t\t\t\torderService.deleteOrderByLsOrderId(orderToEdit);\n\t\t\t\t\t\t\t//Save this operation in table operation\n\t\t\t\t\t\t\tOperationsDTO operationDTO=new OperationsDTO();\n\t\t\t\t\t\t\tUser userAdmin=(User)session.getAttribute(""userAdmin"");\n\t\t\t\t\t\t\tif(userAdmin!=null)operationDTO.setUserId(userAdmin.getId());\n\t\t\t\t\t\t\toperationDTO.setOperationDate(new Date());\n\t\t\t\t\t\t\toperationDTO.setOperationType(""Delete Order"");\n\t\t\t\t\t\t\tString dataBefore=""[PARTNER NAME:""+orderToEdit.getUserLogin()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [LS_ORDER_ID:""+orderToEdit.getLsOrderId()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [PRODUCT_ORDER_NUMBER:""+orderToEdit.getProductOrderNumber()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [CLIENT_FIRST_NAME:""+orderToEdit.getClientFirstName()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [CLIENT_LAST_NAME:""+orderToEdit.getClientLastName()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [CLIENT_POSTAL_CODE:""+orderToEdit.getClientPostalCode()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [LS_PRODUCT_ID:""+orderToEdit.getLsProductID()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [UNIT_PRICE:""+orderToEdit.getUnitPrice()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [STATUS:""+orderToEdit.getStatus()+""];"";\n\t\t\t\t\t\t\toperationDTO.setDataBefore(dataBefore);\n\t\t\t\t\t\t\toperationDTO.setDataBefore(operationDTO.getDataBefore());\n\t\t\t\t\t\t\toperationDTO.setDataAfter("""");\n\t\t\t\t\t\t\toperationsService.insertOperation(operationDTO);\n\t\t\t\t\t\t\t//Remove order from the list orders\n\t\t\t\t\t\t\tlistOrdersDTO.remove(orderToEdit);\n\t\t\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\t\t\tshowOrderDetailPop=""visibility:hidden;display:none;"";\n\t\t\t\t\t\t\tshowConfirmDeleteOrderPop=""visibility:hidden;display:none;"";\n\t\t\t\t\t\t\t//initialize index orders\n\t\t\t\t\t\t\tint indexOrder=0;\n\t\t\t\t\t\t\tint indexRow=0;\n\t\t\t\t\t\t\tfor(OrdersDTO orderDTO:listOrdersDTO){\n\t\t\t\t\t\t\t\torderDTO.setIndex(indexOrder);\n\t\t\t\t\t\t\t\tindexOrder++;\n\t\t\t\t\t\t\t\tindexRow=0;\n\t\t\t\t\t\t\t\tfor(OrdersRows orderRows:orderDTO.getRowsList()){\n\t\t\t\t\t\t\t\t\torderRows.setIndex(indexRow);\n\t\t\t\t\t\t\t\t\tindexRow++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\t\t}else{\t\t\t\t\t\t\t\t\t\t\t\t\t//Cancel Order Delete\n\t\t\t\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\t\t\t\tshowConfirmDeleteOrderPop=""visibility:hidden;display:none;"";\n\t\t\t\t\t\t}*/\n\n\t\t\t\t\t\treturn SUCCESS;\n\t\t\t\t\t}\n\n\t\t//#############################################################################################\t\t\t\n\t\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t/*------ When Admin click the ""Edit link"" in the Order Table for Edit NOTE -----\n\t\t\t\t\t\t\tshow only field Edit Note\n\t\t\t  ------------------------------------------------------------------------------*/\n\t\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && showOnlyEditNote!=null && showOnlyEditNote!=0L){\n\t\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\t\tfor(OrdersDTO order:listOrdersDTO){\n\t\t\t\t\t\torder.setShowOnlyEditNote(0L);\n\t\t\t\t\t\torder.setCssRow("""");\n\t\t\t\t\t}\n\t\t\t\torderToEdit.setShowOnlyEditNote(1L);\n\t\t\t\torderToEdit.setCssRow(""background-color:#FF9966;"");\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\tlistOrdersDTO=(ArrayList<OrdersDTO>) session.getAttribute(""listOrdersDTOReport"");\t\n\t\t\t\treturn SUCCESS;\n\t\t\t\t}\n\n\t\t\t\t/*------------ When Admin click on link ""Save Edit Note in the Orders Table"" ----------\n\t\t\t\t\t\t\t\t\t\t\t\t\tsave Only  notes\n\t\t\t\t  -------------------------------------------------------------------------------------*/\n\t\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && saveOnlyNoteSignal!=null && saveOnlyNoteSignal!=0L){\n\t\t\t\tif(indexOrder!=null){\n\t\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\t\tif(orderToEdit!=null){\n\t\t\t\t\t\torderToEdit.setNotes(notes);\n\t\t\t\t\t\torderToEdit.setShowRowShipping(0L);\n\t\t\t\t\t\torderToEdit.setShowOnlyEditNote(0L);\n\t\t\t\t\t\torderToEdit.setCssRow("""");\n\t\t\t\t\t\t//Save Note\n\t\t\t\t\t\tBoolean sucess=orderService.updateShippingOrderElements(orderToEdit);\n\t\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn SUCCESS;\n\t\t\t\t}\n\n\t\t\t/*------------ When Admin click the ""Edit link"" in the Order Table -------------\n\t\t\t\t\t\t\t\tshow fields to edit shipping parameters\n\t\t\t  ------------------------------------------------------------------------------*/\t\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && showRowShipping!=null && showRowShipping!=0L){\n\n\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\tfor(OrdersDTO order:listOrdersDTO){\n\t\t\t\t\torder.setShowRowShipping(0L);\n\t\t\t\t\torder.setCssRow("""");\n\t\t\t\t}\t\t\t\n\t\t\t\t //only Admins who has Active = true of action name='All' can change shipping settings \n\t\t\t\t //of orders shipped or invoiced\n\t\t\t\tif(usersPrivChangeShippedStatus==null && orderToEdit.getStatus()!=null &&\n\t\t\t\t   (orderToEdit.getStatus().equals(""shipped"")||orderToEdit.getStatus().equals(""invoiced""))){\n\t\t\t\t\tshowRowShipping=0L;\n\t\t\t\t\treturn SUCCESS;\n\t\t\t\t}\n\n\t\t\t\tif(orderToEdit!=null){\n\t\t\t\t\torderToEdit.setShowRowShipping(1L);\n\t\t\t\t\torderToEdit.setShowOnlyEditNote(1L);\n\t\t\t\t\torderToEdit.setCssRow(""background-color:#FF9966;"");\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\tlistOrdersDTO=(ArrayList<OrdersDTO>) session.getAttribute(""listOrdersDTOReport"");\n\t\t\t\t}\n\t\t\t\tif(orderToEdit.getStatus().equals(""open"")){\n\t\t\t\t\tstatusId=0L;\n\t\t\t\t}else if(orderToEdit.getStatus().equals(""progress"")){\n\t\t\t\t\tstatusId=1L;\n\t\t\t\t}else if(orderToEdit.getStatus().equals(""shipped"")){\n\t\t\t\t\tstatusId=2L;\n\t\t\t\t}else if(orderToEdit.getStatus().equals(""invoiced"")){\n\t\t\t\t\tstatusId=3L;\n\t\t\t\t}\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n    \t\t\n\t\t\t/*------------ When Admin click on link ""Save in the Orders Table"" ----------\n\t\t\t\t\t\t\tsave all shipping parameters and notes\n\t\t\t ----------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && saveShippingSignal!=null && saveShippingSignal!=0L){\n\t\t\t\tif(indexOrder!=null){\n\t\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\t\tif(orderToEdit!=null){\n\t\t\t\t\t\tDate shippedDateToEdit=null;\n\t\t\t\t\t\tfrm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\t\t\t\tif (((strShippedDate)!=null)&&(!"""".equals(strShippedDate))){\n\t\t\t\t\t\t\tstrShippedDate=strShippedDate.replaceAll("" "", """");\n\t\t\t    \t\t\ttry {\n\t\t\t    \t\t\t\tDate date = frm.parse(strShippedDate);\n\t\t\t    \t\t\t\tshippedDateToEdit=date;\n\t\t\t    \t\t\t}\n\t\t\t    \t\t\tcatch (Exception pe) {\n\t\t\t    \t\t\t\tshippedDateToEdit=null;\n\t\t\t    \t\t\t}\n\t\t\t    \t\t}\n\t\t\t\t\t\tif (((strShippedDate)!=null)&&(!"""".equals(strShippedDate))&& strShippedDate.length()<=8)shippedDateToEdit=orderToEdit.getShippedDate();\n\t\t\t\t\t\tDouble shippingPrice=null;\n\t   \t\t\t\t\tif(strShippingPrice!=null && !strShippingPrice.equals("""")){\n\t   \t\t\t\t\t\tstrShippingPrice=strShippingPrice.replaceAll("" "", """");\n    \t\t\t\t\t\tint index=strShippingPrice.indexOf("","");\n    \t\t\t\t\t\tif(index>=0){\n    \t\t\t\t\t\t\tString strUnitPrice1=strShippingPrice.substring(0, index);\n    \t\t\t\t\t\t\tString strUnitPrice2= strShippingPrice.substring(index+1, strShippingPrice.length());\n    \t\t\t\t\t\t\tstrShippingPrice=strUnitPrice1+"".""+strUnitPrice2;\n    \t\t\t\t\t\t}\n                          \t\n                          \ttry {\n                          \t\tshippingPrice = Double.parseDouble(strShippingPrice);\n                          \t}\n                          \tcatch (Exception pe) {\n                          \t\tshippingPrice=null;\n                          \t}\n    \t\t\t\t\t}\n\n                      \tif(trackingNumber!=null)trackingNumber=trackingNumber.replaceAll(""^ +| +$|( )+"", ""$1"");\n                      \tif(shippingCompany!=null)shippingCompany=shippingCompany.replaceAll(""^ +| +$|( )+"", ""$1"");\n\t\t\t\t\t\torderToEdit.setShippingPrice(shippingPrice);\n\t\t\t\t\t\torderToEdit.setShippedDate(shippedDateToEdit);\n\t\t\t\t\t\torderToEdit.setNotes(notes);\n\t\t\t\t\t\tif(newStatus!=null && !newStatus.equals(""""))orderToEdit.setStatus(newStatus);\n\t\t\t\t\t\torderToEdit.setShippingCompany(shippingCompany);\n\t\t\t\t\t\torderToEdit.setTrackingNumber(trackingNumber);\n\t\t\t\t\t\torderToEdit.setShowRowShipping(0L);\n\t\t\t\t\t\torderToEdit.setShowOnlyEditNote(0L);\n\t\t\t\t\t\tOrdersRows row=orderToEdit.getRowsList().get(0);\n\t\t\t\t\t\trow.setShippingPrice(shippingPrice);\n\t\t\t\t\t\trow.setShippingCompany(shippingCompany);\n\t\t\t\t\t\trow.setTrackingNumber(trackingNumber);\n\t\t\t\t\t\torderToEdit.setCssRow("""");\n  \n\t\t\t\t\t\tif(newStatus!=null && !newStatus.equals("""")){ // if admin click on the save behind status\n\t\t\t\t\t\t\torderService.updateStatusByLsOrderId(orderToEdit.getLsOrderId(), newStatus);\n\t\t\t\t\t\t\torderToEdit.setStatus(newStatus);\n\t\t\t\t\t\t\tif(!newStatus.equals(""shipped"")&& !newStatus.equals(""invoiced"")){\n\t\t\t\t\t\t\t\torderToEdit.setShippingPrice(null);\n\t\t\t\t\t\t\t\torderToEdit.setTrackingNumber(null);\n\t\t\t\t\t\t\t\torderToEdit.setShippedDate(null);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}else{// if admin click on the save other than Status\n\t\t\t\t\t\t\tif(orderToEdit.getShippedDate()!=null && \n\t\t\t\t\t\t\t\t   orderToEdit.getTrackingNumber()!=null && !orderToEdit.getTrackingNumber().equals("""")&&\n\t\t\t\t\t\t\t\t   orderToEdit.getShippingCompany()!=null && !orderToEdit.getShippingCompany().equals("""")&&\n\t\t\t\t\t\t\t\t   orderToEdit.getShippingPrice()!=null && orderToEdit.getStatus()!=null){\n\t\t\t\t\t\t\t\t   if(orderToEdit.getStatus().equals(""open"")||\n\t\t\t\t\t\t\t\t\t   orderToEdit.getStatus().equals(""progress"")){\n\t\t\t\t\t\t\t\t\t   orderService.updateStatusByLsOrderId(orderToEdit.getLsOrderId(), ""shipped"");\n\t\t\t\t\t\t\t\t\t   orderToEdit.setStatus(""shipped"");   \n\t\t\t\t\t\t\t\t   }\n\t\t\t\t\t\t\t}else{\t\t\t\t\t\t\t   \n\t\t\t\t\t\t\t\t   if(usersPrivChangeShippedStatus!=null && !orderToEdit.getStatus().equals(""open"") && \n\t\t\t\t\t\t\t\t\t\t!orderToEdit.getStatus().equals(""progress"")){\n\t\t\t\t\t\t\t\t\t\t orderService.updateStatusByLsOrderId(orderToEdit.getLsOrderId(), ""progress"");\n\t\t\t\t\t\t\t\t\t\t orderToEdit.setStatus(""progress"");\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// if admin click on the save other then status(save notes, save shipping company ...)\n\t\t\t\t\t\tBoolean sucess=orderService.updateShippingOrderElements(orderToEdit);\n\t\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*------------ When Admin click on icon findOrders.png ----------\n\t\t\t\t\t\t\t\tcheck user and complete infos client\n\t\t\t ----------------------------------------------------------------*/\n\t\t\tif(findOrdersSignal!=null && findOrdersSignal!=0L||\n\t\t\t\t\t(pageIndexSignal!=null && pageIndexSignal!=0L) ||\n\t\t\t\t\t(nextListPagesSignal!=null && nextListPagesSignal!=0L)||\n\t\t\t\t\t(prevListPagesSignal!=null && prevListPagesSignal!=0L)){\t\n\t\t\t\tlistIndexColumn=new ArrayList<Integer>();\n\t\t\t\tfor(int i=0;i<=34;i++){\n\t\t\t\t\tif(i!=2 && i<=13){\n\t\t\t\t\t\tlistIndexColumn.add(i);\n\t\t\t\t\t\tif(i!=0)listIndexColumn.add(-i);\n\t\t\t\t\t}\n\t\t\t\t\tif(i==30 || i==31 || i==34){\n\t\t\t\t\t\tlistIndexColumn.add(i);\n\t\t\t\t\t\tlistIndexColumn.add(-i);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlsOrderId=lsOrderId.toUpperCase();\n\t\t\t\t//if(findOrdersSignal!=null && findOrdersSignal!=0L)initalizeListIndexSet(session,orderService );\n\t\t\t\t\n\t\t\t\tlistOrdersDTO=orderService.searchOrdersWithOptionsAndSorting(creationDateStartArg, creationDateEndArg,reportDateBetween,userLogin, lsOrderId, status, listIndexColumn,PAGE_ITEMS_COUNT,indexSet);\n\t\t\t\t\n\t\t\t\tsession.setAttribute(""listIndexColumn"",listIndexColumn);\n\t\t\t\tsession.setAttribute(""sizeResult"",sizeResult);\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\tif(findOrdersSignal!=null && findOrdersSignal!=0L)initalizeListIndexSet(session,orderService );\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*------------ When Admin click on the icon sorting of column ----------\n\t\t\t\t\t\t\tseach result with option of sorting list\n\t\t\t -----------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && sortingOrdersSignal!=null && sortingOrdersSignal!=0L){\t\n\t\t\t\tlistIndexColumn=(List<Integer>)session.getAttribute(""listIndexColumn"");\n\t\t\t\tasc=(asc==1?-1:1);\n\t\t\t\tint nextElement=listIndexColumn.get(0);\n\t\t\t\tfieldForSorting=asc*fieldForSorting;\n\t\t\t\tlistIndexColumn.set(0,fieldForSorting);\n\t\t\t\tfor(int i=1;i<listIndexColumn.size();i++){\n\t\t\t\t\tint element=listIndexColumn.get(i);\n\t\t\t\t\tlistIndexColumn.set(i,nextElement);\n\t\t\t\t\tnextElement=element;\n\t\t\t\t}\t\n\t\t\t\tlistOrdersDTO=orderService.searchOrdersWithOptionsAndSorting(creationDateStartArg, creationDateEndArg,reportDateBetween,userLogin, lsOrderId, status, listIndexColumn,PAGE_ITEMS_COUNT,indexSet);\n\t\t\t\tint balance=0;\n\t\t\t\tint OrderIndex=0;\n\t\t\t\tfor(OrdersDTO orDTO: listOrdersDTO){\n\t\t\t\t\tbalance=(balance==1?0:1);\n\t\t\t\t\tif(balance==1){\n\t\t\t\t\t\torDTO.setCssStyle(""background-color: rgb(245,249,252);border-right: 1px solid #CCCCCC;border-left:1px solid #CCCCCC;border-top:  1px solid #CCCCCC;"");\n\t\t\t\t\t}else{\n\t\t\t\t\t\torDTO.setCssStyle(""background-color: color:white;border-right:1px solid #CCCCCC;border-left:1px solid #CCCCCC;border-top:1px solid #CCCCCC;"");\n\t\t\t\t\t}\n\t\t\t\t\torDTO.setIndex(OrderIndex); \n\t\t\t\t\tOrderIndex++;\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""listIndexColumn"",listIndexColumn);\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\tsession.setAttribute(""asc"", asc);\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*------ when Admin click on the lsOrder link in table -----------\n\t\t\t\t\tshow popup detail and allow admin to update Order\n\t\t\t  ---------------------------------------------------------------*/\n\t\t\tif (listOrdersDTO!=null && listOrdersDTO.size()>0 && editOrderSignal!=null && editOrderSignal!=0L){\n\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\tif(orderToEdit==null)orderToEdit=new OrdersDTO();\n\t\t\t\tif(orderToEdit.getProductOrderDate()==null)strProductOrderDate="""";\n\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*--- when Admin click on the cancel Button of orderDetailPop ---\n\t\t\t\t\twe mast just hide popup OrderDetail\n\t\t\t  ---------------------------------------------------------------*/\n    \t\tif (listOrdersDTO!=null && listOrdersDTO.size()>0 && cancelSignal!=null && cancelSignal!=0L){\n\t\t\t\tshowOrderDetailPop=""visibility:hidden;display:none;"";\n    \t\t\treturn SUCCESS;\n    \t\t}\n\n\t\t\t/*-------------------- When Admin left lsProduct TextField -------------\n\t\t\t\t\t\t\t\tcheck userPrice in DB, and write it in web view\n\t\t\t -----------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && checkProductPriceSignal!=null && checkProductPriceSignal!=0L){\n\t\t\t\tOrdersDTO orderDTOToUpdate=listOrdersDTO.get(indexOrder);\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\tOrdersRows orderRowToUpadate=orderDTOToUpdate.getRowsList().get(indexRow);\n\t\t\t\tUserProductPriceDTO userProductPrice=productService.getUsrPPriceByLsproductId(userId, lsProductID);\n\t\t\t\torderRowToUpadate.setCss("""");\n\t\t\t\torderRowToUpadate.setCssPrice("""");\n\t\t\t\tif(userProductPrice==null){\n\t\t\t\t\torderRowToUpadate.setCss(""background-color:red;"");\n\t\t\t\t\torderRowToUpadate.setProductDescription(""""); \n\t\t\t\t\torderRowToUpadate.setStock(null);\n\t\t\t\t\torderRowToUpadate.setProductId(null);\n\t\t\t\t\torderRowToUpadate.setLsProductID(lsProductID);\n\t\t\t\t\torderRowToUpadate.setLsPrice(null);\n\t\t\t\t}else{\n\t\t\t\t\tDouble usrPrice=orderRowToUpadate.getUnitPrice();\n\t\t\t\t\tif(usrPrice==null)usrPrice=0D;\n\t\t\t\t\tif(usrPrice < userProductPrice.getPriceNum()){\n\t\t\t\t\t\torderRowToUpadate.setCssPrice(""background-color:red;"");\t\n\t\t\t\t\t}\n\t\t\t\t\torderRowToUpadate.setProductDescription(userProductPrice.getProductTitle());\n\t\t\t\t\torderRowToUpadate.setStock(userProductPrice.getStock());\n\t\t\t\t\torderRowToUpadate.setProductId(userProductPrice.getProductId());\n\t\t\t\t\torderRowToUpadate.setLsProductID(userProductPrice.getLsProductId());\n\t\t\t\t\torderRowToUpadate.setLsPrice(userProductPrice.getPriceNum());\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\torderToEdit=orderDTOToUpdate;\n\t\t\t\tlistOrdersDTO=(List<OrdersDTO>)session.getAttribute(""listOrdersDTOReport"");\n\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*----------------- When Admin check on saveTemporaryRow Icon --------------------------\n\t\t\t\t\twe must first obtained the object that contains the list of rows,\n\t\t\t\t\tafter we accede to the row by index recovered by web view and change it\n\t\t\t ---------------------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && saveTemporaryRowSignal!=null && saveTemporaryRowSignal!=0L){\n\t\t\t\tOrdersDTO orderDTOToUpdate=listOrdersDTO.get(indexOrder);\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\tOrdersRows orderRowToSaveMemory=orderDTOToUpdate.getRowsList().get(indexRow);\n\t\t\t\torderRowToSaveMemory.setIcon(""images/orders/itemValidated.png"");\n\t\t\t\tif(orderRowToSaveMemory!=null){\n\t\t\t\t\torderRowToSaveMemory.setQuantity(quantity); \n\t\t\t\t\torderRowToSaveMemory.setLsProductID(lsProductID);\n\t\t\t\t\torderRowToSaveMemory.setProductDescription(productDescription);\n\t\t\t\t\torderRowToSaveMemory.setUnitPrice(unitPrice);\n\t\t\t\t\torderRowToSaveMemory.setCssPrice(""background-color:#FF6666;"");\n\t\t\t\t\torderRowToSaveMemory.setCssQuantity(""background-color:#FF6666;"");\n\t\t\t\t\tif(quantity!=null && quantity>0D)orderRowToSaveMemory.setCssQuantity("""");\n\t\t\t\t\tif(unitPrice!=null && orderRowToSaveMemory.getLsPrice()!=null\n\t\t\t\t\t  && unitPrice>=orderRowToSaveMemory.getLsPrice())\n\t\t\t\t\t  orderRowToSaveMemory.setCssPrice("""");\n\t\t\t\t\torderRowToSaveMemory.setShippingFee(shippingFee);\n\t\t\t\t\torderRowToSaveMemory.setShippingCompany(shippingCompany);\n\t\t\t\t\torderRowToSaveMemory.setTrackingNumber(trackingNumber);\t\n\t\t\t\t\tint indexOrder=0;\n\t\t\t\t\tint indexRow=0;\n\t\t\t\t\tfor(OrdersDTO orderDTO:listOrdersDTO){\n\t\t\t\t\t\torderDTO.setIndex(indexOrder);\n\t\t\t\t\t\tindexOrder++;\n\t\t\t\t\t\tindexRow=0;\n\t\t\t\t\t\tfor(OrdersRows orderRows:orderDTO.getRowsList()){\n\t\t\t\t\t\t\torderRows.setIndex(indexRow);\n\t\t\t\t\t\t\tindexRow++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\tlistOrdersDTO=(List<OrdersDTO>)session.getAttribute(""listOrdersDTOReport"");\n\t\t\t\t}\n\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*------- When Admin click on addSimilarRow Icon on the OrderDetailPop --------\n\t\t\t\t\t\t\t\tAdd one Row Similar at the previews\n\t\t\t  -----------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && addSimilarRowSignal!=null && addSimilarRowSignal!=0L){\n\t\t\t\tOrdersDTO orderDTOToUpdate=listOrdersDTO.get(indexOrder);\n\t\t\t\t//generate lsOrderId to new order\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\tOrdersRows orderRowToClone=orderDTOToUpdate.getRowsList().get(indexRow);\n\t\t\t\tif(orderRowToClone!=null){\n\t\t\t\t\tif(!orderRowToClone.getIcon().equals(""images/orders/itemValidated.png"")){\n\t\t\t\t\t\torderRowToClone.setQuantity(quantity); \n\t\t\t\t\t\torderRowToClone.setLsProductID(lsProductID);\n\t\t\t\t\t\torderRowToClone.setStock(stock);\n\t\t\t\t\t\torderRowToClone.setProductDescription(productDescription);\n\t\t\t\t\t\torderRowToClone.setUnitPrice(unitPrice);\n\t\t\t\t\t\torderRowToClone.setShippingFee(shippingFee);\n\t\t\t\t\t\torderRowToClone.setShippingCompany(shippingCompany);\n\t\t\t\t\t\torderRowToClone.setTrackingNumber(trackingNumber);\n\t\t\t\t\t}\n\t\t\t\t\torderRowToClone.setIcon(""images/orders/itemValidated.png"");\n\t\t\t\t\tOrdersRows orderRowToAdd=DTOFactory.getOrderRowClone(orderRowToClone);\n\t\t\t\t\torderRowToAdd.setId(-1L);\n\t\t\t\t\t\n\t\t\t\t\torderDTOToUpdate.getRowsList().add(indexRow+1,orderRowToAdd);\n\t\t\t\t\tint indexOrder=0;\n\t\t\t\t\tint indexRow=0;\n\t\t\t\t\tfor(OrdersDTO orderDTO:listOrdersDTO){\n\t\t\t\t\t\torderDTO.setIndex(indexOrder);\n\t\t\t\t\t\tindexOrder++;\n\t\t\t\t\t\tindexRow=0;\n\t\t\t\t\t\tfor(OrdersRows orderRows:orderDTO.getRowsList()){\n\t\t\t\t\t\t\torderRows.setIndex(indexRow);\n\t\t\t\t\t\t\tindexRow++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\tlistOrdersDTO=(List<OrdersDTO>)session.getAttribute(""listOrdersDTOReport"");\n\t\t\t\t}\n\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*-------- When Admin click on Delete Row Icon of orderDetail Popup-----------\n\t\t\t\t\t\t\t\t\tDelete this row using index\n\t\t\t -----------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && deleteRowSignal!=null && deleteRowSignal!=0L){\n\t\t\t\tOrdersDTO orderDTO=listOrdersDTO.get(indexOrder);\n\t\t\t\torderDTO=fillDataOrderDTO(orderDTO);\n\t\t\t\tint nb=orderService.nbOrderRowsNotDeleted(orderDTO.getRowsList());\n\t\t\t\tif(orderDTO!=null && orderDTO.getRowsList().size()>1){\n\t\t\t\t\tfor(int i=0 ;i<orderDTO.getRowsList().size();i++){\n\t\t\t\t\t\tif(i==indexRow && nb>1){\n\t\t\t\t\t\t\torderDTO.getRowsList().get(i).setToDelete(1);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*------ when Admin click on the button save of orderDetail ------------------\n\t\t\t\t\t save order and hide pup  \n\t\t\t  ----------------------------------------------------------------------------*/\n    \t\tif (listOrdersDTO!=null && listOrdersDTO.size()>0 && saveOrdersSignal!=null && saveOrdersSignal!=0L){\n    \t\t\tsession.setAttribute(""orderNotSavedAtFirst"",null);\n\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\torderToEdit=fillDataOrderDTO(orderToEdit);\n\t\t\t\torderService.updateOrderByLsOrderId(orderToEdit);\n\t\t\t\tfor(OrdersRows row:orderToEdit.getRowsList()){\n\t\t\t\t\tif(row.getId()==-1)row.setId(0L);\n\t\t\t\t}\n\t\t\t\tOrdersRows row=orderToEdit.getRowsList().get(0);\n\t\t\t\tif(row!=null){\n\t\t\t\t\torderToEdit.getShippedDate();\n\t\t\t\t\torderToEdit.setLsPrice(row.getLsPrice());\n\t\t\t\t\torderToEdit.setLsProductID(row.getLsProductID());\n\t\t\t\t\torderToEdit.setProductDescription(row.getProductDescription());\n\t\t\t\t\torderToEdit.setQuantity(row.getQuantity());\n\t\t\t\t}\n\t\t\t\torderToEdit=DTOFactory.getOrderDTOConsideredMissingInfo(orderToEdit,hashProvinces);\n\t\t\t\tlistIndexColumn=(List<Integer>)session.getAttribute(""listIndexColumn"");\n\t\t\t\tlistOrdersDTO=orderService.searchOrdersWithOptionsAndSorting(creationDateStartArg, creationDateEndArg,reportDateBetween,userLogin, lsOrderId, status, listIndexColumn,PAGE_ITEMS_COUNT,indexSet);\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\tmessage=""Saving has completed successfuly"";\n\t\t\t\tshowSaveSuccessPop=""display:block;visibility:visible;"";\n\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n    \t\t\treturn SUCCESS;\n    \t\t}\n\n\t\t\t/*------ When user change Quantity to split in orderDetailPop -----------\n\t\t\t\t\t prepare order to split from two other orders witch\n\t\t\t\t \t one must have a lsOrder with underscore \n\t \t\t ------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && quantityToChangeSignal!=null && quantityToChangeSignal!=0L){\n\t\t\t\tOrdersDTO orderToChangeQt=listOrdersDTO.get(indexOrder);\n\t\t\t\tOrdersRows orderRow=orderToChangeQt.getRowsList().get(indexRow);\n\t\t\t\torderToChangeQt=fillDataOrderDTO(orderToChangeQt);\n\t\t\t\tif(quantityToChange<orderRow.getQuantity())orderRow.setQuantityToSplit(quantityToChange);\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\tlistOrdersDTO=(List<OrdersDTO>)session.getAttribute(""listOrdersDTOReport"");\n\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*-------------------- Duplicate Order ----------------------------------------\n\t\t\t\t\t\t\tCreate order in just in memory\n\t \t\t -----------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && duplicateOrderSignal!=null && duplicateOrderSignal!=0L){\n\t\t\tOrdersDTO orderToClone=listOrdersDTO.get(indexOrder);\n\t\t\torderToClone=fillDataOrderDTO(orderToClone);\n\t\t\thashOrders=new Hashtable<String, OrdersDTO>();\n\t\t\tfor(OrdersDTO ord:listOrdersDTO){\n\t\t\t\thashOrders.put(ord.getLsOrderId(), ord);\n\t\t\t}\n\t\t\tOrdersDTO orderClone=DTOFactory.getOrderDTOSplitted(orderToClone);\n\t\t\tif(orderClone!=null){\n\t\t\t\torderClone.setDuplicate(true);\n\t\t\t\tString lsOrder=orderClone.getLsOrderId();\n\t\t\t\tString strlsOrder=orderService.generateLsOrderId(lsOrder, hashOrders);\n\t\t\t\torderClone.setLsOrderId(strlsOrder);//rgb(116,180,209)\n\t\t\t\torderClone.setCssStyle(""background-color:#FFFF99;border-right: 1px solid #CCCCCC;border-left:1px solid #CCCCCC;border-top:  1px solid #CCCCCC;"");\n\t\t\t\torderToEdit=orderClone;\n\t\t\t\torderToEdit.setBackgroundColor(""background-color:#FFFF99;"");\n\t\t\t\tlistOrdersDTO.add(indexOrder+1,orderClone);\n\t\t\t\tindexOrder=0;\n\t\t\t\tfor(OrdersDTO ord: listOrdersDTO){\n\t\t\t\t\tord.setIndex(indexOrder);\n\t\t\t\t\tindexOrder++;\n\t\t\t\t}\n\t\t\t\torderService.updateOrderByLsOrderId(orderToClone);\n\t\t\t\torderService.insertOrderWithRows(orderClone);\n\t\t\t\torderClone.setDuplicate(false);\n\t\t\t\tfor(OrdersRows row:orderClone.getRowsList()) {\n\t\t\t\t\tif(row.getId()<0L)row.setId(0L);\n\t\t\t\t}\n\t\t\t\tif(listOrdersDTO.size()>0){\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t}\n\t\t\t}else orderToEdit=orderToClone;\n\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*-------------------- When user check print item -----------------------------\n\t\t\t\t\tAdd or remove this element from the orders to print\n\t \t\t -----------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && checkBoxPrintSignal!=null && checkBoxPrintSignal!=0L){\n\t\t\t\tOrdersDTO orderDTOInList=listOrdersDTO.get(indexOrder);\n\t\t\t\torderDTOInList.setPrint(checkBoxPrint);\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*-------------------- When user check print item -----------------------------\n\t\t\t\t\tAdd or remove this element from the orders to print\n\t \t\t -----------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && okSaveSuccessPopSignal!=null && okSaveSuccessPopSignal!=0L){\n\t\t\t\tshowSaveSuccessPop=""visibility:hidden;display:none;"";\n\t\t\t\tshowOrderDetailPop=""visibility:hidden;display:none;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t} catch (Exception e) {\n\t\t\te.printStackTrace();\n\t\t\treturn ""input"";\n\t\t}\n\treturn SUCCESS;\n\t}\n\n   /*=========================================================================================\n\t\t\t\t\t\t\tfill all fields of order without rows\n\t =========================================================================================*/\n\tpublic OrdersDTO fillDataOrderDTO(OrdersDTO orderDTO){\n\t\tSimpleDateFormat frm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t//orderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\n\t\torderDTO.setClientLastName(clientLastName);\n\t\torderDTO.setClientFirstName(clientFirstName);\n\t\torderDTO.setClientOtherNames(clientOtherNames); \n\t\torderDTO.setClientStreet(clientStreet);\n\t\torderDTO.setClientOtherStreet(clientOtherStreet);\n\t\torderDTO.setClientCity(clientCity);\n\t\torderDTO.setClientProvince(code);\n\t\torderDTO.setClientPostalCode(clientPostalCode);\n\t\torderDTO.setClientPhone(clientPhone);\n\t\torderDTO.setClientEmail(clientEmail);\t\t\t\n\t\torderDTO.setProductOrderNumber(productOrderNumber);\n\t\torderDTO.setCompanyHeader(companyHeader);\n\n\t\tif (((strProductOrderDate)!=null)&&(!"""".equals(strProductOrderDate))){\n\t\t\tfrm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\ttry {\n\t\t\t\tDate date = frm.parse(strProductOrderDate);\n\t\t\t\torderDTO.setProductOrderDate(date);\n\t\t\t}\n\t\t\tcatch (Exception pe) {\n\t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (((strCreationOrderDate)!=null)&&(!"""".equals(strCreationOrderDate))){\n\t\t\tfrm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\ttry {\n\t\t\t\tDate date = frm.parse(strCreationOrderDate);\n\t\t\t\torderDTO.setCreationDate(date);\n\t\t\t}\n\t\t\tcatch (Exception pe) {\n\t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (((strRequiredDate)!=null)&&(!"""".equals(strRequiredDate))){\n\t\t\tfrm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\ttry {\n\t\t\t\tDate date = frm.parse(strRequiredDate);\n\t\t\t\torderDTO.setRequiredDate(date);\n\t\t\t}\n\t\t\tcatch (Exception pe) {\n\t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t\t\t}\n\t\t}\n\t\treturn orderDTO;\n\t}\n\n\n\t/*=========================================================================================\n\t\t\t\t\t\t\t\tinitialize ListIndexSet\n\t  =========================================================================================*/\n\tpublic void initalizeListIndexSet(HttpSession session,OrdersService orderService ) throws ServiceException{\n\t\t\tlistIndexSet=new ArrayList<OrdersDTO>();\n\t\t\ttotalOrders=orderService.getCountOrders(creationDateStartArg, creationDateEndArg,reportDateBetween, userLogin, lsOrderId, status);\n\t\t\tString strcount=totalOrders.toString();\n\t\t\tInteger sizeList=Integer.parseInt(strcount) / PAGE_ITEMS_COUNT;\n\t\t\tnextListPages=1;\n\t\t\tsession.setAttribute(""nextListPages"",nextListPages);\n\t\t\tfor(int i=1;i<=sizeList+1 && i<=11;i++){\n\t\t\t\tOrdersDTO ord=new OrdersDTO();\n\t\t\t\tord.setCssStyle("""");\n\t\t\t\tord.setIndex(i);\n\t\t\t\tlistIndexSet.add(ord);\n\t\t\t}\n\t\t\tindexSet=0;\n\t\t\tsession.setAttribute(""indexSet"",indexSet);\n\t\t\tsession.setAttribute(""totalOrders"",totalOrders);\n\t\t\tsession.setAttribute(""listIndexSet"",listIndexSet);\n\n\t}\n\t\n\tpublic List<OrdersDTO> getOrdersToCancel(String strOrderSelected){\n\t\tList<OrdersDTO>result=new ArrayList<OrdersDTO>();\n\t\tif(strOrderSelected==null || strOrderSelected.equals(""""))return result;\n\t\tString[] tabPrint=strOrderSelected.split("","");\n\t\tfor(int i=0;i<tabPrint.length;i++){\n\t\t\tString item=tabPrint[i];\n\t\t\tString[] tabItem=item.split("";"");\n\t\t\tint index=Integer.parseInt(tabItem[0]);\n\t\t\tOrdersDTO orderDTO= listOrdersDTO.get(index);\n\t\t\tif(tabItem[1].equals(""t"")){\n\t\t\t\tresult.add(orderDTO);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n}\n\n----------------------------------- SOURCE END -------------------------------------",1403209252407
error,log,,,"Problems occurred when invoking code from plug-in: ""org.eclipse.jdt.ui"".",1403209252408
error,log,,,"Error in JDT Core during reconcile",1403209252409
error,log,,,"Exception occurred during problem detection:\n----------------------------------- SOURCE BEGIN -------------------------------------\npackage com.loyauty.web.struts.action.orders;\n\nimport java.text.SimpleDateFormat;\nimport java.util.ArrayList;\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.Hashtable;\nimport java.util.List;\n\nimport javax.servlet.http.HttpSession;\nimport lombok.Getter;\nimport lombok.Setter;\n\nimport com.loyauty.exception.ServiceException;\nimport com.loyauty.exception.ServiceLocatorException;\nimport com.loyauty.model.OrdersRows;\nimport com.loyauty.model.User;\nimport com.loyauty.service.core.DTOFactory;\nimport com.loyauty.service.core.dto.BasicUserDTO;\nimport com.loyauty.service.core.dto.OperationsDTO;\nimport com.loyauty.service.core.dto.OrdersDTO;\nimport com.loyauty.service.core.dto.ProvinceDTO;\nimport com.loyauty.service.core.dto.UserProductPriceDTO;\nimport com.loyauty.service.core.dto.UserSessionDTO;\nimport com.loyauty.service.core.dto.UsersPrivilegesDTO;\nimport com.loyauty.service.operations.OperationsService;\nimport com.loyauty.service.orders.OrdersService;\nimport com.loyauty.service.product.ProductService;\nimport com.loyauty.service.user.UserService;\nimport com.loyauty.web.struts.action.LoyautyAction;\n\npublic class ReportOrders  extends LoyautyAction {\n\tprivate static final long serialVersionUID = -3811760851445730062L;\n\tprivate UserService userService;\n\tprivate ProductService productService;\n\tprivate OrdersService orderService;\n\tprivate OperationsService operationsService;\n\t@Getter @Setter\n\tprivate String userLogin;\n\t@Getter @Setter\n\tprivate List<User> usersList;\n\tprivate static int USER_TYPE = 2;\n\t@Getter @Setter\n\tList<OrdersDTO>listOrdersDTO;\n\t@Getter @Setter\n\tList<OrdersDTO>listStatus;\n\t@Getter @Setter\n\tprivate String lsOrderId;\n\t@Getter @Setter\n\tLong poYpop;\n\t@Getter @Setter\n\tLong poXpop;\n\t@Getter @Setter\n\tprivate Long pageTop=0L;\n\t@Getter @Setter\n\tprivate Date creationDate ;\n\t@Getter @Setter\n\tprivate Long findOrdersSignal;\n\tprivate String status;\n\t@Getter @Setter\n\tprivate Long sizeResult=0L;\n\t@Getter @Setter\n\tprivate Long sorting;\n\t@Getter @Setter\n\tprivate Long sortingOrdersSignal;\n\t@Getter @Setter\n\tprivate Integer fieldForSorting;\n\t@Getter @Setter\n\tprivate Integer asc;\n\t@Getter @Setter\n\tprivate Integer scrollDivRowsLeft;\n\t@Getter @Setter\n\tprivate Integer scrollPageLeft;\n\t@Getter @Setter\n\tprivate Integer scrollDivRowsTop;\n\t@Getter @Setter\n\tprivate String strCreationDateStart;\n\t@Getter @Setter\n\tprivate String strCreationDateEnd;\n\t@Getter @Setter\n\tprivate Date creationDateStart;\n\t@Getter @Setter\n\tprivate Date creationDateEnd ;\n\tprivate Date creationDateStartArg;\n\tprivate Date creationDateEndArg ;\n\t@Getter @Setter\n\tprivate Integer selectedStatus;\n\t@Getter @Setter\n\tprivate Long editOrderSignal;\n\t@Getter @Setter\n\tprivate Long cancelSignal;\n\t@Getter @Setter\n\tprivate Integer indexOrder;\n\t@Getter @Setter\n\tprivate OrdersDTO orderToEdit;\n\t@Getter @Setter\n\tprivate String strProductOrderDate;\n\t@Getter @Setter\n\tprivate String lsProductID;\n\t@Getter @Setter\n\tInteger indexRow;\n\t@Getter @Setter\n\tprivate String showOrderDetailPop;\n\t@Getter @Setter\n\tprivate Long userId;\n\t@Getter @Setter\n\tprivate Long checkProductPriceSignal;\n\t@Getter @Setter\n\tprivate Long saveTemporaryRowSignal;\n\t@Getter @Setter\n\tprivate Long addSimilarRowSignal;\n\t@Getter @Setter\n\tprivate Long deleteRowSignal;\n\t@Getter @Setter\n\tprivate Long saveOrdersSignal;\n\t@Getter @Setter\n\tprivate Long checkBoxPrintSignal;\n\t@Getter @Setter\n\tprivate Boolean checkBoxPrint;\n\t\n\t//recovery Data Order\n\t@Getter @Setter\n\tprivate String clientLastName;\n\t@Getter @Setter\n\tprivate String clientFirstName;\n\t@Getter @Setter\n\tprivate String clientOtherNames;\n\t@Getter @Setter\n\tprivate String clientStreet;\n\t@Getter @Setter\n\tprivate String  clientOtherStreet;\n\t@Getter @Setter\n\tprivate String  clientCity;\n\t@Getter @Setter\n\tprivate String  clientProvince;\n\t@Getter @Setter\n\tprivate String  clientPostalCode;\n\t@Getter @Setter\n\tprivate String  clientPhone;\n\t@Getter @Setter\n\tprivate String  clientEmail;\n\t@Getter @Setter\n\tprivate String productOrderNumber;\n\t@Getter @Setter\n\tprivate String strRequiredDate;\n\t\n\t//recovery data row\n\t@Getter @Setter\n\tprivate Double quantity ;\n\t@Getter @Setter\n\tprivate String notes;\n\t@Getter @Setter\n\tprivate Double quantityToChange;\n\t@Getter @Setter\n\tprivate Double stock;\n\t@Getter @Setter\n\tprivate String productDescription;\n\t@Getter @Setter\n\tprivate Double unitPrice;\n\t@Getter @Setter\n\tprivate Double shippingFee;\n\t@Getter @Setter\n\tprivate String shippingCompany;\n\t@Getter @Setter\n\tprivate String companyHeader;\n\t@Getter @Setter\n\tprivate String trackingNumber;\n\t@Getter @Setter\n\tprivate Long quantityToChangeSignal;\n\t@Getter @Setter\n\tprivate Long duplicateOrderSignal;\n\t@Getter @Setter\n\tprivate String strCreationDate;\n\t@Getter @Setter\n\tprivate String strCreationOrderDate;\n\t@Getter @Setter\n\tprivate User usr;\n\t@Getter @Setter\n\tprivate String showSaveSuccessPop;\n\t//showSaveSuccessPop=""display:block;visibility:visible;"";\n\t//showSaveSuccessPop=""visibility:hidden;display:none;"";\n\t@Getter @Setter\n\tprivate String message;\n\t@Getter @Setter\n\tprivate Long okSaveSuccessPopSignal;\n\t@Getter @Setter\n\tprivate Long showRowShipping;\n\t@Getter @Setter\n\tprivate Long showOnlyEditNote;\n\t@Getter @Setter\n\tprivate Long saveShippingSignal;\n\t@Getter @Setter\n\tprivate Long saveOnlyNoteSignal;\n\t@Getter @Setter\n\tprivate String code;\n\t@Getter @Setter\n\tprivate Long cityId;\n\t@Getter @Setter\n\tprivate List<ProvinceDTO>listProvinces;\n\tprivate Hashtable<String, ProvinceDTO>hashProvinces;\n\t@Getter @Setter\n\tprivate Boolean orderNotSavedAtFirst;\n\t@Getter @Setter\n\tprivate String strShippedDate;\n\t@Getter @Setter\n\tprivate String strShippingPrice;\n\t@Getter @Setter\n\tprivate String showConfirmDeleteOrderPop;\n\t@Getter @Setter\n\tprivate Long deleteOrderSignal; \n\t@Getter @Setter\n\tprivate Long confirmDeleteSignal;\n\t@Getter @Setter\n\tprivate UsersPrivilegesDTO userPrivileges;\n\t@Getter @Setter\n\tprivate UsersPrivilegesDTO usersPrivShippedToInvoiced;\n\t@Getter @Setter\n\tprivate UsersPrivilegesDTO usersPrivChangeShippedStatus;\n\t@Getter @Setter\n\tprivate HashMap<Integer, String> hashStatus;\n\t@Getter @Setter\n\tprivate Long statusId;\n\t@Getter @Setter\n\tprivate String strPrint;\n\t@Getter @Setter\n\tprivate Integer testSignal;\n\t@Getter @Setter\n\tprivate String newStatus;\n\tLong invoicedOrdersRefresh;\n\t@Getter @Setter\n\tprivate Integer reportDateBetween;\n\t@Getter @Setter\n\tprivate Long dateBetweenSignal;\n\t//------Pagination\n\t@Getter @Setter\n\tLong pageIndexSignal;\n\t@Getter @Setter\n\tLong prevListPagesSignal;\n\t@Getter @Setter\n\tLong nextListPagesSignal;\n\t@Getter @Setter\n\tLong cancelOrderSignal;\n\t@Getter @Setter\n\tLong totalOrders;\n\t@Getter @Setter\n\tInteger nextListPages;\n\t@Getter @Setter\n\tInteger prevListPages;\n\t@Getter @Setter\n\tInteger indexSet=0;\n\t@Getter @Setter\n\tInteger indexList;\n\t@Getter @Setter\n\tList<OrdersDTO>listIndexSet;\n\t@Getter @Setter\n\tInteger PAGE_ITEMS_COUNT=100;\n\t//------Pagination\n\t\n\t/*=========================================================================================\n\t\t\t\t\t\t\t\t\t\tDefault constructor\n\t  =========================================================================================*/\n\tpublic  ReportOrders() throws ServiceLocatorException {\n\t\tsuper();\t \n\t\tuserService = getServiceLocator().getUserService();\n\t\torderService = getServiceLocator().getOrderService();\n\t\tproductService = getServiceLocator().getProductService();\n\t\toperationsService=getServiceLocator().getOperationsService();\n\t}\n\t/*=========================================================================================\n\t \t\t\t\t\t\t\t\t\tmethod execute\n\t  =========================================================================================*/\n\t@SuppressWarnings({ ""rawtypes"", ""unchecked"" })\n\t@Override\n\tpublic String execute() throws Exception {\n\t\tHttpSession session = request.getSession(true);\n\t\t\n\t\tif(showOrderDetailPop==null)showOrderDetailPop=""visibility:hidden;display:none;"";\n\t\tif(showConfirmDeleteOrderPop==null)showConfirmDeleteOrderPop=""visibility:hidden;display:none;"";\n\t\tif(showSaveSuccessPop==null)showSaveSuccessPop=""visibility:hidden;display:none;"";\n\t\tif(poYpop==null)poYpop=100L;\n\t\tif(poXpop==null)poXpop=100L;\n\t\tHashtable<String, OrdersDTO>hashOrders;\n\t\tif(selectedStatus==null)selectedStatus=-1;\n\t\tsizeResult=(Long)session.getAttribute(""sizeResult"");\n\t\ttotalOrders=(Long)session.getAttribute(""totalOrders"");\n\t\tif(totalOrders==null)totalOrders=0L;\n\t\tasc=(Integer)session.getAttribute(""asc"");\n\t\tif(asc==null)asc=0;\n\t\tif(sizeResult==null)sizeResult=0L;\n\t\tif(indexOrder==null)indexOrder=0;\n\t\tuserPrivileges=(UsersPrivilegesDTO)session.getAttribute(""userPrivileges"");\n\t\tusersPrivShippedToInvoiced=(UsersPrivilegesDTO)session.getAttribute(""usersPrivShippedToInvoiced"");\n\t\tusersPrivChangeShippedStatus=(UsersPrivilegesDTO)session.getAttribute(""usersPrivChangeShippedStatus"");\n\t\thashStatus=(HashMap<Integer, String>)session.getAttribute(""hashStatus"");\n\t\tif(hashStatus==null){\n\t\t\thashStatus=new HashMap<Integer, String>();\n\t\t\thashStatus.put(0, """");\n\t\t\thashStatus.put(1, ""open"");\n\t\t\thashStatus.put(2, ""progress"");\n\t\t}\n\t\tList<Integer>listIndexColumn=new ArrayList<Integer>();\n\t\t//fill list status\n\t\tlistStatus=(ArrayList<OrdersDTO>)session.getAttribute(""listStatus"");\n\t\tif(listStatus==null){\n\t\t\tlistStatus=new ArrayList<OrdersDTO>();\n\t\t\tOrdersDTO orderDTOOpen=new OrdersDTO();\n\t\t\torderDTOOpen.setStatus(""open"");\n\t\t\torderDTOOpen.setId(0L);\n\t\t\tlistStatus.add(orderDTOOpen);\n\t\t\tOrdersDTO orderDTOProgress=new OrdersDTO();\n\t\t\torderDTOProgress.setStatus(""progress"");\n\t\t\torderDTOProgress.setId(1L);\n\t\t\tlistStatus.add(orderDTOProgress);\n\t\t\tif(usersPrivChangeShippedStatus!=null){\n\t\t\t\tOrdersDTO orderDTOShipped=new OrdersDTO();\n\t\t\t\torderDTOShipped.setStatus(""shipped"");\n\t\t\t\torderDTOShipped.setId(2L);\n\t\t\t\tlistStatus.add(orderDTOShipped);\n\t\t\t\t/*OrdersDTO orderDTOBuild=new OrdersDTO();\n\t\t\t\torderDTOBuild.setStatus(""invoiced"");\n\t\t\t\torderDTOBuild.setId(3L);\n\t\t\t\tlistStatus.add(orderDTOBuild);*/\n\t\t\t}\n\n\t\t}\n\n\t\ttry {\n\t\n\t\t\t/*-------------------- recovery users list -----------------------------------\n\t\t\t\t\t\t\tRecovery users list in session\n\t\t\t -----------------------------------------------------------------------------*/\n\t\t\t//recovery provinces\n\t\t\tlistProvinces=(List<ProvinceDTO>)session.getAttribute(""listProvinces"");\n\t\t\tif(listProvinces==null)listProvinces=productService.getAllProvinces();\n\t\t\torderNotSavedAtFirst=(Boolean)session.getAttribute(""listNotSavedAtFirst"");\n\t\t\tBasicUserDTO basicUserDTO = new BasicUserDTO();\n\t\t\tbasicUserDTO.setTypeId(USER_TYPE);\n\t\t\tList<User> usersListSession=(List<User>)session.getAttribute(""usersListSession"");\n\t\t\tif(usersListSession==null){\n\t\t\t\tList<UserSessionDTO> listAllUsers= userService.getAllUsers(basicUserDTO);\n\t\t\t\tusersList=new ArrayList<User>();\n\t\t\t\tfor(UserSessionDTO userDTO:listAllUsers){\n\t\t\t\t\tUser user=new User();\n\t\t\t\t\tuser.setId(userDTO.getId());\n\t\t\t\t\tuser.setLogin(userDTO.getLogin());\n\t\t\t\t\tusersList.add(user);\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""usersListSession"",usersList);\n\t\t\t}else usersList=usersListSession;\n\t\t\tlistOrdersDTO=(ArrayList<OrdersDTO>) session.getAttribute(""listOrdersDTOReport"");\n\t\t\treportDateBetween=(Integer)session.getAttribute(""reportDateBetween"");\n\t\t\tif(reportDateBetween==null){\n\t\t\t\treportDateBetween=0;\n\t\t\t\tsession.setAttribute(""reportDateBetween"",reportDateBetween);\n\t\t\t}\n\t\t\t/*------ always recovery creationDate from strCreationDate ------\n\t\t\t\t\t\talways keep the user search options\n\t\t\t  ---------------------------------------------------------------*/\n\t\t\tcreationDateStart=null;\n\t\t\tSimpleDateFormat frm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\tif (((strCreationDateStart)!=null)&&(!"""".equals(strCreationDateStart))){\n    \t\t\ttry {\n    \t\t\t\tDate date = frm.parse(strCreationDateStart);\n    \t\t\t\tcreationDateStart=date;\n    \t\t\t\tcreationDateStartArg=date;\n    \t\t\t}\n    \t\t\tcatch (Exception pe) {\n    \t\t\t\tcreationDateStart=null;\n    \t\t\t\taddActionError(""Please enter a date in the correct format"");\n    \t\t\t}\n    \t\t}\n    \t\tif(creationDateStart==null){\n\t\t\t\tDate date = frm.parse(""01/01/1900"");\n\t\t\t\tcreationDateStartArg=date;\n    \t\t}\n    \t\tcreationDateEnd=null;\n    \t\tif (((strCreationDateEnd)!=null)&&(!"""".equals(strCreationDateEnd))){\n    \t\t\tfrm = new SimpleDateFormat(""dd/MM/yyyy"");\n    \t\t\ttry {\n    \t\t\t\tDate date = frm.parse(strCreationDateEnd);\n    \t\t\t\tcreationDateEnd=date;\n    \t\t\t\tcreationDateEndArg=date;\n    \t\t\t}\n    \t\t\tcatch (Exception pe) {\n    \t\t\t\tcreationDateEnd=null;\n    \t\t\t\taddActionError(""Please enter a date in the correct format"");\n    \t\t\t}\n    \t\t}\n    \t\tif(creationDateEnd==null){\n    \t\t\tcreationDateEndArg=new Date();\n    \t\t}\n\n\t\t\t/*------ always recovery Status from selectedStatus key ------\n\t\t\t\t\t\talways keep the status search options\n\t\t\t  ---------------------------------------------------------------*/\n    \t\tswitch (selectedStatus) {\n\t\t\t\tcase -1:status="""";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0:status=""open"";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:status=""progress"";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:status=""shipped"";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:status=""invoiced"";\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t/*----------- always initialized listPages if not done ----------\n\t\t\t\t   \t\t    and check if is there next listPages\n\t\t\t  ---------------------------------------------------------------*/\n    \t\tnextListPages=(Integer)session.getAttribute(""nextListPages"");\n    \t\tif(nextListPages==null)nextListPages=0;\n    \t\tif(indexSet==null || indexSet==-1){\n    \t\t\tindexSet=(Integer)session.getAttribute(""indexSet"");\n    \t\t\tif(indexSet==null)indexSet=0;\n    \t\t}\n    \t\tlistIndexSet=(List<OrdersDTO>)session.getAttribute(""listIndexSet"");\n    \t\tif(listIndexSet==null)initalizeListIndexSet(session,orderService );\n \n\t\t\t/*----------------- When Admin Click on the pageIndex ----------------------------------\n\t\t\t\t\t\t\t\t\t\tcatch  page index\n\t\t\t ---------------------------------------------------------------------------------------*/\n    \t\t\n    \t\tif(dateBetweenSignal!=null && dateBetweenSignal!=0L){\n    \t\t\treportDateBetween=((reportDateBetween==null || reportDateBetween==0)?1:0);\n    \t\t\tlistOrdersDTO=new ArrayList<OrdersDTO>();\n    \t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\tsession.setAttribute(""reportDateBetween"",reportDateBetween);\n\t\t\t\treturn SUCCESS;\n    \t\t}\n\n\t\t\t/*----------------- When Admin Click on the pageIndex ----------------------------------\n\t\t\t\t\t\t\t\t\t\tcatch  page index\n\t\t\t ---------------------------------------------------------------------------------------*/\n    \t\tif(pageIndexSignal!=null && pageIndexSignal!=0L){\n     \t\t\tOrdersDTO orderDTO=(OrdersDTO)session.getAttribute(""orderPageSelected"");\n    \t\t\tif(orderDTO!=null)orderDTO.setCssStyle("""");\n    \t\t\tOrdersDTO orderPageSelected=listIndexSet.get(indexList);\n    \t\t\torderPageSelected.setCssStyle(""background-color:#FFFF99;border:1px solid #CCCCCC;"");\n    \t\t\tindexSet=orderPageSelected.getIndex()-1;\n    \t\t\tindexSet=indexSet*PAGE_ITEMS_COUNT;\n    \t\t\tsession.setAttribute(""indexSet"",indexSet);\n    \t\t\tsession.setAttribute(""listIndexSet"",listIndexSet);\n    \t\t\tsession.setAttribute(""orderPageSelected"",orderPageSelected);\n    \t\t}\n\n\t\t\t/*----------------- When Admin Click on the nextListPages ------------------------------\n\t\t\t\t\t\trecreate listIndexSet started with index>index+10 and indexSet>indexSet+10\n\t\t\t ---------------------------------------------------------------------------------------*/\n    \t\tif(nextListPagesSignal!=null && nextListPagesSignal!=0L && listIndexSet.size()>0){\n    \t\t\tOrdersDTO orderDTOPrevious=(OrdersDTO)session.getAttribute(""orderPageSelected"");\n    \t\t\tif(orderDTOPrevious!=null)orderDTOPrevious.setCssStyle("""");\n    \t\t\tOrdersDTO orderDTO=listIndexSet.get(listIndexSet.size()-1);\n    \t\t\tif(orderDTO!=null)nextListPages=orderDTO.getIndex()+1;\n    \t\t\tLong totalOrders=orderService.getCountOrders(creationDateStartArg, creationDateEndArg,reportDateBetween, userLogin, lsOrderId, status);\n    \t\t\tString strcount=totalOrders.toString();\n    \t\t\tInteger sizeList=Integer.parseInt(strcount) / PAGE_ITEMS_COUNT;\n    \t\t\tif(nextListPages<=sizeList+1){\n        \t\t\tlistIndexSet=new ArrayList<OrdersDTO>();\n        \t\t\tfor(int i=nextListPages;i<=sizeList+1 && i<=nextListPages+10;i++){\n        \t\t\t\tOrdersDTO ord=new OrdersDTO();\n        \t\t\t\tord.setCssStyle("""");\n        \t\t\t\tord.setIndex(i);\n        \t\t\t\tlistIndexSet.add(ord);\n        \t\t\t}\n        \t\t\tif(nextListPages<=sizeList+1){\n        \t\t\t\tindexSet=nextListPages-1;\n            \t\t\tOrdersDTO orderPageSelected=listIndexSet.get(0);\n            \t\t\torderPageSelected.setCssStyle(""background-color:#FFFF99;border:1px solid #CCCCCC;"");\n            \t\t\tindexSet=indexSet*PAGE_ITEMS_COUNT;\n            \t\t\tsession.setAttribute(""indexSet"",indexSet);\n            \t\t\tsession.setAttribute(""nextListPages"",nextListPages);\n            \t\t\tsession.setAttribute(""listIndexSet"",listIndexSet);\n            \t\t\tsession.setAttribute(""orderPageSelected"",orderPageSelected);\n        \t\t\t}\n    \t\t\t}\n    \t\t}\n\n\t\t\t/*----------------- When Admin Click on the previousListPages --------------------------\n\t\t\t\t\trecreate listIndexSet started with index< index-10 and indexSet<indexSet-10\n\t\t\t ---------------------------------------------------------------------------------------*/\n    \t\tif(prevListPagesSignal!=null && prevListPagesSignal!=0L && listIndexSet.size()>0){\n    \t\t\tOrdersDTO orderDTOPrevious=(OrdersDTO)session.getAttribute(""orderPageSelected"");\n    \t\t\tif(orderDTOPrevious!=null)orderDTOPrevious.setCssStyle("""");\n    \t\t\tnextListPages=(Integer)session.getAttribute(""nextListPages"");\n    \t\t\tif(nextListPages!=null && nextListPages>=11){\n    \t\t\t\tprevListPages=nextListPages-11;\n    \t\t\t\tlistIndexSet=new ArrayList<OrdersDTO>();\n        \t\t\tfor(int i=prevListPages;i<nextListPages;i++){\n        \t\t\t\tOrdersDTO ord=new OrdersDTO();\n        \t\t\t\tord.setCssStyle("""");\n        \t\t\t\tord.setIndex(i);\n        \t\t\t\tlistIndexSet.add(ord);\n        \t\t\t}\n         \t\t\tindexSet=prevListPages-1;\n            \t\tOrdersDTO orderPageSelected=listIndexSet.get(0);\n            \t\torderPageSelected.setCssStyle(""background-color:#FFFF99;border:1px solid #CCCCCC;"");\n            \t\tindexSet=indexSet*PAGE_ITEMS_COUNT;\n            \t\tnextListPages=prevListPages;\n            \t\tsession.setAttribute(""nextListPages"",nextListPages);\n            \t\tsession.setAttribute(""indexSet"",indexSet);\n            \t\tsession.setAttribute(""listIndexSet"",listIndexSet);\n            \t\tsession.setAttribute(""orderPageSelected"",orderPageSelected);\n    \t \t\t}\n    \t\t}\n \n\t\t\t/*----------------- When Admin change province -----------------------------------------\n\t\t\t\t\t\t\t\tCheck a list off this province\n\t\t\t ---------------------------------------------------------------------------------------*/\n\t\t\t\thashProvinces=(Hashtable<String, ProvinceDTO>)session.getAttribute(""hashProvinces"");\n\t\t\t\tif(hashProvinces==null){\n\t\t\t\t\tlistProvinces=productService.getAllProvinces();\n\t\t\t\t\tHashtable<String, ProvinceDTO> hashProvinces=new Hashtable<String, ProvinceDTO>();\n\t\t\t\t\tfor(ProvinceDTO prov:listProvinces){\n\t\t\t\t\t\thashProvinces.put(prov.getCode(), prov);\n\t\t\t\t\t}\n\t\t\t\t\tsession.setAttribute(""hashProvinces"",hashProvinces);\n\t\t\t\t}\n\t\t\t\tif(code!=null && !code.equals("""")&& listOrdersDTO!=null){\n\t\t\t\t\tProvinceDTO provinceDTO=hashProvinces.get(code);\n\t\t\t\t\tif(provinceDTO!=null){\n\t\t\t\t\t\tclientProvince=provinceDTO.getCode();\n\t\t\t\t\t}\n\t\t\t\t}//else listCities=new ArrayList<CityDTO>();\n\t\t\t\tif(listOrdersDTO!=null && indexOrder!=-1){\n\t\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\t\tif(orderToEdit!=null){\n\t\t\t\t\t\torderToEdit.setClientProvince(code);\n\t\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/*------------------------------- Refresh listOrdersDTO------------------------------------\n\t\t\t\t\t\tRefresh listOrders before generation of invoiced orders XLS file \n\t\t\t\t ------------------------------------------------------------------------------------------*/\n\t\t\t\tinvoicedOrdersRefresh=(Long)session.getAttribute(""invoicedOrdersRefresh"");\n\t\t\t\tif(invoicedOrdersRefresh!=null && invoicedOrdersRefresh!=0L){\n\t\t\t\t\tlistIndexColumn=new ArrayList<Integer>();\n\t\t\t\t\tfor(int i=0;i<=34;i++){\n\t\t\t\t\t\tif(i!=2 && i<=13){\n\t\t\t\t\t\t\tlistIndexColumn.add(i);\n\t\t\t\t\t\t\tif(i!=0)listIndexColumn.add(-i);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(i==30 || i==31 || i==34){\n\t\t\t\t\t\t\tlistIndexColumn.add(i);\n\t\t\t\t\t\t\tlistIndexColumn.add(-i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlsOrderId=lsOrderId.toUpperCase();\n\t\t\t\t\tlistOrdersDTO=orderService.searchOrdersWithOptionsAndSorting(creationDateStartArg, creationDateEndArg,reportDateBetween,userLogin, lsOrderId, status, listIndexColumn,PAGE_ITEMS_COUNT,indexSet);\n\t\t\t\t\tif(findOrdersSignal!=null && findOrdersSignal!=0L)initalizeListIndexSet(session,orderService );\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\tsession.setAttribute(""invoicedOrdersRefresh"",0L);\n\t\t\t\t\treturn SUCCESS;\n\t\t\t\t}\t\n\n\t\t\t\t\n\t\t\t/*------------ When Admin click on the Button ""Delete Order"" in The OrderDtailPop --------------\n\t\t\t\t\t\t\t\tshow other pop to confirm Order Delete\n\t\t\t  ----------------------------------------------------------------------------------------------*/\n\t\t\t\tif(deleteOrderSignal!=null && deleteOrderSignal!=0L){\n\t\t\t\t\tmessage=""Attention! if you click on \\""Delete Order\\"" you can not restore it."";\n\t\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\t\tif(confirmDeleteSignal!=null && confirmDeleteSignal==0L){ //Delete Order Request \n\t\t\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\t\t\tshowConfirmDeleteOrderPop=""display:block;visibility:visible;"";\n\t\t\t\t\t}else if(confirmDeleteSignal==1L){\t\t\t\t\t\t //Delete Order Confirmed\n\t\t\t\t\t\torderService.deleteOrderByLsOrderId(orderToEdit);\n\t\t\t\t\t\t//Save this operation in table operation\n\t\t\t\t\t\tOperationsDTO operationDTO=new OperationsDTO();\n\t\t\t\t\t\tUser userAdmin=(User)session.getAttribute(""userAdmin"");\n\t\t\t\t\t\tif(userAdmin!=null)operationDTO.setUserId(userAdmin.getId());\n\t\t\t\t\t\toperationDTO.setOperationDate(new Date());\n\t\t\t\t\t\toperationDTO.setOperationType(""Delete Order"");\n\t\t\t\t\t\tString dataBefore=""[PARTNER NAME:""+orderToEdit.getUserLogin()+""];"";\n\t\t\t\t\t\tdataBefore+="" [LS_ORDER_ID:""+orderToEdit.getLsOrderId()+""];"";\n\t\t\t\t\t\tdataBefore+="" [PRODUCT_ORDER_NUMBER:""+orderToEdit.getProductOrderNumber()+""];"";\n\t\t\t\t\t\tdataBefore+="" [CLIENT_FIRST_NAME:""+orderToEdit.getClientFirstName()+""];"";\n\t\t\t\t\t\tdataBefore+="" [CLIENT_LAST_NAME:""+orderToEdit.getClientLastName()+""];"";\n\t\t\t\t\t\tdataBefore+="" [CLIENT_POSTAL_CODE:""+orderToEdit.getClientPostalCode()+""];"";\n\t\t\t\t\t\tdataBefore+="" [LS_PRODUCT_ID:""+orderToEdit.getLsProductID()+""];"";\n\t\t\t\t\t\tdataBefore+="" [UNIT_PRICE:""+orderToEdit.getUnitPrice()+""];"";\n\t\t\t\t\t\tdataBefore+="" [STATUS:""+orderToEdit.getStatus()+""];"";\n\t\t\t\t\t\toperationDTO.setDataBefore(dataBefore);\n\t\t\t\t\t\toperationDTO.setDataBefore(operationDTO.getDataBefore());\n\t\t\t\t\t\toperationDTO.setDataAfter("""");\n\t\t\t\t\t\toperationsService.insertOperation(operationDTO);\n\t\t\t\t\t\t//Remove order from the list orders\n\t\t\t\t\t\tlistOrdersDTO.remove(orderToEdit);\n\t\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\t\tshowOrderDetailPop=""visibility:hidden;display:none;"";\n\t\t\t\t\t\tshowConfirmDeleteOrderPop=""visibility:hidden;display:none;"";\n\t\t\t\t\t\t//initialize index orders\n\t\t\t\t\t\tint indexOrder=0;\n\t\t\t\t\t\tint indexRow=0;\n\t\t\t\t\t\tfor(OrdersDTO orderDTO:listOrdersDTO){\n\t\t\t\t\t\t\torderDTO.setIndex(indexOrder);\n\t\t\t\t\t\t\tindexOrder++;\n\t\t\t\t\t\t\tindexRow=0;\n\t\t\t\t\t\t\tfor(OrdersRows orderRows:orderDTO.getRowsList()){\n\t\t\t\t\t\t\t\torderRows.setIndex(indexRow);\n\t\t\t\t\t\t\t\tindexRow++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\t}else{\t\t\t\t\t\t\t\t\t\t\t\t\t//Cancel Order Delete\n\t\t\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\t\t\tshowConfirmDeleteOrderPop=""visibility:hidden;display:none;"";\n\t\t\t\t\t}\n\n\t\t\t\t\treturn SUCCESS;\n\t\t\t\t}\n\n\n\t\t//#################################################################################################\t\t\n\t\t\t\t/*------------ When Admin click on the Button ""Delete Order"" in The OrderDtailPop --------------\n\t\t\t\t\t\t\t\t\tshow other pop to confirm Order Delete\n\t\t\t\t  ----------------------------------------------------------------------------------------------*/\n\t\t\t\t\tif(cancelOrderSignal!=null && cancelOrderSignal!=0L){\n\t\t\t\t\t\tmessage=""Attention! if you click on \\""Delete Order\\"" you can not restore it."";\n\t\t\t\t\t\tSystem.out.println(""strPrint:""+strPrint);\n\t\t\t\t\t\tList<OrdersDTO>listOrdersToCanceled=null;\n\t\t\t\t\t\tlistOrdersToCanceled=getOrdersToCancel(strPrint);\n\t\t\t\t\t\tfor(OrdersDTO ord:listOrdersToCanceled){\n\t\t\t\t\t\t\tSystem.out.println(""Order:""+ord.getLsOrderId());\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/*orderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\t\t\tif(confirmDeleteSignal!=null && confirmDeleteSignal==0L){ //Delete Order Request \n\t\t\t\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\t\t\t\tshowConfirmDeleteOrderPop=""display:block;visibility:visible;"";\n\t\t\t\t\t\t}else if(confirmDeleteSignal==1L){\t\t\t\t\t\t //Delete Order Confirmed\n\t\t\t\t\t\t\torderService.deleteOrderByLsOrderId(orderToEdit);\n\t\t\t\t\t\t\t//Save this operation in table operation\n\t\t\t\t\t\t\tOperationsDTO operationDTO=new OperationsDTO();\n\t\t\t\t\t\t\tUser userAdmin=(User)session.getAttribute(""userAdmin"");\n\t\t\t\t\t\t\tif(userAdmin!=null)operationDTO.setUserId(userAdmin.getId());\n\t\t\t\t\t\t\toperationDTO.setOperationDate(new Date());\n\t\t\t\t\t\t\toperationDTO.setOperationType(""Delete Order"");\n\t\t\t\t\t\t\tString dataBefore=""[PARTNER NAME:""+orderToEdit.getUserLogin()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [LS_ORDER_ID:""+orderToEdit.getLsOrderId()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [PRODUCT_ORDER_NUMBER:""+orderToEdit.getProductOrderNumber()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [CLIENT_FIRST_NAME:""+orderToEdit.getClientFirstName()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [CLIENT_LAST_NAME:""+orderToEdit.getClientLastName()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [CLIENT_POSTAL_CODE:""+orderToEdit.getClientPostalCode()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [LS_PRODUCT_ID:""+orderToEdit.getLsProductID()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [UNIT_PRICE:""+orderToEdit.getUnitPrice()+""];"";\n\t\t\t\t\t\t\tdataBefore+="" [STATUS:""+orderToEdit.getStatus()+""];"";\n\t\t\t\t\t\t\toperationDTO.setDataBefore(dataBefore);\n\t\t\t\t\t\t\toperationDTO.setDataBefore(operationDTO.getDataBefore());\n\t\t\t\t\t\t\toperationDTO.setDataAfter("""");\n\t\t\t\t\t\t\toperationsService.insertOperation(operationDTO);\n\t\t\t\t\t\t\t//Remove order from the list orders\n\t\t\t\t\t\t\tlistOrdersDTO.remove(orderToEdit);\n\t\t\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\t\t\tshowOrderDetailPop=""visibility:hidden;display:none;"";\n\t\t\t\t\t\t\tshowConfirmDeleteOrderPop=""visibility:hidden;display:none;"";\n\t\t\t\t\t\t\t//initialize index orders\n\t\t\t\t\t\t\tint indexOrder=0;\n\t\t\t\t\t\t\tint indexRow=0;\n\t\t\t\t\t\t\tfor(OrdersDTO orderDTO:listOrdersDTO){\n\t\t\t\t\t\t\t\torderDTO.setIndex(indexOrder);\n\t\t\t\t\t\t\t\tindexOrder++;\n\t\t\t\t\t\t\t\tindexRow=0;\n\t\t\t\t\t\t\t\tfor(OrdersRows orderRows:orderDTO.getRowsList()){\n\t\t\t\t\t\t\t\t\torderRows.setIndex(indexRow);\n\t\t\t\t\t\t\t\t\tindexRow++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\t\t}else{\t\t\t\t\t\t\t\t\t\t\t\t\t//Cancel Order Delete\n\t\t\t\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\t\t\t\tshowConfirmDeleteOrderPop=""visibility:hidden;display:none;"";\n\t\t\t\t\t\t}*/\n\n\t\t\t\t\t\treturn SUCCESS;\n\t\t\t\t\t}\n\n\t\t//#############################################################################################\t\t\t\n\t\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t/*------ When Admin click the ""Edit link"" in the Order Table for Edit NOTE -----\n\t\t\t\t\t\t\tshow only field Edit Note\n\t\t\t  ------------------------------------------------------------------------------*/\n\t\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && showOnlyEditNote!=null && showOnlyEditNote!=0L){\n\t\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\t\tfor(OrdersDTO order:listOrdersDTO){\n\t\t\t\t\t\torder.setShowOnlyEditNote(0L);\n\t\t\t\t\t\torder.setCssRow("""");\n\t\t\t\t\t}\n\t\t\t\torderToEdit.setShowOnlyEditNote(1L);\n\t\t\t\torderToEdit.setCssRow(""background-color:#FF9966;"");\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\tlistOrdersDTO=(ArrayList<OrdersDTO>) session.getAttribute(""listOrdersDTOReport"");\t\n\t\t\t\treturn SUCCESS;\n\t\t\t\t}\n\n\t\t\t\t/*------------ When Admin click on link ""Save Edit Note in the Orders Table"" ----------\n\t\t\t\t\t\t\t\t\t\t\t\t\tsave Only  notes\n\t\t\t\t  -------------------------------------------------------------------------------------*/\n\t\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && saveOnlyNoteSignal!=null && saveOnlyNoteSignal!=0L){\n\t\t\t\tif(indexOrder!=null){\n\t\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\t\tif(orderToEdit!=null){\n\t\t\t\t\t\torderToEdit.setNotes(notes);\n\t\t\t\t\t\torderToEdit.setShowRowShipping(0L);\n\t\t\t\t\t\torderToEdit.setShowOnlyEditNote(0L);\n\t\t\t\t\t\torderToEdit.setCssRow("""");\n\t\t\t\t\t\t//Save Note\n\t\t\t\t\t\tBoolean sucess=orderService.updateShippingOrderElements(orderToEdit);\n\t\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn SUCCESS;\n\t\t\t\t}\n\n\t\t\t/*------------ When Admin click the ""Edit link"" in the Order Table -------------\n\t\t\t\t\t\t\t\tshow fields to edit shipping parameters\n\t\t\t  ------------------------------------------------------------------------------*/\t\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && showRowShipping!=null && showRowShipping!=0L){\n\n\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\tfor(OrdersDTO order:listOrdersDTO){\n\t\t\t\t\torder.setShowRowShipping(0L);\n\t\t\t\t\torder.setCssRow("""");\n\t\t\t\t}\t\t\t\n\t\t\t\t //only Admins who has Active = true of action name='All' can change shipping settings \n\t\t\t\t //of orders shipped or invoiced\n\t\t\t\tif(usersPrivChangeShippedStatus==null && orderToEdit.getStatus()!=null &&\n\t\t\t\t   (orderToEdit.getStatus().equals(""shipped"")||orderToEdit.getStatus().equals(""invoiced""))){\n\t\t\t\t\tshowRowShipping=0L;\n\t\t\t\t\treturn SUCCESS;\n\t\t\t\t}\n\n\t\t\t\tif(orderToEdit!=null){\n\t\t\t\t\torderToEdit.setShowRowShipping(1L);\n\t\t\t\t\torderToEdit.setShowOnlyEditNote(1L);\n\t\t\t\t\torderToEdit.setCssRow(""background-color:#FF9966;"");\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\tlistOrdersDTO=(ArrayList<OrdersDTO>) session.getAttribute(""listOrdersDTOReport"");\n\t\t\t\t}\n\t\t\t\tif(orderToEdit.getStatus().equals(""open"")){\n\t\t\t\t\tstatusId=0L;\n\t\t\t\t}else if(orderToEdit.getStatus().equals(""progress"")){\n\t\t\t\t\tstatusId=1L;\n\t\t\t\t}else if(orderToEdit.getStatus().equals(""shipped"")){\n\t\t\t\t\tstatusId=2L;\n\t\t\t\t}else if(orderToEdit.getStatus().equals(""invoiced"")){\n\t\t\t\t\tstatusId=3L;\n\t\t\t\t}\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n    \t\t\n\t\t\t/*------------ When Admin click on link ""Save in the Orders Table"" ----------\n\t\t\t\t\t\t\tsave all shipping parameters and notes\n\t\t\t ----------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && saveShippingSignal!=null && saveShippingSignal!=0L){\n\t\t\t\tif(indexOrder!=null){\n\t\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\t\tif(orderToEdit!=null){\n\t\t\t\t\t\tDate shippedDateToEdit=null;\n\t\t\t\t\t\tfrm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\t\t\t\tif (((strShippedDate)!=null)&&(!"""".equals(strShippedDate))){\n\t\t\t\t\t\t\tstrShippedDate=strShippedDate.replaceAll("" "", """");\n\t\t\t    \t\t\ttry {\n\t\t\t    \t\t\t\tDate date = frm.parse(strShippedDate);\n\t\t\t    \t\t\t\tshippedDateToEdit=date;\n\t\t\t    \t\t\t}\n\t\t\t    \t\t\tcatch (Exception pe) {\n\t\t\t    \t\t\t\tshippedDateToEdit=null;\n\t\t\t    \t\t\t}\n\t\t\t    \t\t}\n\t\t\t\t\t\tif (((strShippedDate)!=null)&&(!"""".equals(strShippedDate))&& strShippedDate.length()<=8)shippedDateToEdit=orderToEdit.getShippedDate();\n\t\t\t\t\t\tDouble shippingPrice=null;\n\t   \t\t\t\t\tif(strShippingPrice!=null && !strShippingPrice.equals("""")){\n\t   \t\t\t\t\t\tstrShippingPrice=strShippingPrice.replaceAll("" "", """");\n    \t\t\t\t\t\tint index=strShippingPrice.indexOf("","");\n    \t\t\t\t\t\tif(index>=0){\n    \t\t\t\t\t\t\tString strUnitPrice1=strShippingPrice.substring(0, index);\n    \t\t\t\t\t\t\tString strUnitPrice2= strShippingPrice.substring(index+1, strShippingPrice.length());\n    \t\t\t\t\t\t\tstrShippingPrice=strUnitPrice1+"".""+strUnitPrice2;\n    \t\t\t\t\t\t}\n                          \t\n                          \ttry {\n                          \t\tshippingPrice = Double.parseDouble(strShippingPrice);\n                          \t}\n                          \tcatch (Exception pe) {\n                          \t\tshippingPrice=null;\n                          \t}\n    \t\t\t\t\t}\n\n                      \tif(trackingNumber!=null)trackingNumber=trackingNumber.replaceAll(""^ +| +$|( )+"", ""$1"");\n                      \tif(shippingCompany!=null)shippingCompany=shippingCompany.replaceAll(""^ +| +$|( )+"", ""$1"");\n\t\t\t\t\t\torderToEdit.setShippingPrice(shippingPrice);\n\t\t\t\t\t\torderToEdit.setShippedDate(shippedDateToEdit);\n\t\t\t\t\t\torderToEdit.setNotes(notes);\n\t\t\t\t\t\tif(newStatus!=null && !newStatus.equals(""""))orderToEdit.setStatus(newStatus);\n\t\t\t\t\t\torderToEdit.setShippingCompany(shippingCompany);\n\t\t\t\t\t\torderToEdit.setTrackingNumber(trackingNumber);\n\t\t\t\t\t\torderToEdit.setShowRowShipping(0L);\n\t\t\t\t\t\torderToEdit.setShowOnlyEditNote(0L);\n\t\t\t\t\t\tOrdersRows row=orderToEdit.getRowsList().get(0);\n\t\t\t\t\t\trow.setShippingPrice(shippingPrice);\n\t\t\t\t\t\trow.setShippingCompany(shippingCompany);\n\t\t\t\t\t\trow.setTrackingNumber(trackingNumber);\n\t\t\t\t\t\torderToEdit.setCssRow("""");\n  \n\t\t\t\t\t\tif(newStatus!=null && !newStatus.equals("""")){ // if admin click on the save behind status\n\t\t\t\t\t\t\torderService.updateStatusByLsOrderId(orderToEdit.getLsOrderId(), newStatus);\n\t\t\t\t\t\t\torderToEdit.setStatus(newStatus);\n\t\t\t\t\t\t\tif(!newStatus.equals(""shipped"")&& !newStatus.equals(""invoiced"")){\n\t\t\t\t\t\t\t\torderToEdit.setShippingPrice(null);\n\t\t\t\t\t\t\t\torderToEdit.setTrackingNumber(null);\n\t\t\t\t\t\t\t\torderToEdit.setShippedDate(null);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}else{// if admin click on the save other than Status\n\t\t\t\t\t\t\tif(orderToEdit.getShippedDate()!=null && \n\t\t\t\t\t\t\t\t   orderToEdit.getTrackingNumber()!=null && !orderToEdit.getTrackingNumber().equals("""")&&\n\t\t\t\t\t\t\t\t   orderToEdit.getShippingCompany()!=null && !orderToEdit.getShippingCompany().equals("""")&&\n\t\t\t\t\t\t\t\t   orderToEdit.getShippingPrice()!=null && orderToEdit.getStatus()!=null){\n\t\t\t\t\t\t\t\t   if(orderToEdit.getStatus().equals(""open"")||\n\t\t\t\t\t\t\t\t\t   orderToEdit.getStatus().equals(""progress"")){\n\t\t\t\t\t\t\t\t\t   orderService.updateStatusByLsOrderId(orderToEdit.getLsOrderId(), ""shipped"");\n\t\t\t\t\t\t\t\t\t   orderToEdit.setStatus(""shipped"");   \n\t\t\t\t\t\t\t\t   }\n\t\t\t\t\t\t\t}else{\t\t\t\t\t\t\t   \n\t\t\t\t\t\t\t\t   if(usersPrivChangeShippedStatus!=null && !orderToEdit.getStatus().equals(""open"") && \n\t\t\t\t\t\t\t\t\t\t!orderToEdit.getStatus().equals(""progress"")){\n\t\t\t\t\t\t\t\t\t\t orderService.updateStatusByLsOrderId(orderToEdit.getLsOrderId(), ""progress"");\n\t\t\t\t\t\t\t\t\t\t orderToEdit.setStatus(""progress"");\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// if admin click on the save other then status(save notes, save shipping company ...)\n\t\t\t\t\t\tBoolean sucess=orderService.updateShippingOrderElements(orderToEdit);\n\t\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*------------ When Admin click on icon findOrders.png ----------\n\t\t\t\t\t\t\t\tcheck user and complete infos client\n\t\t\t ----------------------------------------------------------------*/\n\t\t\tif(findOrdersSignal!=null && findOrdersSignal!=0L||\n\t\t\t\t\t(pageIndexSignal!=null && pageIndexSignal!=0L) ||\n\t\t\t\t\t(nextListPagesSignal!=null && nextListPagesSignal!=0L)||\n\t\t\t\t\t(prevListPagesSignal!=null && prevListPagesSignal!=0L)){\t\n\t\t\t\tlistIndexColumn=new ArrayList<Integer>();\n\t\t\t\tfor(int i=0;i<=34;i++){\n\t\t\t\t\tif(i!=2 && i<=13){\n\t\t\t\t\t\tlistIndexColumn.add(i);\n\t\t\t\t\t\tif(i!=0)listIndexColumn.add(-i);\n\t\t\t\t\t}\n\t\t\t\t\tif(i==30 || i==31 || i==34){\n\t\t\t\t\t\tlistIndexColumn.add(i);\n\t\t\t\t\t\tlistIndexColumn.add(-i);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlsOrderId=lsOrderId.toUpperCase();\n\t\t\t\t//if(findOrdersSignal!=null && findOrdersSignal!=0L)initalizeListIndexSet(session,orderService );\n\t\t\t\t\n\t\t\t\tlistOrdersDTO=orderService.searchOrdersWithOptionsAndSorting(creationDateStartArg, creationDateEndArg,reportDateBetween,userLogin, lsOrderId, status, listIndexColumn,PAGE_ITEMS_COUNT,indexSet);\n\t\t\t\t\n\t\t\t\tsession.setAttribute(""listIndexColumn"",listIndexColumn);\n\t\t\t\tsession.setAttribute(""sizeResult"",sizeResult);\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\tif(findOrdersSignal!=null && findOrdersSignal!=0L)initalizeListIndexSet(session,orderService );\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*------------ When Admin click on the icon sorting of column ----------\n\t\t\t\t\t\t\tseach result with option of sorting list\n\t\t\t -----------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && sortingOrdersSignal!=null && sortingOrdersSignal!=0L){\t\n\t\t\t\tlistIndexColumn=(List<Integer>)session.getAttribute(""listIndexColumn"");\n\t\t\t\tasc=(asc==1?-1:1);\n\t\t\t\tint nextElement=listIndexColumn.get(0);\n\t\t\t\tfieldForSorting=asc*fieldForSorting;\n\t\t\t\tlistIndexColumn.set(0,fieldForSorting);\n\t\t\t\tfor(int i=1;i<listIndexColumn.size();i++){\n\t\t\t\t\tint element=listIndexColumn.get(i);\n\t\t\t\t\tlistIndexColumn.set(i,nextElement);\n\t\t\t\t\tnextElement=element;\n\t\t\t\t}\t\n\t\t\t\tlistOrdersDTO=orderService.searchOrdersWithOptionsAndSorting(creationDateStartArg, creationDateEndArg,reportDateBetween,userLogin, lsOrderId, status, listIndexColumn,PAGE_ITEMS_COUNT,indexSet);\n\t\t\t\tint balance=0;\n\t\t\t\tint OrderIndex=0;\n\t\t\t\tfor(OrdersDTO orDTO: listOrdersDTO){\n\t\t\t\t\tbalance=(balance==1?0:1);\n\t\t\t\t\tif(balance==1){\n\t\t\t\t\t\torDTO.setCssStyle(""background-color: rgb(245,249,252);border-right: 1px solid #CCCCCC;border-left:1px solid #CCCCCC;border-top:  1px solid #CCCCCC;"");\n\t\t\t\t\t}else{\n\t\t\t\t\t\torDTO.setCssStyle(""background-color: color:white;border-right:1px solid #CCCCCC;border-left:1px solid #CCCCCC;border-top:1px solid #CCCCCC;"");\n\t\t\t\t\t}\n\t\t\t\t\torDTO.setIndex(OrderIndex); \n\t\t\t\t\tOrderIndex++;\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""listIndexColumn"",listIndexColumn);\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\tsession.setAttribute(""asc"", asc);\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*------ when Admin click on the lsOrder link in table -----------\n\t\t\t\t\tshow popup detail and allow admin to update Order\n\t\t\t  ---------------------------------------------------------------*/\n\t\t\tif (listOrdersDTO!=null && listOrdersDTO.size()>0 && editOrderSignal!=null && editOrderSignal!=0L){\n\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\tif(orderToEdit==null)orderToEdit=new OrdersDTO();\n\t\t\t\tif(orderToEdit.getProductOrderDate()==null)strProductOrderDate="""";\n\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*--- when Admin click on the cancel Button of orderDetailPop ---\n\t\t\t\t\twe mast just hide popup OrderDetail\n\t\t\t  ---------------------------------------------------------------*/\n    \t\tif (listOrdersDTO!=null && listOrdersDTO.size()>0 && cancelSignal!=null && cancelSignal!=0L){\n\t\t\t\tshowOrderDetailPop=""visibility:hidden;display:none;"";\n    \t\t\treturn SUCCESS;\n    \t\t}\n\n\t\t\t/*-------------------- When Admin left lsProduct TextField -------------\n\t\t\t\t\t\t\t\tcheck userPrice in DB, and write it in web view\n\t\t\t -----------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && checkProductPriceSignal!=null && checkProductPriceSignal!=0L){\n\t\t\t\tOrdersDTO orderDTOToUpdate=listOrdersDTO.get(indexOrder);\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\tOrdersRows orderRowToUpadate=orderDTOToUpdate.getRowsList().get(indexRow);\n\t\t\t\tUserProductPriceDTO userProductPrice=productService.getUsrPPriceByLsproductId(userId, lsProductID);\n\t\t\t\torderRowToUpadate.setCss("""");\n\t\t\t\torderRowToUpadate.setCssPrice("""");\n\t\t\t\tif(userProductPrice==null){\n\t\t\t\t\torderRowToUpadate.setCss(""background-color:red;"");\n\t\t\t\t\torderRowToUpadate.setProductDescription(""""); \n\t\t\t\t\torderRowToUpadate.setStock(null);\n\t\t\t\t\torderRowToUpadate.setProductId(null);\n\t\t\t\t\torderRowToUpadate.setLsProductID(lsProductID);\n\t\t\t\t\torderRowToUpadate.setLsPrice(null);\n\t\t\t\t}else{\n\t\t\t\t\tDouble usrPrice=orderRowToUpadate.getUnitPrice();\n\t\t\t\t\tif(usrPrice==null)usrPrice=0D;\n\t\t\t\t\tif(usrPrice < userProductPrice.getPriceNum()){\n\t\t\t\t\t\torderRowToUpadate.setCssPrice(""background-color:red;"");\t\n\t\t\t\t\t}\n\t\t\t\t\torderRowToUpadate.setProductDescription(userProductPrice.getProductTitle());\n\t\t\t\t\torderRowToUpadate.setStock(userProductPrice.getStock());\n\t\t\t\t\torderRowToUpadate.setProductId(userProductPrice.getProductId());\n\t\t\t\t\torderRowToUpadate.setLsProductID(userProductPrice.getLsProductId());\n\t\t\t\t\torderRowToUpadate.setLsPrice(userProductPrice.getPriceNum());\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\torderToEdit=orderDTOToUpdate;\n\t\t\t\tlistOrdersDTO=(List<OrdersDTO>)session.getAttribute(""listOrdersDTOReport"");\n\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*----------------- When Admin check on saveTemporaryRow Icon --------------------------\n\t\t\t\t\twe must first obtained the object that contains the list of rows,\n\t\t\t\t\tafter we accede to the row by index recovered by web view and change it\n\t\t\t ---------------------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && saveTemporaryRowSignal!=null && saveTemporaryRowSignal!=0L){\n\t\t\t\tOrdersDTO orderDTOToUpdate=listOrdersDTO.get(indexOrder);\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\tOrdersRows orderRowToSaveMemory=orderDTOToUpdate.getRowsList().get(indexRow);\n\t\t\t\torderRowToSaveMemory.setIcon(""images/orders/itemValidated.png"");\n\t\t\t\tif(orderRowToSaveMemory!=null){\n\t\t\t\t\torderRowToSaveMemory.setQuantity(quantity); \n\t\t\t\t\torderRowToSaveMemory.setLsProductID(lsProductID);\n\t\t\t\t\torderRowToSaveMemory.setProductDescription(productDescription);\n\t\t\t\t\torderRowToSaveMemory.setUnitPrice(unitPrice);\n\t\t\t\t\torderRowToSaveMemory.setCssPrice(""background-color:#FF6666;"");\n\t\t\t\t\torderRowToSaveMemory.setCssQuantity(""background-color:#FF6666;"");\n\t\t\t\t\tif(quantity!=null && quantity>0D)orderRowToSaveMemory.setCssQuantity("""");\n\t\t\t\t\tif(unitPrice!=null && orderRowToSaveMemory.getLsPrice()!=null\n\t\t\t\t\t  && unitPrice>=orderRowToSaveMemory.getLsPrice())\n\t\t\t\t\t  orderRowToSaveMemory.setCssPrice("""");\n\t\t\t\t\torderRowToSaveMemory.setShippingFee(shippingFee);\n\t\t\t\t\torderRowToSaveMemory.setShippingCompany(shippingCompany);\n\t\t\t\t\torderRowToSaveMemory.setTrackingNumber(trackingNumber);\t\n\t\t\t\t\tint indexOrder=0;\n\t\t\t\t\tint indexRow=0;\n\t\t\t\t\tfor(OrdersDTO orderDTO:listOrdersDTO){\n\t\t\t\t\t\torderDTO.setIndex(indexOrder);\n\t\t\t\t\t\tindexOrder++;\n\t\t\t\t\t\tindexRow=0;\n\t\t\t\t\t\tfor(OrdersRows orderRows:orderDTO.getRowsList()){\n\t\t\t\t\t\t\torderRows.setIndex(indexRow);\n\t\t\t\t\t\t\tindexRow++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\tlistOrdersDTO=(List<OrdersDTO>)session.getAttribute(""listOrdersDTOReport"");\n\t\t\t\t}\n\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*------- When Admin click on addSimilarRow Icon on the OrderDetailPop --------\n\t\t\t\t\t\t\t\tAdd one Row Similar at the previews\n\t\t\t  -----------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && addSimilarRowSignal!=null && addSimilarRowSignal!=0L){\n\t\t\t\tOrdersDTO orderDTOToUpdate=listOrdersDTO.get(indexOrder);\n\t\t\t\t//generate lsOrderId to new order\n\t\t\t\torderDTOToUpdate=fillDataOrderDTO(orderDTOToUpdate);\n\t\t\t\tOrdersRows orderRowToClone=orderDTOToUpdate.getRowsList().get(indexRow);\n\t\t\t\tif(orderRowToClone!=null){\n\t\t\t\t\tif(!orderRowToClone.getIcon().equals(""images/orders/itemValidated.png"")){\n\t\t\t\t\t\torderRowToClone.setQuantity(quantity); \n\t\t\t\t\t\torderRowToClone.setLsProductID(lsProductID);\n\t\t\t\t\t\torderRowToClone.setStock(stock);\n\t\t\t\t\t\torderRowToClone.setProductDescription(productDescription);\n\t\t\t\t\t\torderRowToClone.setUnitPrice(unitPrice);\n\t\t\t\t\t\torderRowToClone.setShippingFee(shippingFee);\n\t\t\t\t\t\torderRowToClone.setShippingCompany(shippingCompany);\n\t\t\t\t\t\torderRowToClone.setTrackingNumber(trackingNumber);\n\t\t\t\t\t}\n\t\t\t\t\torderRowToClone.setIcon(""images/orders/itemValidated.png"");\n\t\t\t\t\tOrdersRows orderRowToAdd=DTOFactory.getOrderRowClone(orderRowToClone);\n\t\t\t\t\torderRowToAdd.setId(-1L);\n\t\t\t\t\t\n\t\t\t\t\torderDTOToUpdate.getRowsList().add(indexRow+1,orderRowToAdd);\n\t\t\t\t\tint indexOrder=0;\n\t\t\t\t\tint indexRow=0;\n\t\t\t\t\tfor(OrdersDTO orderDTO:listOrdersDTO){\n\t\t\t\t\t\torderDTO.setIndex(indexOrder);\n\t\t\t\t\t\tindexOrder++;\n\t\t\t\t\t\tindexRow=0;\n\t\t\t\t\t\tfor(OrdersRows orderRows:orderDTO.getRowsList()){\n\t\t\t\t\t\t\torderRows.setIndex(indexRow);\n\t\t\t\t\t\t\tindexRow++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t\tlistOrdersDTO=(List<OrdersDTO>)session.getAttribute(""listOrdersDTOReport"");\n\t\t\t\t}\n\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*-------- When Admin click on Delete Row Icon of orderDetail Popup-----------\n\t\t\t\t\t\t\t\t\tDelete this row using index\n\t\t\t -----------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && deleteRowSignal!=null && deleteRowSignal!=0L){\n\t\t\t\tOrdersDTO orderDTO=listOrdersDTO.get(indexOrder);\n\t\t\t\torderDTO=fillDataOrderDTO(orderDTO);\n\t\t\t\tint nb=orderService.nbOrderRowsNotDeleted(orderDTO.getRowsList());\n\t\t\t\tif(orderDTO!=null && orderDTO.getRowsList().size()>1){\n\t\t\t\t\tfor(int i=0 ;i<orderDTO.getRowsList().size();i++){\n\t\t\t\t\t\tif(i==indexRow && nb>1){\n\t\t\t\t\t\t\torderDTO.getRowsList().get(i).setToDelete(1);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*------ when Admin click on the button save of orderDetail ------------------\n\t\t\t\t\t save order and hide pup  \n\t\t\t  ----------------------------------------------------------------------------*/\n    \t\tif (listOrdersDTO!=null && listOrdersDTO.size()>0 && saveOrdersSignal!=null && saveOrdersSignal!=0L){\n    \t\t\tsession.setAttribute(""orderNotSavedAtFirst"",null);\n\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\torderToEdit=fillDataOrderDTO(orderToEdit);\n\t\t\t\torderService.updateOrderByLsOrderId(orderToEdit);\n\t\t\t\tfor(OrdersRows row:orderToEdit.getRowsList()){\n\t\t\t\t\tif(row.getId()==-1)row.setId(0L);\n\t\t\t\t}\n\t\t\t\tOrdersRows row=orderToEdit.getRowsList().get(0);\n\t\t\t\tif(row!=null){\n\t\t\t\t\torderToEdit.getShippedDate();\n\t\t\t\t\torderToEdit.setLsPrice(row.getLsPrice());\n\t\t\t\t\torderToEdit.setLsProductID(row.getLsProductID());\n\t\t\t\t\torderToEdit.setProductDescription(row.getProductDescription());\n\t\t\t\t\torderToEdit.setQuantity(row.getQuantity());\n\t\t\t\t}\n\t\t\t\torderToEdit=DTOFactory.getOrderDTOConsideredMissingInfo(orderToEdit,hashProvinces);\n\t\t\t\tlistIndexColumn=(List<Integer>)session.getAttribute(""listIndexColumn"");\n\t\t\t\tlistOrdersDTO=orderService.searchOrdersWithOptionsAndSorting(creationDateStartArg, creationDateEndArg,reportDateBetween,userLogin, lsOrderId, status, listIndexColumn,PAGE_ITEMS_COUNT,indexSet);\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\tmessage=""Saving has completed successfuly"";\n\t\t\t\tshowSaveSuccessPop=""display:block;visibility:visible;"";\n\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n    \t\t\treturn SUCCESS;\n    \t\t}\n\n\t\t\t/*------ When user change Quantity to split in orderDetailPop -----------\n\t\t\t\t\t prepare order to split from two other orders witch\n\t\t\t\t \t one must have a lsOrder with underscore \n\t \t\t ------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && quantityToChangeSignal!=null && quantityToChangeSignal!=0L){\n\t\t\t\tOrdersDTO orderToChangeQt=listOrdersDTO.get(indexOrder);\n\t\t\t\tOrdersRows orderRow=orderToChangeQt.getRowsList().get(indexRow);\n\t\t\t\torderToChangeQt=fillDataOrderDTO(orderToChangeQt);\n\t\t\t\tif(quantityToChange<orderRow.getQuantity())orderRow.setQuantityToSplit(quantityToChange);\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\tlistOrdersDTO=(List<OrdersDTO>)session.getAttribute(""listOrdersDTOReport"");\n\t\t\t\torderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*-------------------- Duplicate Order ----------------------------------------\n\t\t\t\t\t\t\tCreate order in just in memory\n\t \t\t -----------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && duplicateOrderSignal!=null && duplicateOrderSignal!=0L){\n\t\t\tOrdersDTO orderToClone=listOrdersDTO.get(indexOrder);\n\t\t\torderToClone=fillDataOrderDTO(orderToClone);\n\t\t\thashOrders=new Hashtable<String, OrdersDTO>();\n\t\t\tfor(OrdersDTO ord:listOrdersDTO){\n\t\t\t\thashOrders.put(ord.getLsOrderId(), ord);\n\t\t\t}\n\t\t\tOrdersDTO orderClone=DTOFactory.getOrderDTOSplitted(orderToClone);\n\t\t\tif(orderClone!=null){\n\t\t\t\torderClone.setDuplicate(true);\n\t\t\t\tString lsOrder=orderClone.getLsOrderId();\n\t\t\t\tString strlsOrder=orderService.generateLsOrderId(lsOrder, hashOrders);\n\t\t\t\torderClone.setLsOrderId(strlsOrder);//rgb(116,180,209)\n\t\t\t\torderClone.setCssStyle(""background-color:#FFFF99;border-right: 1px solid #CCCCCC;border-left:1px solid #CCCCCC;border-top:  1px solid #CCCCCC;"");\n\t\t\t\torderToEdit=orderClone;\n\t\t\t\torderToEdit.setBackgroundColor(""background-color:#FFFF99;"");\n\t\t\t\tlistOrdersDTO.add(indexOrder+1,orderClone);\n\t\t\t\tindexOrder=0;\n\t\t\t\tfor(OrdersDTO ord: listOrdersDTO){\n\t\t\t\t\tord.setIndex(indexOrder);\n\t\t\t\t\tindexOrder++;\n\t\t\t\t}\n\t\t\t\torderService.updateOrderByLsOrderId(orderToClone);\n\t\t\t\torderService.insertOrderWithRows(orderClone);\n\t\t\t\torderClone.setDuplicate(false);\n\t\t\t\tfor(OrdersRows row:orderClone.getRowsList()) {\n\t\t\t\t\tif(row.getId()<0L)row.setId(0L);\n\t\t\t\t}\n\t\t\t\tif(listOrdersDTO.size()>0){\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\t}\n\t\t\t}else orderToEdit=orderToClone;\n\t\t\tshowOrderDetailPop=""display:block;visibility:visible;"";\n\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*-------------------- When user check print item -----------------------------\n\t\t\t\t\tAdd or remove this element from the orders to print\n\t \t\t -----------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && checkBoxPrintSignal!=null && checkBoxPrintSignal!=0L){\n\t\t\t\tOrdersDTO orderDTOInList=listOrdersDTO.get(indexOrder);\n\t\t\t\torderDTOInList.setPrint(checkBoxPrint);\n\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t\t/*-------------------- When user check print item -----------------------------\n\t\t\t\t\tAdd or remove this element from the orders to print\n\t \t\t -----------------------------------------------------------------------------*/\n\t\t\tif(listOrdersDTO!=null && listOrdersDTO.size()>0 && okSaveSuccessPopSignal!=null && okSaveSuccessPopSignal!=0L){\n\t\t\t\tshowSaveSuccessPop=""visibility:hidden;display:none;"";\n\t\t\t\tshowOrderDetailPop=""visibility:hidden;display:none;"";\n\t\t\t\treturn SUCCESS;\n\t\t\t}\n\n\t\t} catch (Exception e) {\n\t\t\te.printStackTrace();\n\t\t\treturn ""input"";\n\t\t}\n\treturn SUCCESS;\n\t}\n\n   /*=========================================================================================\n\t\t\t\t\t\t\tfill all fields of order without rows\n\t =========================================================================================*/\n\tpublic OrdersDTO fillDataOrderDTO(OrdersDTO orderDTO){\n\t\tSimpleDateFormat frm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t//orderToEdit=listOrdersDTO.get(indexOrder);\n\t\t\n\t\torderDTO.setClientLastName(clientLastName);\n\t\torderDTO.setClientFirstName(clientFirstName);\n\t\torderDTO.setClientOtherNames(clientOtherNames); \n\t\torderDTO.setClientStreet(clientStreet);\n\t\torderDTO.setClientOtherStreet(clientOtherStreet);\n\t\torderDTO.setClientCity(clientCity);\n\t\torderDTO.setClientProvince(code);\n\t\torderDTO.setClientPostalCode(clientPostalCode);\n\t\torderDTO.setClientPhone(clientPhone);\n\t\torderDTO.setClientEmail(clientEmail);\t\t\t\n\t\torderDTO.setProductOrderNumber(productOrderNumber);\n\t\torderDTO.setCompanyHeader(companyHeader);\n\n\t\tif (((strProductOrderDate)!=null)&&(!"""".equals(strProductOrderDate))){\n\t\t\tfrm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\ttry {\n\t\t\t\tDate date = frm.parse(strProductOrderDate);\n\t\t\t\torderDTO.setProductOrderDate(date);\n\t\t\t}\n\t\t\tcatch (Exception pe) {\n\t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (((strCreationOrderDate)!=null)&&(!"""".equals(strCreationOrderDate))){\n\t\t\tfrm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\ttry {\n\t\t\t\tDate date = frm.parse(strCreationOrderDate);\n\t\t\t\torderDTO.setCreationDate(date);\n\t\t\t}\n\t\t\tcatch (Exception pe) {\n\t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (((strRequiredDate)!=null)&&(!"""".equals(strRequiredDate))){\n\t\t\tfrm = new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\ttry {\n\t\t\t\tDate date = frm.parse(strRequiredDate);\n\t\t\t\torderDTO.setRequiredDate(date);\n\t\t\t}\n\t\t\tcatch (Exception pe) {\n\t\t\t\taddActionError(""Please enter a date in the correct format"");\n\t\t\t}\n\t\t}\n\t\treturn orderDTO;\n\t}\n\n\n\t/*=========================================================================================\n\t\t\t\t\t\t\t\tinitialize ListIndexSet\n\t  =========================================================================================*/\n\tpublic void initalizeListIndexSet(HttpSession session,OrdersService orderService ) throws ServiceException{\n\t\t\tlistIndexSet=new ArrayList<OrdersDTO>();\n\t\t\ttotalOrders=orderService.getCountOrders(creationDateStartArg, creationDateEndArg,reportDateBetween, userLogin, lsOrderId, status);\n\t\t\tString strcount=totalOrders.toString();\n\t\t\tInteger sizeList=Integer.parseInt(strcount) / PAGE_ITEMS_COUNT;\n\t\t\tnextListPages=1;\n\t\t\tsession.setAttribute(""nextListPages"",nextListPages);\n\t\t\tfor(int i=1;i<=sizeList+1 && i<=11;i++){\n\t\t\t\tOrdersDTO ord=new OrdersDTO();\n\t\t\t\tord.setCssStyle("""");\n\t\t\t\tord.setIndex(i);\n\t\t\t\tlistIndexSet.add(ord);\n\t\t\t}\n\t\t\tindexSet=0;\n\t\t\tsession.setAttribute(""indexSet"",indexSet);\n\t\t\tsession.setAttribute(""totalOrders"",totalOrders);\n\t\t\tsession.setAttribute(""listIndexSet"",listIndexSet);\n\n\t}\n\t\n\tpublic List<OrdersDTO> getOrdersToCancel(String strOrderSelected){\n\t\tList<OrdersDTO>result=new ArrayList<OrdersDTO>();\n\t\tif(strOrderSelected==null || strOrderSelected.equals(""""))return result;\n\t\tString[] tabPrint=strOrderSelected.split("","");\n\t\tfor(int i=0;i<tabPrint.length;i++){\n\t\t\tString item=tabPrint[i];\n\t\t\tString[] tabItem=item.split("";"");\n\t\t\tint index=Integer.parseInt(tabItem[0]);\n\t\t\tOrdersDTO orderDTO= listOrdersDTO.get(index);\n\t\t\tif(tabItem[1].equals(""t"")){\n\t\t\t\tresult.add(orderDTO);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n}\n\n----------------------------------- SOURCE END -------------------------------------",1403209254256
error,log,,,"Problems occurred when invoking code from plug-in: ""org.eclipse.jdt.ui"".",1403209254257
error,log,,,"Error in JDT Core during reconcile",1403209254258
error,log,,,"Exception occurred during problem detection:\n----------------------------------- SOURCE BEGIN -------------------------------------\npackage com.loyauty.web.struts.action.orders;\n\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.InputStream;\nimport java.text.SimpleDateFormat;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.Date;\nimport java.util.List;\nimport javax.servlet.http.HttpSession;\nimport lombok.Getter;\nimport lombok.Setter;\nimport com.loyauty.exception.ServiceLocatorException;\nimport com.loyauty.service.core.dto.OrdersDTO;\nimport com.loyauty.service.orders.OrdersService;\nimport com.loyauty.web.struts.action.LoyautyAction;\n\npublic class OrdersAdminXLS extends LoyautyAction{\n\tprivate static final long serialVersionUID = -8730372014253451459L;\n\n\tprivate OrdersService orderService;\n\t@Getter @Setter\n\tprivate InputStream fileInputStream;\n\t@Getter @Setter\n\tprivate String fileName="""";\n\t@Getter @Setter\n\tprivate String lsOrderIdToPrint;\n\tprivate List<OrdersDTO>listOrdersDTO;\n\t@Getter @Setter\n\tprivate Long tansformAutoSignal;\n\t@Getter @Setter\n\tprivate Long init;\n\t@Getter @Setter\n\tprivate Long tansformManSignal;\n\t@Getter @Setter\n\tprivate Long treatOrderPageSignal;\n\t@Getter @Setter\n\tprivate Integer reportOrderPageSignal;\n\t@Getter @Setter\n\tprivate Integer invoicedOrderPageSignal;\n\t@Getter @Setter\n\tprivate Integer selectedOrdersListSignal;\n\t@Getter @Setter\n\tprivate Long allProgressListOrdersSignal;\n\t@Getter @Setter\n\tprivate String showPopupConfirmInsert;\n\t@Getter @Setter\n\tprivate Long printAllOrdersSignal;\n\t@Getter @Setter\n\tprivate String message="""";\n\tCollection list;\n\t@Getter @Setter\n\tprivate String strPrint;\n\t@Getter @Setter\n\tprivate String userLogin;\n\t@Getter @Setter\n\tprivate Integer selectedStatus;\n\tprivate boolean insert;\n\tpublic OrdersAdminXLS() throws ServiceLocatorException {\n\t\tsuper();\t\n\t\tlistOrdersDTO=new ArrayList<OrdersDTO>();\n\t\torderService = getServiceLocator().getOrderService();\n\t}\n\t\n\t@Override  \n\tpublic String execute() throws Exception {\t\n\t\tHttpSession session = request.getSession(true);\n\t\tString filePath = session.getServletContext().getRealPath(""/"");\n\t\tString filePathData=filePath+""WEB-INF/jsp/orders/data/"";\n\t\tSimpleDateFormat frm=new SimpleDateFormat(""dd/MM/yyyy"");\n\t\tinsert=false;\n\t\tif((treatOrderPageSignal!=null && treatOrderPageSignal!=0L)||\n\t\t   (reportOrderPageSignal!=null && reportOrderPageSignal!=0L)||\n\t\t   invoicedOrderPageSignal!=null && invoicedOrderPageSignal!=0L){\n\t\t\tif(selectedOrdersListSignal!=null && selectedOrdersListSignal!=0L){\n\t\t\t\tif((treatOrderPageSignal!=null && treatOrderPageSignal!=0L))\n\t\t\t\t\tlistOrdersDTO= (List<OrdersDTO>)session.getAttribute(""listOrdersDTOTreat"");\n\t\t\t\tif((reportOrderPageSignal!=null && reportOrderPageSignal!=0L)){\n\t\t\t\t\tinsert=true;\n\t\t\t\t\tlistOrdersDTO= (List<OrdersDTO>)session.getAttribute(""listOrdersDTOReport"");\n\t\t\t\t}\n\t\t\t\tif(invoicedOrderPageSignal!=null && invoicedOrderPageSignal!=0L)\n\t\t\t\t\tlistOrdersDTO= (List<OrdersDTO>)session.getAttribute(""listOrdersDTOInvoiced"");\n\t\t\t}else if(allProgressListOrdersSignal!=null && allProgressListOrdersSignal!=0L){\n\t\t\t\tfrm=new SimpleDateFormat(""dd/MM/yyyy"");\n\t\t\t\tDate date=frm.parse(""01/01/1928"");\n\t\t\t\tString userLogin="""";\n\t\t\t\tString status=""prog"";\n\t\t\t\tlistOrdersDTO=orderService.getOrdersByDateClientLikeLsOrderId(date, userLogin, """", status);\n\t\t\t}\n\t\t}else if(init!=null && init!=0L ){\n\t\t\t\tDate date=frm.parse(""01/01/1928"");\n\t\t\t\tString userLogin="""";\n\t\t\t\tString status=""prog"";\n\t\t\t\tlistOrdersDTO=orderService.getOrdersByDateClientLikeLsOrderId(date, userLogin, """", status);\t\n\t\t}\n\t\ttry{\n\t\t\t\n\t\t\tif(selectedOrdersListSignal==null)selectedOrdersListSignal=0;\n\t\t\t/*------------------------ Change print property of order ---------------------\n\t\t\t\t\tcatch string content values print and change print property order \n\t\t\t  -----------------------------------------------------------------------------*/\n\t\t\tif(selectedOrdersListSignal!=0L && init==null){\n\t\t\t\tString[] tabPrint=strPrint.split("","");\n\t\t\t\tfor(int i=0;i<tabPrint.length;i++){\n\t\t\t\t\tString item=tabPrint[i];\n\t\t\t\t\tString[] tabItem=item.split("";"");\n\t\t\t\t\tint index=Integer.parseInt(tabItem[0]);\n\t\t\t\t\tOrdersDTO orderDTO= listOrdersDTO.get(index);\n\t\t\t\t\tif(tabItem[1].equals(""t"")){\n\t\t\t\t\t\torderDTO.setPrint(true);\n\t\t\t\t\t}else orderDTO.setPrint(false);\n\t\t\t\t}\n\t\t\t\tif((reportOrderPageSignal!=null && reportOrderPageSignal!=0L))\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOReport"",listOrdersDTO);\n\t\t\t\tif(invoicedOrderPageSignal!=null && invoicedOrderPageSignal!=0L)\n\t\t\t\t\tsession.setAttribute(""listOrdersDTOInvoiced"",listOrdersDTO);\n\t\t\t}\n\t\t\t/*-------------------- Create a file XLS from orders list ---------------------\n\t\t\t\t\t  The system will create a XLS file with the client login name\n\t \t\t ------------------------------------------------------------------------------*/\n\t\t\t\n\t\t\t\n\t\t\tfrm=new SimpleDateFormat(""ddMMyyyy"");\n\t\t\tDate date=new Date();\n\t\t\tString strDate=frm.format(date);\n\t\t\t\n\t\t\tswitch (selectedOrdersListSignal) {\n\t\t\tcase 0: // generate CSV Canada Post for all Orders\n\t\t\t\tstrDate=frm.format(date);\n\t\t\t\torderService.generateAdminEstTool(listOrdersDTO, filePathData,false);\n\t\t\t\tfileInputStream = new FileInputStream(new File( filePathData+""EST_TOOL.csv""));\n\t\t\t\tfileName=""EST_all_orders""+strDate+"".csv"";\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\tcase 1: // get XLS File for list\n\t\t\t\torderService.generateAdminXLS(listOrdersDTO, filePathData,true);\n\t\t\t\tfileInputStream = new FileInputStream(new File( filePathData+""ordersAdminExport.xls""));\n\t\t\t\tfileName=""list_orders""+strDate+"".xls"";\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\tcase 2: // generate CSV Canada Post for just Orders Selected\n\t\t\t\torderService.generateAdminEstTool(listOrdersDTO, filePathData,true);\n\t\t\t\tfileInputStream = new FileInputStream(new File( filePathData+""EST_TOOL.csv""));\n\t\t\t\tfileName=""EST_orders_selected""+strDate+"".csv"";\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\tcase 3: // generate XLS for Shipped orders of an partner Selected and Change status to ""invoiced""\n\t\t\t\torderService.generateInvoicedXLS(listOrdersDTO, filePathData,insert);\n\t\t\t\tfileInputStream = new FileInputStream(new File( filePathData+""invoicedOrders.xls""));\n\t\t\t\tString partnerName="""";\n\t\t\t\tfor (OrdersDTO orderDTO : listOrdersDTO) {\n\t\t\t\t\tif(orderDTO.getPrint()!=null && orderDTO.getPrint() &&\n\t\t\t\t\t   (orderDTO.getStatus().equals(""shipped"")|| orderDTO.getStatus().equals(""invoiced""))){\n\t\t\t\t\t\tpartnerName=orderDTO.getUserLogin();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsession.setAttribute(""invoicedOrdersRefresh"",1L);\n\t\t\t\tfileName=partnerName+""_Invoices_""+strDate+"".xls"";\n\t\t\t\t// PARTNER NAME_Invoices_MMDDYYY.xls\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn SUCCESS;\n\t\t}catch (Exception e) {\n\t\t\te.printStackTrace();\n\t\t\treturn ERROR;\n\t\t}\n\t}\n\t\n}\n\n----------------------------------- SOURCE END -------------------------------------",1403209255726
error,log,,,"Problems occurred when invoking code from plug-in: ""org.eclipse.jdt.ui"".",1403209255728
error,log,,,"Error in JDT Core during reconcile",1403209255729
executed,command,org.eclipse.wst.server.ui,1.1.207.v20110119,"org.eclipse.wst.server.run",1403209275212
activated,view,org.eclipse.ui.console,3.5.0.v20100526,"org.eclipse.ui.console.ConsoleView",1403209295977
error,log,,,"Server Tomcat v6.0 Server at localhost failed to start.",1403209307162
activated,view,org.eclipse.wst.server.ui,1.1.207.v20110119,"org.eclipse.wst.server.ui.ServersView",1403209307190
